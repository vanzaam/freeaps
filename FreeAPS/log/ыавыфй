Skipping updateConnections until state is poweredOn
OmniBLE centralManager(_:willRestoreState:): {
    kCBRestoredPeripherals =     (
        "<CBPeripheral: 0x13c644700, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>"
    );
}
Created device
centralManagerDidUpdateState(_:): 5
Re-connecting to known peripheral EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x13c644700, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
NightscoutManager.swift - subscribe() - 74 DEV: Network status: reachable by WiFi
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
centralManager(_:didConnect:): <CBPeripheral: 0x13c644700, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x13c644700, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
Applying configuration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
didDiscoverServices
Discovered service: <CBService: 0x13c770400, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
HealthKitManager.swift - init(resolver:) - 95 DEV: HealthKitManager did create
didReadRSSI: -81
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d20c0abc5d6c9f3d9c22bb
Restoring peripheral from state: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d20c0abc5d6c9f3d9c22bb
API MISUSE: <CBCentralManager: 0x13c6c0540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d2048abc5d6c9f3d95cc23
Unable to run command: central state = Optional("unknown"), peripheral state = CBPeripheralState(rawValue: 1)
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d2048abc5d6c9f3d95cc23
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
Error applying peripheral configuration: notReady
Restoring peripheral from state: E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
API MISUSE: <CBCentralManager: 0x13c6c0540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
API MISUSE: <CBCentralManager: 0x13c6c0540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
API MISUSE: <CBCentralManager: 0x13c6c0540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:28:33.176Z
centralManagerDidUpdateState(_:): 5
Scanning for peripherals and listening for connection events
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x13c646060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = disconnected>
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:28:33.180Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
Scanning for peripherals and listening for connection events
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
UserNotificationsManager.swift - requestNotificationPermissionsIfNeeded() - 288 DEV: UNUserNotificationCenter.authorizationStatus: UNAuthorizationStatus(rawValue: 2)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 21:06:37 +0000, 0.2)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 20:07:57 +0000, 0.5)
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
Application context data is nil
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 228 DEV: WCSession is activated: true
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 237 DEV: WCSession activated successfully
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 239 DEV: Watch is paired
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 241 DEV: Watch app is installed
Application context data is nil
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
SMB-Basal Manager initialized: isEnabled=true
SMB-Basal Manager starting...
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09968131067131578368
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.09849272870828302336
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04875384012925651968
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14524961373821913088
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.1846906091681699328
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17275551669396314112
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 50min, IOB: 0.3244349817443859968
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1962802601182892544
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.0711464822143307264
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 67min, IOB: 0.0685359795395920896
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 68min, IOB: 0.06778572574248882176
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05719717151348144128
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05620768356479582208
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05285376067779480576
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.03684879254927637504
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.01614652174110425088
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04117811478646135808
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 161min, IOB: 0.0323951386366702592
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.0290321249961331968
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 170min, IOB: 0.02697694597257137664
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 176min, IOB: 0.02375073706681583616
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.0209804992542753024
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.017404263299293161472
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.01595990184844986368
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02776512404813122048
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.01655025953010272256
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014862916154564653056
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.002843166067642367488
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 231min, IOB: 0.002824336475085908992
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 231min, IOB: 0.002806775515309490688
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 256min, IOB: 0.004388087563442244608
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011521257581079691264
  SMB-Basal IOB: 1.2794484134399049728U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2794484134399049728U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:34 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.064554870948696576 U
  Наш Basal IOB: 1.2794484134399049728 U
  Наш Total IOB: 3.3440032843886015488 U
  РАЗНИЦА: 4.1150032843886015488 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.5%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.8%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.3%, IOB: 0.185U
  SMB: 0.2U, возраст: 43мин, остаток: 86.4%, IOB: 0.173U
  SMB: 0.4U, возраст: 50мин, остаток: 81.1%, IOB: 0.324U
  SMB: 0.25U, возраст: 54мин, остаток: 78.5%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 71.1%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.064554870948696576
  Custom Basal IOB: 1.2794484134399049728
  Custom Total IOB: 3.3440032843886015488
  Difference: 4.1150032843886015488
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.3440032843886015488U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.3440032843886014, calculationTime=1758598114.0597072
SMB-Basal: Middleware installed successfully
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.3440032843886014U
Session Established
msgSequenceNumber: 3
Setting podState transport state to ## MessageTransportState
eapSeq: 1383
msgSeq: 3
nonceSeq: 0
messageNumber: 5
Scheduling session Post-connect status fetch
Delegate configuration notified
Peripheral configuration completed
======================== Post-connect status fetch ===========================
Send(Hex): 17a8db2d10030e010701fc
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d10030e010701fc
Recv(Hex): 17a8db2d140a1d28042f9000404657ff0125
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d140a1d28042f9000404657ff0125
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:75h1m, reservoirLevel:50+, insulinDelivered:107.15, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:2, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 05:59:27 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 05:59:27 30 минут 0 секунд 0 ед Определенно]
------------------------ Post-connect status fetch ---------------------------
Start of idle at Optional(2025-09-23 03:28:34 +0000)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
Scanning for peripherals and listening for connection events
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09966906639160008704
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.09846785387395538944
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04873841428163342336
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14519853877041881088
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.1845958328180620544
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17264305989024540672
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 50min, IOB: 0.324193755020808192
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1961264751985629696
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07108356704581322752
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 67min, IOB: 0.0684731356903495168
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 68min, IOB: 0.06772294848634881024
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.0571371762483214848
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05614810155058592768
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05279574810259999744
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.03680140885105772544
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.016124767942914762752
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04111436130457011712
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 161min, IOB: 0.032341468486649728
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.0289825458578812416
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 170min, IOB: 0.02692993686765594112
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 176min, IOB: 0.02370787917339498496
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.02094133135666076928
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.0173700563472473088
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.01592777087871597568
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02770700345715768832
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016510027433887010816
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.00148229625613996032
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.00283541643675652096
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 231min, IOB: 0.002816622148921465856
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002799094168705051136
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 256min, IOB: 0.0043716571192050432
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011415337407658651648
  SMB-Basal IOB: 1.2784396506066071552U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2784396506066071552U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:39 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.06289885119759104 U
  Наш Basal IOB: 1.2784396506066071552 U
  Наш Total IOB: 3.3413385018041981952 U
  РАЗНИЦА: 4.1123385018041981952 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.5%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.8%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.3%, IOB: 0.185U
  SMB: 0.2U, возраст: 43мин, остаток: 86.3%, IOB: 0.173U
  SMB: 0.4U, возраст: 50мин, остаток: 81.0%, IOB: 0.324U
  SMB: 0.25U, возраст: 54мин, остаток: 78.5%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 71.1%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.06289885119759104
  Custom Basal IOB: 1.2784396506066071552
  Custom Total IOB: 3.3413385018041981952
  Difference: 4.1123385018041981952
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3413385018041981952
  Difference: 4.1123385018041981952
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 1 min, isZero: true
SMB-Basal: Settings changed - smbBasalEnabled=false, current isEnabled=true
SMB-Basal: Disabling and stopping SMB-basal system
SMB-Basal: Middleware removed
SMB-Basal: Settings changed - smbBasalEnabled=true, current isEnabled=false
SMB-Basal: Enabling and starting SMB-basal system
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09966619415711494144
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.09846205671509581824
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04873482372782454784
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14518665633581744128
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.1845738141980414464
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17261695045530396672
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 50min, IOB: 0.3241377652012800512
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1960907847718459392
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07106896891216050176
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 67min, IOB: 0.06845855498778775552
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 68min, IOB: 0.06770838347002182656
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.0571232592896704
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05613428065425596416
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05278229189020775424
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.0367904201138614272
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.016119723272469354496
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04109957890852600832
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 161min, IOB: 0.0323290248153824256
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02897105099633967104
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 170min, IOB: 0.02691903804606921728
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 176min, IOB: 0.02369794307162262528
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.0209322509866863616
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.01736212641146903552
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015920322346344042496
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02769353049243350016
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016500702376997011456
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014813702888245477376
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.002833620399899316736
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 231min, IOB: 0.00281483429767079936
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002797313963952963072
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 256min, IOB: 0.004367850516015891968
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011390839916555210752
  SMB-Basal IOB: 1.2782074140559302656U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2782074140559302656U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:40 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.062514570062648064 U
  Наш Basal IOB: 1.2782074140559302656 U
  Наш Total IOB: 3.3407219841185783296 U
  РАЗНИЦА: 4.1117219841185783296 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.5%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.8%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.3%, IOB: 0.185U
  SMB: 0.2U, возраст: 43мин, остаток: 86.3%, IOB: 0.173U
  SMB: 0.4U, возраст: 50мин, остаток: 81.0%, IOB: 0.324U
  SMB: 0.25U, возраст: 54мин, остаток: 78.4%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 71.1%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.062514570062648064
  Custom Basal IOB: 1.2782074140559302656
  Custom Total IOB: 3.3407219841185783296
  Difference: 4.1117219841185783296
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.3407219841185783296U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.340721984118578, calculationTime=1758598120.262012
SMB-Basal: Middleware installed successfully
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.340721984118578U
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09965670426460319744
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.09844300157094991872
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04872303341297430528
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.1451476533846959104
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.18450162106337152
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17253138864805373952
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 50min, IOB: 0.3239543274575949312
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1959738631856507392
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07102115402373223424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 67min, IOB: 0.06841079951747751936
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 68min, IOB: 0.0676606799963952128
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.0570776851981018112
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05608902167003974656
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.0527382287878224896
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.036754442348188288
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.0161032073740225024
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04105118746854150144
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 161min, IOB: 0.03228829129420905472
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.0289334241037161984
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 170min, IOB: 0.02688336268733244416
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 176min, IOB: 0.023665419750054016
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.02090252934446183936
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.01733617120785369088
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015895943188285548544
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02764943439941500416
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.01647018517789549568
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014783401857397583872
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.002827743172578556928
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 231min, IOB: 0.002808983865500657664
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002791488562176957952
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 256min, IOB: 0.004355397423299312128
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011310808732668540928
  SMB-Basal IOB: 1.2774376410408957952U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2774376410408957952U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:44 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.061255794608001536 U
  Наш Basal IOB: 1.2774376410408957952 U
  Наш Total IOB: 3.3386934356488973312 U
  РАЗНИЦА: 4.1096934356488973312 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.4%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.8%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.3%, IOB: 0.185U
  SMB: 0.2U, возраст: 43мин, остаток: 86.3%, IOB: 0.173U
  SMB: 0.4U, возраст: 50мин, остаток: 81.0%, IOB: 0.324U
  SMB: 0.25U, возраст: 54мин, остаток: 78.4%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 71.0%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.061255794608001536
  Custom Basal IOB: 1.2774376410408957952
  Custom Total IOB: 3.3386934356488973312
  Difference: 4.1096934356488973312
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3386934356488973312
  Difference: 4.1096934356488973312
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 1 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09964412083913197568
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.09841796018108321792
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04870756611879015424
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.1450965222755854336
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.18440716495845496832
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17241954247375253504
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 50min, IOB: 0.3237146381070413824
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.195821110057803776
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07095870544405830656
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 67min, IOB: 0.068348433892997888
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 68min, IOB: 0.06759838370489663488
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.0570181854749151232
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05602993456048441344
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05268070676419475456
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.03670748786452140032
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.016081654009612095488
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.040988048029713152
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 161min, IOB: 0.03223514802284672512
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.0288843356773089536
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02683682135092199424
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02362299221292529664
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.0208637581877423104
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.017302315274659043328
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015864143923922839552
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.0275919196885500416
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016430388563444164608
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014743892200200128512
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.002820079968651767808
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 231min, IOB: 0.002801355620327617536
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002783892973303303168
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 256min, IOB: 0.004339167855638592512
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011206763743011325952
  SMB-Basal IOB: 1.2764345893772009472U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2764345893772009472U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:49 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.059611549671600896 U
  Наш Basal IOB: 1.2764345893772009472 U
  Наш Total IOB: 3.3360461390488018432 U
  РАЗНИЦА: 4.1070461390488018432 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.4%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.7%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.2%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 86.2%, IOB: 0.172U
  SMB: 0.4U, возраст: 50мин, остаток: 80.9%, IOB: 0.324U
  SMB: 0.25U, возраст: 54мин, остаток: 78.3%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 71.0%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.059611549671600896
  Custom Basal IOB: 1.2764345893772009472
  Custom Total IOB: 3.3360461390488018432
  Difference: 4.1070461390488018432
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3360461390488018432
  Difference: 4.1070461390488018432
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x13c646220, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataLocalName": DXCMXn, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x13d67f990>(
FEBC
)
, "kCBAdvDataManufacturerData": <d000c93d 0004>, "kCBAdvDataTimestamp": 780290931.677979, "kCBAdvDataIsConnectable": 1, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataRxSecondaryPHY": 0]
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Discovered peripheral from connectionEventDidOccur 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManager(_:didConnect:): <CBPeripheral: 0x13c646220, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connected>
didConnect to 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMXn")
Set notify true for <CBPeripheral: 0x13c646220, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connected>
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09963132527487520768
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 19min, IOB: 0.0983927473594642432
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 22min, IOB: 0.04869202323489615872
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.1450451811725862912
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.18431253003060877312
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17230759869915123712
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.323474852437802752
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.195668321209684736
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.070896264344706304
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06828608178417580032
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.0675361025277613568
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05695871802878835712
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05597088088496287744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05262322160832694272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 114min, IOB: 0.03666057767603869696
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.016060122661834477568
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04092498635426527744
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03218207516431847424
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02883531428271064064
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02679034481158158336
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.0235806256876606208
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.0208250444994057472
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 190min, IOB: 0.017268511783238160384
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015832394908209229824
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02753449879034111488
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016390664887209627648
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014704460682080600064
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.002812432079525683712
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002793742643950259712
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002776312610211239936
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004322979533579475456
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0011103273365066225664
  SMB-Basal IOB: 1.27543146035560448U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.27543146035560448U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:54 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.057967250376587264 U
  Наш Basal IOB: 1.27543146035560448 U
  Наш Total IOB: 3.333398710732191744 U
  РАЗНИЦА: 4.104398710732191744 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.05U, возраст: 22мин, остаток: 97.4%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.7%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.2%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 86.2%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.9%, IOB: 0.323U
  SMB: 0.25U, возраст: 54мин, остаток: 78.3%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 70.9%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.057967250376587264
  Custom Basal IOB: 1.27543146035560448
  Custom Total IOB: 3.333398710732191744
  Difference: 4.104398710732191744
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.333398710732191744
  Difference: 4.104398710732191744
  Show Custom: true
[u 23EFC09E-EB1D-4372-8AEB-E82F84085C0E:m (null)] [com.swiftkey.SwiftKeyApp.Keyboard(4.2.5)] RB query for the extension process state failed with error: Error Domain=RBSServiceErrorDomain Code=1 "Client not entitled" UserInfo={RBSEntitlement=com.apple.runningboard.process-state, NSLocalizedFailureReason=Client not entitled, RBSPermanent=false}
App is being debugged, do not track this hang
Hang detected: 1.56s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.32s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.61s (debugger attached, not reporting)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09961826276592601088
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09836725586159972352
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04867633873974680576
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14499341211429462016
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 33min, IOB: 0.18421731515237183488
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.1721950831764988928
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3232339551604035584
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1955148497882309376
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.0708335664402944
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06822347930093897728
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.0674735728801063936
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05689903123855391744
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.05591161077740509184
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05256553010442599424
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03661351335453182976
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.01603852225952385024
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.0408617357555004928
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03212884829211355136
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02878615263285431808
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02674373654772144128
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02353814103864895488
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.02078622459530175232
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.017234617818645659648
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015800561915942064128
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02747692895795004416
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016350846248890748928
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.001466494066052299776
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 231min, IOB: 0.00280476718490728704
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002786112763714422272
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.00276871543816136192
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004306764080511849472
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 290min, IOB: 0.0010999901675036172288
  SMB-Basal IOB: 1.2744244275184726016U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2744244275184726016U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:28:59 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.056315936619272192 U
  Наш Basal IOB: 1.2744244275184726016 U
  Наш Total IOB: 3.3307403641377447936 U
  РАЗНИЦА: 4.1017403641377447936 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.4%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.7%, IOB: 0.145U
  SMB: 0.2U, возраст: 33мин, остаток: 92.1%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 86.1%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.8%, IOB: 0.323U
  SMB: 0.25U, возраст: 54мин, остаток: 78.2%, IOB: 0.196U
  SMB: 0.1U, возраст: 64мин, остаток: 70.8%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.056315936619272192
  Custom Basal IOB: 1.2744244275184726016
  Custom Total IOB: 3.3307403641377447936
  Difference: 4.1017403641377447936
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3307403641377447936
  Difference: 4.1017403641377447936
  Show Custom: true
AddGlucoseStateModel.swift - add() - 19 DEV: AddGlucose: start units=mmol/L input=7.2
AddGlucoseStateModel.swift - add() - 30 DEV: AddGlucose: converted to mg/dL=130 at 2025-09-23 03:28:54 +0000
AddGlucoseStateModel.swift - add() - 55 DEV: AddGlucose: stored locally id=254F9C6D-3EDD-42DE-88A5-C7BAAF0C6C2E
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/entries.json
AddGlucoseStateModel.swift - add() - 58 DEV: AddGlucose: requested NS upload
AddGlucoseStateModel.swift - add() - 60 DEV: AddGlucose: requested HealthKit save
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x13c646220, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = disconnected>
Discovered peripheral from connectionEventDidOccur 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Not connecting to unnamed peripheral: <CBPeripheral: 0x13e81d0a0, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = (null), mtu = 23, state = disconnected>
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09960508440719142912
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09834177865779490816
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04866069266004985856
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14494180899823222784
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18412261101762424832
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17208328389439461376
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.322994703000000512
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.195362451855359232
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07077132896612294656
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.068161342540189696
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.0674115100131900928
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05683980769940422656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 84min, IOB: 0.0558528020570678784
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05250829198545197056
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03656683299713219584
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.016017099752307693568
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04079901925610392576
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03207607581067467776
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.0287374126506544896
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02669752928782406656
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02349602384788156416
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 182min, IOB: 0.0207477421586780032
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.017201020748226818048
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015769008753033035776
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02741986811228480512
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016311387649044516864
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014625783684459229184
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002797172861466179584
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002778553156062934528
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002761188259730628608
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.00429070670909941248
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010897827422656774144
  SMB-Basal IOB: 1.273424204010901504U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.273424204010901504U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:04 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.054676500872990208 U
  Наш Basal IOB: 1.273424204010901504 U
  Наш Total IOB: 3.328100704883891712 U
  РАЗНИЦА: 4.099100704883891712 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.3%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.6%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 92.1%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 86.0%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.7%, IOB: 0.323U
  SMB: 0.25U, возраст: 54мин, остаток: 78.1%, IOB: 0.195U
  SMB: 0.1U, возраст: 64мин, остаток: 70.8%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.054676500872990208
  Custom Basal IOB: 1.273424204010901504
  Custom Total IOB: 3.328100704883891712
  Difference: 4.099100704883891712
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.328100704883891712
  Difference: 4.099100704883891712
  Show Custom: true
Scanning for peripherals and listening for connection events
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.09959164524374898688
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09831603351873368064
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04864491142496873472
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 24min, IOB: 0.14488979903348195328
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.1840273646927300608
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17197095690622461952
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3227544329542269952
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1952094309285718016
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.0707088589157991424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.068098979566783744
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06734922280133504
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05678038775641017344
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05579379967802949632
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05245086966412191744
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03652001650532050432
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.015995616443391442944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04073613794153524224
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03202316958285125632
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02868855112468830208
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02665120803821353984
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02345380469168515072
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.0207091682643717248
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.01716734608180610048
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.015737383704184717312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02736268018798693888
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016271849176688099328
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.0014586553162915919872
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.0027895644331185408
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002770979531812822016
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002753647147153915392
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004274628315863803392
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.001079590994449874944
  SMB-Basal IOB: 1.2724207613747101696U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2724207613747101696U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:09 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.053030690566579712 U
  Наш Basal IOB: 1.2724207613747101696 U
  Наш Total IOB: 3.3254514519412898816 U
  РАЗНИЦА: 4.0964514519412898816 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.3%, IOB: 0.049U
  SMB: 0.15U, возраст: 24мин, остаток: 96.6%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 92.0%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 86.0%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.7%, IOB: 0.323U
  SMB: 0.25U, возраст: 54мин, остаток: 78.1%, IOB: 0.195U
  SMB: 0.1U, возраст: 64мин, остаток: 70.7%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.053030690566579712
  Custom Basal IOB: 1.2724207613747101696
  Custom Total IOB: 3.3254514519412898816
  Difference: 4.0964514519412898816
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3254514519412898816
  Difference: 4.0964514519412898816
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 14min, IOB: 0.0995779918783926272
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09829011041193234432
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04862905026955467776
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14483756437254490112
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18393191036161847296
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17185849666031822848
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.32251398909057792
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 54min, IOB: 0.1950563246457961984
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.07064637584323407872
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06803660957644218368
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06728693017882505216
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05672098031965843456
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05573481108651638784
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 89min, IOB: 0.05239346504459851776
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.0364732285362896384
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.015974147896657821696
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04067331303043646976
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.0319703157518714368
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02863973997453712384
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02660493578495323648
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02341163212952315392
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02067063865129530112
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.017133712326635655168
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 194min, IOB: 0.01570579806739997696
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02730556645754518016
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 219min, IOB: 0.016232370018157785088
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.001454738722068472832
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002781968688631452672
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002763418557282871808
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.00274611865236673536
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004258585547069638144
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010694509492955584512
  SMB-Basal IOB: 1.2714170882493601792U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2714170882493601792U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:14 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.05138428948202752 U
  Наш Basal IOB: 1.2714170882493601792 U
  Наш Total IOB: 3.3228013777313876992 U
  РАЗНИЦА: 4.0938013777313876992 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.3%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.6%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 92.0%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 85.9%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.6%, IOB: 0.323U
  SMB: 0.25U, возраст: 54мин, остаток: 78.0%, IOB: 0.195U
  SMB: 0.1U, возраст: 64мин, остаток: 70.6%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.05138428948202752
  Custom Basal IOB: 1.2714170882493601792
  Custom Total IOB: 3.3228013777313876992
  Difference: 4.0938013777313876992
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3228013777313876992
  Difference: 4.0938013777313876992
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.0995641319759545344
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09826402318968639488
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04861311758068518912
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14478513251760431104
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18383629766244601856
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17174596129706012672
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3222734953772761088
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1949032118688595456
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 64min, IOB: 0.0705839118662337024
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06797426461085663232
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.0672246641428097536
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.0566616158516267008
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05567586652618748928
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.0523361075458191872
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03642649302749435904
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.015952705091080001536
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 149min, IOB: 0.04061057661597594624
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03191754130477203968
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 167min, IOB: 0.02859100411814388736
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.0265587361468609792
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.0233695276829410048
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.0206321729778759808
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.017100136637973424128
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015674267951013720064
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02724855604176807936
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.01619297028539606016
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.001450830579808172032
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.00277438949484802816
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002755874081565811712
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002738606607880788992
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004242586551818130432
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010593677000304560128
  SMB-Basal IOB: 1.2704134615233089536U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2704134615233089536U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:19 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.049738144910352896 U
  Наш Basal IOB: 1.2704134615233089536 U
  Наш Total IOB: 3.3201516064336618496 U
  РАЗНИЦА: 4.0911516064336618496 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.2%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.5%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.9%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 85.9%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.6%, IOB: 0.322U
  SMB: 0.25U, возраст: 55мин, остаток: 78.0%, IOB: 0.195U
  SMB: 0.1U, возраст: 64мин, остаток: 70.6%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.049738144910352896
  Custom Basal IOB: 1.2704134615233089536
  Custom Total IOB: 3.3201516064336618496
  Difference: 4.0911516064336618496
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3201516064336618496
  Difference: 4.0911516064336618496
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09955007153554767872
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09823778216164896768
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04859711952952754176
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14473252361000198144
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18374056244545318912
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 43min, IOB: 0.17163339252673435648
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3220330404698437632
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.194750148931609856
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07052148987263335424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06791196748851198976
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06716244747601840128
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 83min, IOB: 0.05660231599779328
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05561698748358905856
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05227881805763457024
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.0363798269412734464
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.015931295802330779648
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04054795139530880512
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03186486531560505344
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02854236116240589824
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02651262580992388608
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02332750655166809088
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02059378512396325632
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.017066631123007655936
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.01564280472103862272
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.0271916694814286592
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.016153664146115520512
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 230min, IOB: 0.00144693229287854592
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002766829572827001856
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002748348813175037952
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002731113710490507264
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.00422663704448913408
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010493447522789138432
  SMB-Basal IOB: 1.26941070338500608U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.26941070338500608U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:24 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.048092861346757888 U
  Наш Basal IOB: 1.26941070338500608 U
  Наш Total IOB: 3.317503564731763968 U
  РАЗНИЦА: 4.088503564731763968 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.2%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.5%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.9%, IOB: 0.184U
  SMB: 0.2U, возраст: 43мин, остаток: 85.8%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.5%, IOB: 0.322U
  SMB: 0.25U, возраст: 55мин, остаток: 77.9%, IOB: 0.195U
  SMB: 0.1U, возраст: 65мин, остаток: 70.5%, IOB: 0.071U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.048092861346757888
  Custom Basal IOB: 1.26941070338500608
  Custom Total IOB: 3.317503564731763968
  Difference: 4.088503564731763968
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.317503564731763968
  Difference: 4.088503564731763968
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09953579452654227456
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.098211356717924352
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04858103736539616256
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14467967587007676416
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.1836445916611442688
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17152065707584958464
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3217923393432370176
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1945969543215937536
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07045903577111090176
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06784964424798175232
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06710020630765928448
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05654301029687431168
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05555810399332688896
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05222152849063742464
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03633317477282797568
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 123min, IOB: 0.01590989456135600128
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04048536283161200128
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.0318122250762875648
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.0284937531953168896
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02646654987424207872
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02328551869970303488
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02055542937566142464
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.01703315587656013824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015611370902336909312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 200min, IOB: 0.02713483901345319936
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.01611440476095218688
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014430392146177040384
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002759279910984369664
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002740833781782947328
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.0027236310284073472
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004210717994329548288
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010393700870211518464
  SMB-Basal IOB: 1.2684073594344423424U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2684073594344423424U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:29 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.046446486946806272 U
  Наш Basal IOB: 1.2684073594344423424 U
  Наш Total IOB: 3.3148538463812486144 U
  РАЗНИЦА: 4.0858538463812486144 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.2%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.5%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.8%, IOB: 0.184U
  SMB: 0.2U, возраст: 44мин, остаток: 85.8%, IOB: 0.172U
  SMB: 0.4U, возраст: 51мин, остаток: 80.4%, IOB: 0.322U
  SMB: 0.25U, возраст: 55мин, остаток: 77.8%, IOB: 0.195U
  SMB: 0.1U, возраст: 65мин, остаток: 70.5%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.046446486946806272
  Custom Basal IOB: 1.2684073594344423424
  Custom Total IOB: 3.3148538463812486144
  Difference: 4.0858538463812486144
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3148538463812486144
  Difference: 4.0858538463812486144
  Show Custom: true
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:29:33.008Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:29:33.012Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:24:02 +0000
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09952129789429542912
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09818474098524137472
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04856486748542585856
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14462657742041214976
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.1835483635403167744
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17140772926219005952
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.32155133705464192
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1944435930457462016
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07039653527479030784
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06778728062665723904
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.0670379263924002304
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05648368515909190656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05549920256114335744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05216422571205174272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03628652581622524928
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015888496455683643392
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04042279654998912
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.03175960849439047168
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02844516904990488064
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02642049775406349312
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02324355447983488
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02051709691975008768
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.0169997032062411776
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015579959271404212224
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02707805157760922112
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.016075183106714380288
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014391504502296997888
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002751738774080515072
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002733327260108931072
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 232min, IOB: 0.002716156841785411584
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004194825742625463296
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.001029441414114540544
  SMB-Basal IOB: 1.2674032030577065984U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2674032030577065984U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:34 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.044798645579159552 U
  Наш Basal IOB: 1.2674032030577065984 U
  Наш Total IOB: 3.3122018486368661504 U
  РАЗНИЦА: 4.0832018486368661504 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.1%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.4%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.8%, IOB: 0.184U
  SMB: 0.2U, возраст: 44мин, остаток: 85.7%, IOB: 0.171U
  SMB: 0.4U, возраст: 51мин, остаток: 80.4%, IOB: 0.322U
  SMB: 0.25U, возраст: 55мин, остаток: 77.8%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.4%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.044798645579159552
  Custom Basal IOB: 1.2674032030577065984
  Custom Total IOB: 3.3122018486368661504
  Difference: 4.0832018486368661504
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3122018486368661504
  Difference: 4.0832018486368661504
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09950660566918488064
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.0981579784271535104
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04854863620916832256
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14457331457388281856
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18345203389809688576
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17129479160496816128
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3213104227886396416
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1942903126846119424
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07033408921664132096
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06772497721880449024
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06697570818471821312
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05642443622062132224
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.055440378136141056
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05210700208138681344
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.0362399552188674048
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015867135951134429184
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04036035329029648384
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.0317071002768948736
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02839668693644744192
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02637454358060443648
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.02320168143821605888
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02047884945259106816
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.016966326949121124352
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015548620378296078336
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02702139855407615488
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.016036062279847886848
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.001435272254411819008
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002744218290962607616
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002725841321276445696
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002708703171695192064
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004178985831703397376
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.001019574632942665728
  SMB-Basal IOB: 1.2663998517056776192U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2663998517056776192U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:39 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.043151996723404288 U
  Наш Basal IOB: 1.2663998517056776192 U
  Наш Total IOB: 3.3095518484290819072 U
  РАЗНИЦА: 4.0805518484290819072 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.1%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.4%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.7%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.6%, IOB: 0.171U
  SMB: 0.4U, возраст: 51мин, остаток: 80.3%, IOB: 0.321U
  SMB: 0.25U, возраст: 55мин, остаток: 77.7%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.3%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.043151996723404288
  Custom Basal IOB: 1.2663998517056776192
  Custom Total IOB: 3.3095518484290819072
  Difference: 4.0805518484290819072
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3095518484290819072
  Difference: 4.0805518484290819072
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.099491708152333312
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09813105045376098304
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04853233214018500608
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14451984976984723456
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18335553394150402048
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.171181762970924032
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.321069422996864256
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1941370027099929856
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.0702716524740151296
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.067662688979190784
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06691350669413189632
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05636522056269198336
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05538158810124105728
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05204981612314911744
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.03619342916764037632
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015845797531813277696
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04029798764217824768
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.0316546622193926912
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02834827157234940416
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 171min, IOB: 0.02632865390629631488
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 177min, IOB: 0.0231598690904852224
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.020440659122993472
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.016933002792923516928
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.01551733139123501056
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02696483865812599808
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015997013743679301632
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014314017962401296384
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002736712971440425472
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002718370500231872
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002701264576563965952
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.004163186668087081472
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010097624247532576768
  SMB-Basal IOB: 1.2653970053641443328U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2653970053641443328U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:44 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.041505351846262272 U
  Наш Basal IOB: 1.2653970053641443328 U
  Наш Total IOB: 3.3069023572104066048 U
  РАЗНИЦА: 4.0779023572104066048 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.1%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.1%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.3%, IOB: 0.145U
  SMB: 0.2U, возраст: 34мин, остаток: 91.7%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.6%, IOB: 0.171U
  SMB: 0.4U, возраст: 51мин, остаток: 80.3%, IOB: 0.321U
  SMB: 0.25U, возраст: 55мин, остаток: 77.7%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.3%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.041505351846262272
  Custom Basal IOB: 1.2653970053641443328
  Custom Total IOB: 3.3069023572104066048
  Difference: 4.0779023572104066048
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3069023572104066048
  Difference: 4.0779023572104066048
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Temp basal expired, not zero anymore
APSManager.swift - enactTempBasal(rate:duration:) - 489 DEV: Enact temp basal 0.0 - 1800.0
APSManager.swift - enactTempBasalWithRetry(pump:rate:originalRate:duration:attempt:maxAttempts:) - 515 DEV: Temp basal attempt 1/3: 0.0U/h for 30 min
Scheduling session Enact Temp Basal
======================== Enact Temp Basal ===========================
Enact temp basal 0.000U/hr for 1800s
Send(Hex): 17a8db2d18071f05494e532e0282c2
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d18071f05494e532e0282c2
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.active(2025-09-23 00:57:54 +0000))
Recv(Hex): 17a8db2d1c0a1d18042fb00040465bff80ea
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d1c0a1d18042fb00040465bff80ea
POD Response: StatusResponse(deliveryStatus:Запланированный базал, progressStatus:Норма, timeActive:75h2m, reservoirLevel:50+, insulinDelivered:107.15, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:6, alerts:slot7Expired)
Send(Hex): 17a8db2d20201a0e494e532e01007901384000000000160e000000016b49d2000001eb49d20082c0
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d20201a0e494e532e01007901384000000000160e000000016b49d2000001eb49d20082c0
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.initiatingTempBasal)
Recv(Hex): 17a8db2d240a1d28042fc00040465bff0021
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d240a1d28042fc00040465bff0021
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:75h2m, reservoirLevel:50+, insulinDelivered:107.15, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:8, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
ВБС
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 05:59:27 30 минут 0 секунд 0 ед Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 05:59:27 30 минут 0 секунд 0 ед Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
APSManager.swift - enactTempBasalWithRetry(pump:rate:originalRate:duration:attempt:maxAttempts:) - 546 DEV: Temp basal succeeded on attempt 1/3
------------------------ Enact Temp Basal ---------------------------
Start of idle at Optional(2025-09-23 03:29:46 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09947660006265489408
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.09810394695729862656
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04851594908380204032
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14446616259421130752
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.183258826294878208
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17106859928742580224
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 51min, IOB: 0.3208282434136257536
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1939836030885772544
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.0702092005403471872
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 68min, IOB: 0.06760039144382209024
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 69min, IOB: 0.06685129748652667904
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05630601487808101376
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05532280931320781824
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05199264531454019584
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.0361469293027484928
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015824472773234157568
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04023567495281869824
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 162min, IOB: 0.0316022735825851904
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02829990380507617792
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.026282810575144192
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.02311810088983350272
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02040251081407396352
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.0168997175424979968
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015486079919006128128
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02690834948506107904
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015958022015447912448
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014275375400631238656
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.00272921983740859136
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 232min, IOB: 0.002710911832517115392
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002693838104682034176
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 257min, IOB: 0.0041474219676714624
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 291min, IOB: 0.0010000008387578417152
  SMB-Basal IOB: 1.2643935047055839232U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2643935047055839232U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:49 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.03985806553762816 U
  Наш Basal IOB: 1.2643935047055839232 U
  Наш Total IOB: 3.3042515702432120832 U
  РАЗНИЦА: 4.0752515702432120832 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.1%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.0%, IOB: 0.049U
  SMB: 0.15U, возраст: 25мин, остаток: 96.3%, IOB: 0.144U
  SMB: 0.2U, возраст: 34мин, остаток: 91.6%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.5%, IOB: 0.171U
  SMB: 0.4U, возраст: 51мин, остаток: 80.2%, IOB: 0.321U
  SMB: 0.25U, возраст: 55мин, остаток: 77.6%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.2%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.03985806553762816
  Custom Basal IOB: 1.2643935047055839232
  Custom Total IOB: 3.3042515702432120832
  Difference: 4.0752515702432120832
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.3042515702432120832
  Difference: 4.0752515702432120832
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09946126631087521792
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 20min, IOB: 0.098076640740321792
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 23min, IOB: 0.04849947058309008384
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.1444121990947678208
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18316181365227843584
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.1709551866237968384
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.3205866411588574208
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1938299593243227648
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07014667050478055424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.0675380218540118528
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.06678901789130770432
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05624675951250343936
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05526398254718628864
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05193543204874000384
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 115min, IOB: 0.036100408763497216
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015803140184579178496
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04017335242113156096
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.0315498815667251968
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02825153488723487744
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02623696738400324608
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.02307633474029551616
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.0203643660782922624
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 191min, IOB: 0.016866437651782619136
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015454834465420464128
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.026851874103920128
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015919047800578535424
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014236755918017216512
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.0027217313379606528
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.002703457801966425088
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002686416272335756288
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004131675847771321344
  SMB-Basal IOB: 1.263388785401422848U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.263388785401422848U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:54 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.037218198746137344 U
  Наш Basal IOB: 1.263388785401422848 U
  Наш Total IOB: 3.300606984147560192 U
  РАЗНИЦА: 4.071606984147560192 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.1%, IOB: 0.098U
  SMB: 0.05U, возраст: 23мин, остаток: 97.0%, IOB: 0.048U
  SMB: 0.15U, возраст: 25мин, остаток: 96.3%, IOB: 0.144U
  SMB: 0.2U, возраст: 34мин, остаток: 91.6%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.5%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 80.1%, IOB: 0.321U
  SMB: 0.25U, возраст: 55мин, остаток: 77.5%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.1%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.037218198746137344
  Custom Basal IOB: 1.263388785401422848
  Custom Total IOB: 3.300606984147560192
  Difference: 4.071606984147560192
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.300606984147560192
  Difference: 4.071606984147560192
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.771
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 14
  Timestamp: 2025-09-23 03:25:14 +0000
  Reason: COB: 14, Dev: -4.2, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 7.8, minGuardBG 5.8, IOBpredBG 8.8, COBpredBG 11.8, UAMpredBG 8.8; Eventual BG 11.8 >= 6.3,  insulinReq 0.22; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.05U/hr. 
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09944575498521239552
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 21min, IOB: 0.09804921669320904704
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 24min, IOB: 0.0484829477663675904
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.144358126570186752
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18306479605789904896
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.1708418753457939456
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.320345362213937408
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.193676545722809088
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07008425532189489152
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.0674757726477070848
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.06672686006300225536
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05618763722645873664
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05520528923687550976
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05187835276787060736
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 116min, IOB: 0.03605401096707184128
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015781865525920591872
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04011121211956231168
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.0314976476235832576
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02820331386678515712
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02619126559402290176
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.02303469933411222272
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02032634244422359552
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 192min, IOB: 0.016833265653473251328
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.015423691292325146624
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02679558649709278208
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015880211143253528576
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014198278450229096448
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002714270534843776512
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.002696031364109951488
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002679021935835657216
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004115996776558005248
  SMB-Basal IOB: 1.2623862016280741888U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2623862016280741888U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:29:59 +0000
  Системный IOB: -0.771 U
  Наш Bolus IOB: 2.03558105313702144 U
  Наш Basal IOB: 1.2623862016280741888 U
  Наш Total IOB: 3.2979672547650956288 U
  РАЗНИЦА: 4.0689672547650956288 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.05U, возраст: 24мин, остаток: 97.0%, IOB: 0.048U
  SMB: 0.15U, возраст: 25мин, остаток: 96.2%, IOB: 0.144U
  SMB: 0.2U, возраст: 34мин, остаток: 91.5%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.4%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 80.1%, IOB: 0.320U
  SMB: 0.25U, возраст: 55мин, остаток: 77.5%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.1%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.771
  Custom Bolus IOB: 2.03558105313702144
  Custom Basal IOB: 1.2623862016280741888
  Custom Total IOB: 3.2979672547650956288
  Difference: 4.0689672547650956288
🧮 Custom IOB Update:
  System IOB: -0.771
  Custom IOB: 3.2979672547650956288
  Difference: 4.0689672547650956288
  Show Custom: true
DeviceDataManager.swift - updateUpdateFinished(_:) - 235 WARN: error("Loop recommendation time out or got error. Trying to loop right now.")
APSManager.swift - loop() - 161 DEV: Starting loop
APSManager.swift - determineBasal() - 244 DEV: Start determine basal
OpenAPS.swift - makeProfiles(useAutotune:) - 228 DEV: Start makeProfiles
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
App is being debugged, do not track this hang
Hang detected: 0.69s (debugger attached, not reporting)
DeviceDataManager.swift - heartbeat(date:) - 196 WARN: error("Loop in progress. Skip updating.")
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"timestamp":"2025-09-23T03:29:45.938Z","duration (min)":30,"id":"15ea2fae3abad84a74be81ba3d871287","_type":"TempBasalDuration"},{"timestamp":"2025-09-23T03:29:45.938Z","_type":"TempBasal","rate":0,"temp":"absolute","id":"_15ea2fae3abad84a74be81ba3d871287"},{"delivered_units":0.050000000000000003,"amount":0.050000000000000003,"id":"ef4061fd9b5bb898c54e7fe165bebb08","_type":"SMB-Basal","automatic":true,"duration":0,"timestamp":"2025-09-23T03:25:43.048Z"},{"automatic":true,"timestamp":"2025-09-23
OpenAPS: IOB calculation result: [
    {
        "iob": -0.781,
        "activity": -0.0081,
        "basaliob": -0.787,
        "bolusiob": 0.006,
        "netbasalinsulin": -2.3,
        "bolusinsulin": 0.3,
        "time": "2025-0
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,0,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,149,minutes ago; remainingCATime:,7.9,hours;,90% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-7.5,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1.9,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-7.5,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 168 minIOBPredBG: 162 minZTGuardBG: 135
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 168
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minUAMPredBG: 143
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,193,COB:,12,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,200,bgUndershoot:,-123,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-71
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,200,,0m 0U/h temp needed; last bolus,124.5m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 130,
    "tick": "+2",
    "eventualBG": 233,
    "insulinReq": 0.43,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:30:01.499Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            130,
            128,
            127,
            126,
            126,
            127,
            128,
            129,
            131,
            134,
            136,
            140,
            143,
            147,
            150,
            153,
            156,
            159,
            162,
            164,
            166,
            168,
            170,
            172,
            174,
            175,
            177,
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            184,
            185,
            185,
            186,
            186,
            187,
            187,
            187,
            188
        ],
        "ZT": [
            130,
            135,
            140,
            145,
            151,
            156,
            161,
            167,
            172,
            178,
            183,
            189,
            194,
            200,
            206,
            212,
            218,
            224,
            230,
            236,
            243,
            249,
            256,
            262,
            269,
            275,
            282,
            288,
            295,
            302,
            309,
            316,
            323,
            329,
            336,
            343,
            350,
            357,
            365,
            372,
            379,
            386,
            393,
            400,
            401,
            401,
            401,
            401
        ],
        "COB": [
            130,
            128,
            127,
            127,
            127,
            128,
            129,
            130,
            133,
            135,
            139,
            142,
            147,
            151,
            154,
            158,
            162,
            165,
            168,
            172,
            175,
            177,
            180,
            183,
            186,
            188,
            190,
            193,
            195,
            197,
            199,
            202,
            204,
            206,
            208,
            210,
            212,
            213,
            215,
            217,
            219,
            221,
            223,
            225,
            227,
            229,
            231,
            233
        ],
        "UAM": [
            130,
            128,
            127,
            126,
            126,
            127,
            128,
            129,
            131,
            134,
            136,
            140,
            143,
            147,
            150,
            153,
            156,
            159,
            162,
            164,
            166,
            168,
            170,
            172,
            174,
            175,
            177,
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            184,
            185,
            185,
            186,
            186,
            187,
            187,
            187,
            188
        ]
    },
    "COB": 12,
    "IOB": -0.781,
    "reason": "COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.45
}
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:01 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09943794010903175168
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 21min, IOB: 0.09803547292926332928
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 24min, IOB: 0.04847467715697799168
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.1443310735884218368
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 34min, IOB: 0.18301632818134351872
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17078530736276996096
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.320224949349756928
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1935999921546192384
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.07005311796251328512
APSManager.swift - enactSuggested() - 715 DEV: SMB-basal active: skipping OpenAPS temp basal (pump held at 0 U/h)
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.06744472026080131072
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.0666958538394201088
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05615815164426524672
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.0551760180934284288
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05184988812469728256
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 116min, IOB: 0.03603087817694969856
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.0157712591224821248
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.04008023714521109504
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.03147161247651160064
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02817927962747774464
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02616848744320889856
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.02301394861856335872
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.0203073924364379136
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 192min, IOB: 0.0168167344117164544
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.01540817148148752384
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02676753735694327808
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.0158608611068408832
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014179109509827600384
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 232min, IOB: 0.002710553725687824384
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.002692331683886528
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002675338256115845632
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004108189098230409728
  SMB-Basal IOB: 1.2618876888305799168U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2618876888305799168U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:30:01 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.034764213876044544 U
  Наш Basal IOB: 1.2618876888305799168 U
  Наш Total IOB: 3.2966519027066244608 U
  РАЗНИЦА: 4.0776519027066244608 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 347 DEV: Enact bolus 0.1, manual false
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.05U, возраст: 24мин, остаток: 96.9%, IOB: 0.048U
  SMB: 0.15U, возраст: 25мин, остаток: 96.2%, IOB: 0.144U
  SMB: 0.2U, возраст: 34мин, остаток: 91.5%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.4%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 80.1%, IOB: 0.320U
  SMB: 0.25U, возраст: 55мин, остаток: 77.4%, IOB: 0.194U
  SMB: 0.1U, возраст: 65мин, остаток: 70.1%, IOB: 0.070U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.034764213876044544
  Custom Basal IOB: 1.2618876888305799168
  Custom Total IOB: 3.2966519027066244608
  Difference: 4.0776519027066244608
CustomPredictionService.swift - generateCustomIOBData() - 120 DEV: 🎯 Custom IOB Data Generated:
CustomPredictionService.swift - generateCustomIOBData() - 121 DEV:   Total IOB: 3.2966519027066244608U
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 1/3: 0.1U
CustomPredictionService.swift - generateCustomIOBData() - 122 DEV:   Basal IOB: 1.2618876888305799168U
Scheduling session Bolus
======================== Bolus ===========================
CustomPredictionService.swift - generateCustomIOBData() - 123 DEV:   Bolus IOB: 2.034764213876044544U
Send(Hex): 17a8db2d281f1a0e494e532e02002501002000020002170d3f001400030d4000000000000002b5
APSManager.swift - loopCompleted(error:) - 199 DEV: Loop succeeded
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d281f1a0e494e532e02002501002000020002170d3f001400030d4000000000000002b5
CustomPredictionService.swift - generateCustomIOBData() - 124 DEV:   Activity: 0.008241629756766561152
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 63 DEV: 🚀 Calling oref0 with custom IOB data...
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 139 DEV: 🔧 callOref0WithCustomIOB started
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 142 DEV: 🔧 JavaScript context acquired, loading scripts...
APSManager.swift - reportEnacted(received:) - 805 DEV: Suggestion enacted. Received: true
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 151 DEV: 🔧 Scripts loaded, calling oref0...
JavaScriptWorker.swift - createContext() - 19 WARN: error("JavaScript Error: SyntaxError: Unexpected token \',\'")
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 170 DEV: 🔧 oref0 call completed, result: undefined...
CustomPredictionService.swift - parseOref0Result(_:) - 180 DEV: 🔧 parseOref0Result: parsing JSON length 9
CustomPredictionService.swift - parseOref0Result(_:) - 188 DEV: ❌ parseOref0Result: Failed to parse JSON
CustomPredictionService.swift - parseOref0Result(_:) - 189 DEV: Raw JSON: undefined
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 174 DEV: 🔧 Parsing result: FAILED
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 82 DEV: ❌ Custom Prediction Service: oref0 возвратил nil!
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopFirstNotification notification
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopSecondNotification notification
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
Recv(Hex): 17a8db2d2c0a1d68042fd00240465bff822d
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d2c0a1d68042fd00240465bff822d
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:75h2m, reservoirLevel:50+, insulinDelivered:107.15, bolusNotDelivered:0.10, lastProgrammingMessageSeqNum:10, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
Болюс
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 06:30:02 4 секунды Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 06:30:02 4 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 858 DEV: Bolus succeeded: 0.1
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 409 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 03:30:02 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 03:30:02 +0000, endDate: 2025-09-23 03:30:06 +0000, value: 0.1, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.1U -> SMB (isSmbBasal: false)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
App is being debugged, do not track this hang
Hang detected: 0.63s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"_type":"TempBasalDuration","duration (min)":30,"timestamp":"2025-09-23T03:29:45.938Z","id":"15ea2fae3abad84a74be81ba3d871287"},{"_type":"TempBasal","timestamp":"2025-09-23T03:29:45.938Z","id":"_15ea2fae3abad84a74be81ba3d871287","temp":"absolute","rate":0},{"_type":"SMB-Basal","automatic":true,"delivered_units":0.050000000000000003,"duration":0,"id":"ef4061fd9b5bb898c54e7fe165bebb08","timestamp":"2025-09-23T03:25:43.048Z","amount":0.050000000000000003},{"duration":0,"delivered_units":0.1000000
OpenAPS: IOB calculation result: [
    {
        "iob": -0.781,
        "activity": -0.0081,
        "basaliob": -0.787,
        "bolusiob": 0.006,
        "netbasalinsulin": -2.3,
        "bolusinsulin": 0.3,
        "time": "2025-0
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,0,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,149,minutes ago; remainingCATime:,7.9,hours;,90% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-7.5,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1.9,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-7.5,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 168 minIOBPredBG: 162 minZTGuardBG: 135
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 168
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minUAMPredBG: 143
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,193,COB:,12,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,200,bgUndershoot:,-123,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-71
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,200,,0m 0U/h temp needed; last bolus,124.5m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 130,
    "tick": "+2",
    "eventualBG": 233,
    "insulinReq": 0.43,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:30:02.786Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            130,
            128,
            127,
            126,
            126,
            127,
            128,
            129,
            131,
            134,
            136,
            140,
            143,
            147,
            150,
            153,
            156,
            159,
            162,
            164,
            166,
            168,
            170,
            172,
            174,
            175,
            177,
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            184,
            185,
            185,
            186,
            186,
            187,
            187,
            187,
            188
        ],
        "ZT": [
            130,
            135,
            140,
            145,
            151,
            156,
            161,
            167,
            172,
            178,
            183,
            189,
            195,
            200,
            206,
            212,
            218,
            224,
            230,
            237,
            243,
            249,
            256,
            262,
            269,
            275,
            282,
            288,
            295,
            302,
            309,
            316,
            323,
            330,
            336,
            343,
            350,
            358,
            365,
            372,
            379,
            386,
            393,
            400,
            401,
            401,
            401,
            401
        ],
        "COB": [
            130,
            128,
            127,
            127,
            127,
            128,
            129,
            130,
            133,
            135,
            139,
            142,
            147,
            151,
            154,
            158,
            162,
            165,
            168,
            172,
            175,
            177,
            180,
            183,
            186,
            188,
            190,
            193,
            195,
            197,
            200,
            202,
            204,
            206,
            208,
            210,
            212,
            214,
            215,
            217,
            219,
            221,
            223,
            225,
            227,
            229,
            231,
            233
        ],
        "UAM": [
            130,
            128,
            127,
            126,
            126,
            127,
            128,
            129,
            131,
            134,
            136,
            140,
            143,
            147,
            150,
            153,
            156,
            159,
            162,
            164,
            166,
            168,
            170,
            172,
            174,
            175,
            177,
            178,
            179,
            180,
            181,
            182,
            183,
            184,
            184,
            185,
            185,
            186,
            186,
            187,
            187,
            187,
            188
        ]
    },
    "COB": 12,
    "IOB": -0.781,
    "reason": "COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.45
}
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09943003670530701312
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 21min, IOB: 0.0980216218102011904
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 24min, IOB: 0.0484663485536822784
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14430383984096301056
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 35min, IOB: 0.18296758376655935488
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17072844326273978368
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.320103932879065088
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.193523060956804352
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.070021832285063424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.0674135214133413888
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.0666647017613930496
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.0561285316575070208
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 85min, IOB: 0.05514661385701833728
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05182129510133505024
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 116min, IOB: 0.03600764449895937024
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.015760606872738791424
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.0400491315270350848
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.03144546874040447488
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02815514563554372608
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02614561505991020032
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.0229931125376662656
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 183min, IOB: 0.02028836489514345216
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 192min, IOB: 0.016800136092173389824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.0153925889430656512
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02673937557555032064
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.01584143535941535744
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014159866996938569728
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 233min, IOB: 0.002706822690844124672
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.0026886178495092224
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.00267164048905383936
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004100353744649211904
  SMB-Basal IOB: 1.2613832346674302976U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2613832346674302976U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:30:04 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.133943411062336256 U
  Наш Basal IOB: 1.2613832346674302976 U
  Наш Total IOB: 3.3953266457297665536 U
  РАЗНИЦА: 4.1763266457297665536 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.05U, возраст: 24мин, остаток: 96.9%, IOB: 0.048U
  SMB: 0.15U, возраст: 25мин, остаток: 96.2%, IOB: 0.144U
  SMB: 0.2U, возраст: 35мин, остаток: 91.5%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.4%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 80.0%, IOB: 0.320U
  SMB: 0.25U, возраст: 55мин, остаток: 77.4%, IOB: 0.194U
  ... и еще 32 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.133943411062336256
  Custom Basal IOB: 1.2613832346674302976
  Custom Total IOB: 3.3953266457297665536
  Difference: 4.1763266457297665536
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3953266457297665536
  Difference: 4.1763266457297665536
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x13c646140, identifier = AF975C27-1624-F114-76E3-514F1731EFCE, name = DXCMNG, mtu = 23, state = connecting>, data = ["kCBAdvDataTimestamp": 780291007.83394, "kCBAdvDataLocalName": DXCMNG, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataManufacturerData": <d000d540 0004>, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x13e27b1e0>(
FEBC
)
, "kCBAdvDataIsConnectable": 1, "kCBAdvDataRxSecondaryPHY": 0]
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09941410417751650304
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 21min, IOB: 0.09799384295177029632
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 24min, IOB: 0.04844966499534706688
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 25min, IOB: 0.14424931284619239424
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 35min, IOB: 0.18287012978280026112
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17061483535425294336
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.3198622358653279232
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1933694304200237568
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.06995937101574473728
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.06735123784622055424
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.06660251272442548224
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05606941400140867584
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 86min, IOB: 0.0550879278108470272
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05176423123403638784
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 116min, IOB: 0.03596128673452866048
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.01573935384942450688
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.03998708032667181056
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.0313933194298899968
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02810700666301492736
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02609999347972147712
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.02295155403223862016
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 184min, IOB: 0.02025041487401012736
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 192min, IOB: 0.016767032777520336896
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.0153615122170430976
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.02668321386475720192
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015802701489655441408
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.0014121502772444737536
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 233min, IOB: 0.002699384163361596928
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.002681213632336044032
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002664268321829254144
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004084739095107271168
  SMB-Basal IOB: 1.2603798808000376832U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2603798808000376832U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:30:09 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.132304476254268928 U
  Наш Basal IOB: 1.2603798808000376832 U
  Наш Total IOB: 3.3926843570543066112 U
  РАЗНИЦА: 4.1736843570543066112 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.05U, возраст: 24мин, остаток: 96.9%, IOB: 0.048U
  SMB: 0.15U, возраст: 25мин, остаток: 96.2%, IOB: 0.144U
  SMB: 0.2U, возраст: 35мин, остаток: 91.4%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.3%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 80.0%, IOB: 0.320U
  SMB: 0.25U, возраст: 55мин, остаток: 77.3%, IOB: 0.193U
  ... и еще 32 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.132304476254268928
  Custom Basal IOB: 1.2603798808000376832
  Custom Total IOB: 3.3926843570543066112
  Difference: 4.1736843570543066112
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3926843570543066112
  Difference: 4.1736843570543066112
  Show Custom: true
Discovered peripheral from connectionEventDidOccur AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManager(_:didConnect:): <CBPeripheral: 0x13c646140, identifier = AF975C27-1624-F114-76E3-514F1731EFCE, name = DXCMNG, mtu = 23, state = connected>
didConnect to AF975C27-1624-F114-76E3-514F1731EFCE
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMNG")
Set notify true for <CBPeripheral: 0x13c646140, identifier = AF975C27-1624-F114-76E3-514F1731EFCE, name = DXCMNG, mtu = 23, state = connected>
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 15min, IOB: 0.09939797262471200768
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 21min, IOB: 0.09796590620644585472
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 24min, IOB: 0.04843291269728408576
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 26min, IOB: 0.14419459650630182912
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 35min, IOB: 0.1827725246670183424
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 44min, IOB: 0.17050115694012973056
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 52min, IOB: 0.3196204949852150784
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 55min, IOB: 0.1932157963175213568
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 65min, IOB: 0.06989692928061175808
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 69min, IOB: 0.06728897953516867584
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 70min, IOB: 0.06654035044991750144
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 84min, IOB: 0.05601033887679670272
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 86min, IOB: 0.0550292853151950848
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 90min, IOB: 0.05170721387470941184
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 116min, IOB: 0.03591498046321545216
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 124min, IOB: 0.01571812606961739776
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 150min, IOB: 0.03992511575736355328
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 163min, IOB: 0.03134124778791863296
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 168min, IOB: 0.02805894134294040064
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 172min, IOB: 0.02605444292350527488
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 178min, IOB: 0.0229100621378009344
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 184min, IOB: 0.02021252737066044672
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 192min, IOB: 0.016733986227044143104
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 195min, IOB: 0.01533048976193038336
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 201min, IOB: 0.0266271531320970496
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 220min, IOB: 0.015764045225214306304
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 231min, IOB: 0.001408322111923078144
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 233min, IOB: 0.00269196180480800768
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 233min, IOB: 0.002673825533362017792
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 233min, IOB: 0.002656912225377772544
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 258min, IOB: 0.004069167200263910912
  SMB-Basal IOB: 1.2593765608104921088U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2593765608104921088U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:30:14 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.1306657653520704 U
  Наш Basal IOB: 1.2593765608104921088 U
  Наш Total IOB: 3.3900423261625625088 U
  РАЗНИЦА: 4.1710423261625625088 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.05U, возраст: 24мин, остаток: 96.9%, IOB: 0.048U
  SMB: 0.15U, возраст: 26мин, остаток: 96.1%, IOB: 0.144U
  SMB: 0.2U, возраст: 35мин, остаток: 91.4%, IOB: 0.183U
  SMB: 0.2U, возраст: 44мин, остаток: 85.3%, IOB: 0.171U
  SMB: 0.4U, возраст: 52мин, остаток: 79.9%, IOB: 0.320U
  SMB: 0.25U, возраст: 55мин, остаток: 77.3%, IOB: 0.193U
  ... и еще 32 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.1306657653520704
  Custom Basal IOB: 1.2593765608104921088
  Custom Total IOB: 3.3900423261625625088
  Difference: 4.1710423261625625088
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3900423261625625088
  Difference: 4.1710423261625625088
  Show Custom: true