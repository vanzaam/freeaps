Skipping updateConnections until state is poweredOn
OmniBLE centralManager(_:willRestoreState:): {
    kCBRestoredPeripherals =     (
        "<CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>"
    );
}
Created device
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod peripheral was restored EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7)
centralManagerDidUpdateState(_:): 5
Re-connecting to known peripheral EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
Discovered service: <CBService: 0x109ddd800, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
centralManager(_:didConnect:): <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=false
Session already established.
Delegate configuration notified
Peripheral configuration completed
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -71
NightscoutManager.swift - subscribe() - 74 DEV: Network status: reachable by WiFi
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
HealthKitManager.swift - init(resolver:) - 95 DEV: HealthKitManager did create
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d2048abc5d6c9f3d95cc23
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d2048abc5d6c9f3d95cc23
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d20c0abc5d6c9f3d9c22bb
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d20c0abc5d6c9f3d9c22bb
Restoring peripheral from state: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
API MISUSE: <CBCentralManager: 0x109e8c600> can only accept this command while in the powered on state
assertConfiguration
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
Unable to run command: central state = Optional("unknown"), peripheral state = CBPeripheralState(rawValue: 1)
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:35:35.202Z
Error applying peripheral configuration: notReady
Restoring peripheral from state: E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
API MISUSE: <CBCentralManager: 0x109e8c600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
API MISUSE: <CBCentralManager: 0x109e8c600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
API MISUSE: <CBCentralManager: 0x109e8c600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManagerDidUpdateState(_:): 5
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:35:35.206Z
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 20:07:57 +0000, 0.5)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 21:06:37 +0000, 0.2)
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
UserNotificationsManager.swift - requestNotificationPermissionsIfNeeded() - 288 DEV: UNUserNotificationCenter.authorizationStatus: UNAuthorizationStatus(rawValue: 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
Application context data is nil
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 228 DEV: WCSession is activated: true
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 237 DEV: WCSession activated successfully
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 239 DEV: Watch is paired
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 241 DEV: Watch app is installed
Application context data is nil
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
App is being debugged, do not track this hang
Hang detected: 0.51s (debugger attached, not reporting)
SMB-Basal Manager initialized: isEnabled=true
SMB-Basal Manager starting...
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09999748015377563648
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.09795800207708966912
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 26min, IOB: 0.0958411527703433216
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04721004307608062976
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.14026994813987584
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17614031347048558592
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16298527638725185536
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 57min, IOB: 0.3038473684717202432
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.183239530734436352
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06588375377481401344
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 74min, IOB: 0.06329902467140204544
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 75min, IOB: 0.0625596074944500736
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05226113183114363904
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05131017006639603712
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04809941425455020032
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 121min, IOB: 0.03301215019260710912
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.01439066297002682368
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.03607600362596875264
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 168min, IOB: 0.02811639603867226112
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02508612830226555392
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 177min, IOB: 0.02323962071185663488
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 183min, IOB: 0.02034988740954025216
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.017878152324418627584
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 197min, IOB: 0.014702366828626870272
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.01342528406069134336
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02319009692435044864
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013410120761431445504
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.001176364719273976832
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.00224254564082571008
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 238min, IOB: 0.002226532013406733824
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 238min, IOB: 0.002211601430609199616
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 263min, IOB: 0.003144156780557283328
  SMB-Basal IOB: 1.291867725438268416U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.291867725438268416U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:36 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.02478028810894464 U
  Наш Basal IOB: 1.291867725438268416 U
  Наш Total IOB: 3.316648013547213056 U
  РАЗНИЦА: 4.097648013547213056 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 98.0%, IOB: 0.098U
  SMB: 0.1U, возраст: 26мин, остаток: 95.8%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.4%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.5%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 88.1%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.5%, IOB: 0.163U
  SMB: 0.4U, возраст: 57мин, остаток: 76.0%, IOB: 0.304U
  SMB: 0.25U, возраст: 61мин, остаток: 73.3%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.02478028810894464
  Custom Basal IOB: 1.291867725438268416
  Custom Total IOB: 3.316648013547213056
  Difference: 4.097648013547213056
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.316648013547213056U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.316648013547213, calculationTime=1758598536.14888
SMB-Basal: Middleware installed successfully
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.316648013547213U
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09999622885943871488
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.09792972641848631296
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 26min, IOB: 0.09580332459915896832
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04718890632925902848
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.1402030091466899456
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17603203739234660352
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.1628654651863202816
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 57min, IOB: 0.303598916572167168
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18308308309163196416
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06582142179531439104
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 74min, IOB: 0.063237221145999104
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 75min, IOB: 0.06249799166721588224
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05220359865895499776
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05125313788130444288
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04804421197265006592
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 121min, IOB: 0.03296814154991972352
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014370587086862327808
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.03601818371816974336
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 168min, IOB: 0.02806810293543200256
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02504167004717022208
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 177min, IOB: 0.023197563122054656
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 183min, IOB: 0.02031169406467807744
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.01784338023471676416
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 197min, IOB: 0.01467217429840497664
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013397001052037111808
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02313916473702124544
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.01337549098591664128
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.001172970517339106304
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.00223597450679083904
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 238min, IOB: 0.002219992683281279744
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002205091806783887872
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 263min, IOB: 0.00313091597154997248
  SMB-Basal IOB: 1.29086689161655296U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.29086689161655296U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:41 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.023126380035065856 U
  Наш Basal IOB: 1.29086689161655296 U
  Наш Total IOB: 3.313993271651618816 U
  РАЗНИЦА: 4.094993271651618816 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.9%, IOB: 0.098U
  SMB: 0.1U, возраст: 26мин, остаток: 95.8%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.4%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.5%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 88.0%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.4%, IOB: 0.163U
  SMB: 0.4U, возраст: 57мин, остаток: 75.9%, IOB: 0.304U
  SMB: 0.25U, возраст: 61мин, остаток: 73.2%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.023126380035065856
  Custom Basal IOB: 1.29086689161655296
  Custom Total IOB: 3.313993271651618816
  Difference: 4.094993271651618816
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.313993271651618816
  Difference: 4.094993271651618816
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 24 min, isZero: true
SMB-Basal: Settings changed - smbBasalEnabled=false, current isEnabled=true
SMB-Basal: Disabling and stopping SMB-basal system
SMB-Basal: Middleware removed
SMB-Basal: Settings changed - smbBasalEnabled=true, current isEnabled=false
SMB-Basal: Enabling and starting SMB-basal system
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.099995547002890752
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.09791623848602968064
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 26min, IOB: 0.09578531116675211264
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04717884681052952576
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.1401711593296555008
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17598056391928748032
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16280853589306118144
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 57min, IOB: 0.3034808920895830016
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.1830087712131262464
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06579182045666448384
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 74min, IOB: 0.06320787247140711424
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 75min, IOB: 0.06246873258284679168
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.0521762833581443072
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05122606083973487616
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04801800497477891072
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 121min, IOB: 0.032947252878924672
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014361058597769576448
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.03599074513969147392
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 168min, IOB: 0.02804518690978278912
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02502057437675259392
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 177min, IOB: 0.02317760698449740288
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 183min, IOB: 0.02029357212959309056
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.01782688217803686912
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 197min, IOB: 0.014657849821749805056
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.01338358285709489152
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02311500216885349888
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013359065120256421888
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011713607523153821696
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.002232858077319666176
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 238min, IOB: 0.002216891345595174144
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.00220200456549989376
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 263min, IOB: 0.003124639508299109888
  SMB-Basal IOB: 1.2903902012127029248U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2903902012127029248U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:43 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.022340774006525184 U
  Наш Basal IOB: 1.2903902012127029248 U
  Наш Total IOB: 3.3127309752192281088 U
  РАЗНИЦА: 4.0937309752192281088 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.9%, IOB: 0.098U
  SMB: 0.1U, возраст: 26мин, остаток: 95.8%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.4%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.4%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 88.0%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.4%, IOB: 0.163U
  SMB: 0.4U, возраст: 57мин, остаток: 75.9%, IOB: 0.303U
  SMB: 0.25U, возраст: 61мин, остаток: 73.2%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.022340774006525184
  Custom Basal IOB: 1.2903902012127029248
  Custom Total IOB: 3.3127309752192281088
  Difference: 4.0937309752192281088
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.3127309752192281088U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.3127309752192273, calculationTime=1758598543.560765
SMB-Basal: Middleware installed successfully
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.3127309752192273U
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09999472808103077888
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.0979012903600032768
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 26min, IOB: 0.09576537083636097024
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04716771540653518848
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.14013592186682159104
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.1759236489100044288
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16274560911865901056
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 57min, IOB: 0.303350455824095488
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18292664967965513728
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06575911275009728512
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 74min, IOB: 0.06317544521626609664
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 75min, IOB: 0.06243640465804420096
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05214610689039975424
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05119614788948128768
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04798905413802281984
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 121min, IOB: 0.03292418033613407232
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014350534307855296512
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0359604420988436224
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 168min, IOB: 0.028019879741624704
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02499727798886278144
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 177min, IOB: 0.02315556930954480128
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02027356045059843584
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.01780866413757667328
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 197min, IOB: 0.01464203252687700992
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013368766540663171072
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02308832269763422208
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013340930292631990272
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011695836552097558528
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.002229417742910744064
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 238min, IOB: 0.002213467677858272
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.00219859646517054336
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 263min, IOB: 0.003117713048037185536
  SMB-Basal IOB: 1.2898609342238584832U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2898609342238584832U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:46 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.02147260064351104 U
  Наш Basal IOB: 1.2898609342238584832 U
  Наш Total IOB: 3.3113335348673695232 U
  РАЗНИЦА: 4.0923335348673695232 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.9%, IOB: 0.098U
  SMB: 0.1U, возраст: 26мин, остаток: 95.8%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.3%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.4%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 88.0%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.4%, IOB: 0.163U
  SMB: 0.4U, возраст: 57мин, остаток: 75.8%, IOB: 0.303U
  SMB: 0.25U, возраст: 61мин, остаток: 73.2%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.02147260064351104
  Custom Basal IOB: 1.2898609342238584832
  Custom Total IOB: 3.3113335348673695232
  Difference: 4.0923335348673695232
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3113335348673695232
  Difference: 4.0923335348673695232
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 24 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09999299375208153088
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.0978729250529122304
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 26min, IOB: 0.09572759863002585088
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04714664155252250624
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.14006922807531229184
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17581602136455000064
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16262667269645697024
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 57min, IOB: 0.3031039843529719808
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18277148823264219136
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06569732734113168384
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 74min, IOB: 0.06311419322526664704
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 75min, IOB: 0.06237534127196055552
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05208911820515132416
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.051139657723471104
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04793438361548137472
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 121min, IOB: 0.0328806193344493056
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014330665531719294976
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0359032418957781248
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02797211317311204864
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02495330809284834304
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02311397599192571392
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02023579230593036288
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.017774282347645724672
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 197min, IOB: 0.014612183125351952384
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013340806835659610112
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.0230379782809249536
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013306715555310999552
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011662312575508273152
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.00222292785859536896
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002207009251862112768
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002192167422606505984
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 263min, IOB: 0.003104653615394160128
  SMB-Basal IOB: 1.288864506958355456U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.288864506958355456U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:51 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.019832246968603136 U
  Наш Basal IOB: 1.288864506958355456 U
  Наш Total IOB: 3.308696753926958592 U
  РАЗНИЦА: 4.089696753926958592 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.9%, IOB: 0.098U
  SMB: 0.1U, возраст: 26мин, остаток: 95.7%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.3%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.4%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 87.9%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.3%, IOB: 0.163U
  SMB: 0.4U, возраст: 57мин, остаток: 75.8%, IOB: 0.303U
  SMB: 0.25U, возраст: 61мин, остаток: 73.1%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.019832246968603136
  Custom Basal IOB: 1.288864506958355456
  Custom Total IOB: 3.308696753926958592
  Difference: 4.089696753926958592
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.308696753926958592
  Difference: 4.089696753926958592
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.099990998772506112
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.097844173249768448
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09568939877940273152
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 29min, IOB: 0.04712534482541138944
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.1400018518535646208
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17570741803262502912
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16250673642928105472
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.30285552410821504
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18261509437418647552
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06563506826298308608
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.0630524764606734336
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06231381583647223808
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05203171265328441344
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05108275547681593344
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04787931786021091328
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.0328367553003447552
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.01431065999408699392
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0358456596236235264
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02792403203497161728
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02490905045634746368
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02307211163338036736
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02019777984811782656
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.017739679751898339328
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.01458214415272712192
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013312670503875682304
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02298731862588163584
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013272294321953200128
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.001162859193022331904
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.002216400060928713984
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002200513120275572224
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002185700868474128384
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.0030915267786869376
  SMB-Basal IOB: 1.2878591733001039872U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2878591733001039872U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:35:56 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.018178843243996416 U
  Наш Basal IOB: 1.2878591733001039872 U
  Наш Total IOB: 3.3060380165441004032 U
  РАЗНИЦА: 4.0870380165441004032 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.8%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.7%, IOB: 0.096U
  SMB: 0.05U, возраст: 29мин, остаток: 94.3%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.3%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 87.9%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.3%, IOB: 0.163U
  SMB: 0.4U, возраст: 58мин, остаток: 75.7%, IOB: 0.303U
  SMB: 0.25U, возраст: 61мин, остаток: 73.0%, IOB: 0.183U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.018178843243996416
  Custom Basal IOB: 1.2878591733001039872
  Custom Total IOB: 3.3060380165441004032
  Difference: 4.0870380165441004032
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3060380165441004032
  Difference: 4.0870380165441004032
  Show Custom: true
App is being debugged, do not track this hang
Hang detected: 0.27s (debugger attached, not reporting)
-[WCSession onqueue_handleMessageCompletionWithError:withMessageID:] 6FC0A47C-5E12-42AE-BBD4-5CBD55114FCD due to WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession _onqueue_notifyOfMessageError:messageID:withErrorHandler:] 6FC0A47C-5E12-42AE-BBD4-5CBD55114FCD errorHandler: YES with WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession onqueue_handleMessageCompletionWithError:withMessageID:] E984DEDB-6695-4D84-82F8-873F4FF4931F due to WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession _onqueue_notifyOfMessageError:messageID:withErrorHandler:] E984DEDB-6695-4D84-82F8-873F4FF4931F errorHandler: YES with WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
WatchManager.swift - sendState() - 121 WARN: errorWithInnerError("Cannot send message to watch", Error Domain=WCErrorDomain Code=7017 "Превышен лимит времени на передачу кода." UserInfo={NSLocalizedDescription=Превышен лимит времени на передачу кода., NSUnderlyingError=0x12f7d57d0 {Error Domain=com.apple.identityservices.error Code=23 "This message was a non-waking message and the destination device for this message did not wake before the timeout fired" UserInfo={NSLocalizedDescription=This message was a non-waking message and the destination device for this message did not wake before the timeout fired, NSUnderlyingError=0x12f7d5b00 {Error Domain=com.apple.ids.idssenderrordomain Code=34 "(null)"}}}})
WatchManager.swift - sendState() - 126 DEV: Updated application context after sendMessageData failure
WatchManager.swift - sendState() - 121 WARN: errorWithInnerError("Cannot send message to watch", Error Domain=WCErrorDomain Code=7017 "Превышен лимит времени на передачу кода." UserInfo={NSLocalizedDescription=Превышен лимит времени на передачу кода., NSUnderlyingError=0x12f7d4ea0 {Error Domain=com.apple.identityservices.error Code=23 "This message was a non-waking message and the destination device for this message did not wake before the timeout fired" UserInfo={NSLocalizedDescription=This message was a non-waking message and the destination device for this message did not wake before the timeout fired, NSUnderlyingError=0x12f7d4420 {Error Domain=com.apple.ids.idssenderrordomain Code=34 "(null)"}}}})
WatchManager.swift - sendState() - 126 DEV: Updated application context after sendMessageData failure
[u 23EFC09E-EB1D-4372-8AEB-E82F84085C0E:m (null)] [com.swiftkey.SwiftKeyApp.Keyboard(4.2.5)] RB query for the extension process state failed with error: Error Domain=RBSServiceErrorDomain Code=1 "Client not entitled" UserInfo={RBSEntitlement=com.apple.runningboard.process-state, NSLocalizedFailureReason=Client not entitled, RBSPermanent=false}
App is being debugged, do not track this hang
Hang detected: 1.25s (debugger attached, not reporting)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09998874363099762688
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.09781509950812370944
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09565085852162152448
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.0471038741259324928
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.13993394829533632512
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 40min, IOB: 0.17559809103015090176
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16238608007050113024
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3026056560383487488
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18245783411602024448
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.0655724815119800832
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06299043972886093824
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06225197273104444416
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.0519740251908721152
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 91min, IOB: 0.05102557494181494784
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04782398640751781888
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03279269162246957056
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014290564873662599168
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0357878312802714368
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.027875749964000512
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02486460971169475584
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02303007522837600768
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02015961299507503616
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 189min, IOB: 0.01770493823064762368
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.01455198672817012736
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013284424176643305472
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02293646375253582336
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013237748280038498304
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011594754742776999936
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 238min, IOB: 0.002209849864045699584
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002193994722406733312
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002179212172189426432
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003078363895791412224
  SMB-Basal IOB: 1.2868501247279310848U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2868501247279310848U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:01 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.01651625882141824 U
  Наш Basal IOB: 1.2868501247279310848 U
  Наш Total IOB: 3.3033663835493493248 U
  РАЗНИЦА: 4.0843663835493493248 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.8%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.7%, IOB: 0.096U
  SMB: 0.05U, возраст: 30мин, остаток: 94.2%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.3%, IOB: 0.140U
  SMB: 0.2U, возраст: 40мин, остаток: 87.8%, IOB: 0.176U
  SMB: 0.2U, возраст: 50мин, остаток: 81.2%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.7%, IOB: 0.303U
  SMB: 0.25U, возраст: 61мин, остаток: 73.0%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.01651625882141824
  Custom Basal IOB: 1.2868501247279310848
  Custom Total IOB: 3.3033663835493493248
  Difference: 4.0843663835493493248
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3033663835493493248
  Difference: 4.0843663835493493248
  Show Custom: true
App is being debugged, do not track this hang
Hang detected: 0.27s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.38s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.84s (debugger attached, not reporting)
AddGlucoseStateModel.swift - add() - 19 DEV: AddGlucose: start units=mmol/L input=7.3
AddGlucoseStateModel.swift - add() - 30 DEV: AddGlucose: converted to mg/dL=132 at 2025-09-23 03:36:00 +0000
AddGlucoseStateModel.swift - add() - 55 DEV: AddGlucose: stored locally id=E3B7468E-46DF-4C40-BDBB-864F42BEDAF7
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/entries.json
AddGlucoseStateModel.swift - add() - 58 DEV: AddGlucose: requested NS upload
AddGlucoseStateModel.swift - add() - 60 DEV: AddGlucose: requested HealthKit save
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09998628504900601856
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.097786371669148672
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09561286134327750656
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04708272131502391296
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.139867072489191424
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17549054148084482048
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16226746228869820416
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3023600913465760768
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18230330152602888192
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06551099710488380416
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06292950037885151232
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.0621912248538699264
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05191737347422278656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.0509694221721008128
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04776965300175977472
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03274943444715103232
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.01427083899057031168
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0357310769862006272
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02782836906395707392
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02482100024186948608
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02298882625619909888
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02012216286703751936
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017670850691797837824
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014522399093315764224
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.01325671246213970944
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02288657416111487744
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.013203865608663001088
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.001156157290572030976
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002203426687564724736
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002187602752009820672
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002172849349520378368
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003065465053124860928
  SMB-Basal IOB: 1.2858556062466371584U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2858556062466371584U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:06 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.014882491496291584 U
  Наш Basal IOB: 1.2858556062466371584 U
  Наш Total IOB: 3.3007380977429287424 U
  РАЗНИЦА: 4.0817380977429287424 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.8%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.6%, IOB: 0.096U
  SMB: 0.05U, возраст: 30мин, остаток: 94.2%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.2%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.7%, IOB: 0.175U
  SMB: 0.2U, возраст: 50мин, остаток: 81.1%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.6%, IOB: 0.302U
  SMB: 0.25U, возраст: 61мин, остаток: 72.9%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.014882491496291584
  Custom Basal IOB: 1.2858556062466371584
  Custom Total IOB: 3.3007380977429287424
  Difference: 4.0817380977429287424
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.3007380977429287424
  Difference: 4.0817380977429287424
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 10min, IOB: 0.09998356548564441088
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 21min, IOB: 0.09775726832988096512
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09557445153193187328
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04706135407284105216
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 31min, IOB: 0.13979954106656305152
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17538205995063689216
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16214789340693827584
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3021126392552869888
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.18214760042808655872
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06544906455016552448
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.0628681215778684416
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06213004017771979776
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05186032852162041856
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05091288075097007104
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04771494705449268224
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03270589237753592832
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014250984626566742016
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0356739645263847424
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02778069358211725312
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.0247771214419041792
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02294732366552497664
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.0200844842574441216
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017636556769591259136
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014492634422619011072
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 201min, IOB: 0.013228835868863516672
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.022836390503894848
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.01316979088454734848
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011528208592322463744
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002196968346377780736
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002181175811518387456
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002166451738496467456
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003052504402935962624
  SMB-Basal IOB: 1.284855068548214784U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.284855068548214784U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:11 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.013236350246202624 U
  Наш Basal IOB: 1.284855068548214784 U
  Наш Total IOB: 3.298091418794417408 U
  РАЗНИЦА: 4.079091418794417408 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 10мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 21мин, остаток: 97.8%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.6%, IOB: 0.096U
  SMB: 0.05U, возраст: 30мин, остаток: 94.1%, IOB: 0.047U
  SMB: 0.15U, возраст: 31мин, остаток: 93.2%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.7%, IOB: 0.175U
  SMB: 0.2U, возраст: 50мин, остаток: 81.1%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.5%, IOB: 0.302U
  SMB: 0.25U, возраст: 61мин, остаток: 72.9%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.013236350246202624
  Custom Basal IOB: 1.284855068548214784
  Custom Total IOB: 3.298091418794417408
  Difference: 4.079091418794417408
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.298091418794417408
  Difference: 4.079091418794417408
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09998059864986054656
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.0977279615023970304
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09553585697303001088
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04703989932955265024
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13973175542320406528
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17527329250593138688
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.16202808632133300224
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3018647759784700928
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 61min, IOB: 0.1819916598818592768
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06538705357108344832
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06280666979283132416
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06206878402379163648
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05180323108495369216
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.050856288434328064
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 96min, IOB: 0.04766019539432188928
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.0326623256703209216
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014231120469186152448
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0356168354383160576
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02773300867067184128
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02473323577555312128
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.0229058157192243968
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02004680257441400064
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017602261641292107776
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014462870818821629952
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.0132009612123578368
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02278621311467077632
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 226min, IOB: 0.01313572812132765696
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011494861626714488832
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002190513522315074816
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002174752394961787392
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002160057657733372416
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003039559673237324288
  SMB-Basal IOB: 1.283852879858782208U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.283852879858782208U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:16 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.011587657504023296 U
  Наш Basal IOB: 1.283852879858782208 U
  Наш Total IOB: 3.295440537362805504 U
  РАЗНИЦА: 4.076440537362805504 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.5%, IOB: 0.096U
  SMB: 0.05U, возраст: 30мин, остаток: 94.1%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 93.2%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.6%, IOB: 0.175U
  SMB: 0.2U, возраст: 50мин, остаток: 81.0%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.5%, IOB: 0.302U
  SMB: 0.25U, возраст: 61мин, остаток: 72.8%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.011587657504023296
  Custom Basal IOB: 1.283852879858782208
  Custom Total IOB: 3.295440537362805504
  Difference: 4.076440537362805504
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.295440537362805504
  Difference: 4.076440537362805504
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09997739075464050688
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.0976985091351853056
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09549715385266188288
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04701839941388768256
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13966384926164529152
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17516445349768400896
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 50min, IOB: 0.1619082770231277568
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3016169896251967488
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.181835786947372544
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 71min, IOB: 0.06532508624773541888
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.0627452659960759296
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06200757697746215936
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05174619354284167168
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05079975660505407488
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.0476055057765423104
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03261882005259403264
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.014211285603787599872
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 156min, IOB: 0.0355598021184123904
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.0276854081412235264
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 174min, IOB: 0.02468942957847373312
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02286438407432807936
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.02000919194624819712
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017568032771850878976
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.01443316683096429568
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013173143325194063872
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02273614069612306432
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.013101744318359287808
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 237min, IOB: 0.0011461597597277837312
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002184074910945776384
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002168345136123494912
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002153679683304410368
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.0030266563199277568
  SMB-Basal IOB: 1.2828509494261235712U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2828509494261235712U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:21 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.009939659924701184 U
  Наш Basal IOB: 1.2828509494261235712 U
  Наш Total IOB: 3.2927906093508247552 U
  РАЗНИЦА: 4.0737906093508247552 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.5%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 94.0%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 93.1%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.6%, IOB: 0.175U
  SMB: 0.2U, возраст: 50мин, остаток: 81.0%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.4%, IOB: 0.302U
  SMB: 0.25U, возраст: 62мин, остаток: 72.7%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.009939659924701184
  Custom Basal IOB: 1.2828509494261235712
  Custom Total IOB: 3.2927906093508247552
  Difference: 4.0737906093508247552
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2927906093508247552
  Difference: 4.0737906093508247552
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x109e15420, identifier = B9AB9AF1-6354-C8ED-24A7-00FD69122AAA, name = DXCMzM, mtu = 23, state = connecting>, data = ["kCBAdvDataLocalName": DXCMzM, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataManufacturerData": <d000cc50 0004cc50 0004>, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x13898db00>(
FEBC,
FEBC
)
, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataIsConnectable": 1, "kCBAdvDataTimestamp": 780291382.332624]
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
assertConfiguration
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
Unable to run command: central state = Optional("poweredOff"), peripheral state = CBPeripheralState(rawValue: 1)
Error applying peripheral configuration: notReady
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09997394011348109312
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09766888890028623872
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09545831255635550208
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.0469968378247314432
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13959577039093409792
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17505545887372187648
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16178837273631330304
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3013690880515224576
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18167986069140772864
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06526311444852020224
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06268386247840551936
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06194637147829426176
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 90min, IOB: 0.05168917152943376384
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05074324128709121024
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04755083564700176384
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03257534163621899264
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 130min, IOB: 0.0141914645759514112
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.035502820095738624
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02763785486575629312
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.0246456686773620224
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02282299640692275712
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.01997162302543811072
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017533843448461201408
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014403499272214831104
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013145360490496796672
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02268613415087452672
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.013067812922118402048
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.001142839049977679872
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002177647478502898944
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002161949025693133312
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.002147312828742688
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003013784234963834368
  SMB-Basal IOB: 1.2818485495476815872U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2818485495476815872U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:26 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.008291079192934912 U
  Наш Basal IOB: 1.2818485495476815872 U
  Наш Total IOB: 3.2901396287406164992 U
  РАЗНИЦА: 4.0711396287406164992 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.5%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 94.0%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 93.1%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.5%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.9%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.3%, IOB: 0.301U
  SMB: 0.25U, возраст: 62мин, остаток: 72.7%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.008291079192934912
  Custom Basal IOB: 1.2818485495476815872
  Custom Total IOB: 3.2901396287406164992
  Difference: 4.0711396287406164992
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2901396287406164992
  Difference: 4.0711396287406164992
  Show Custom: true
centralManager(_:didFailToConnect:error:): Optional(Error Domain=CBErrorDomain Code=14 "Peer removed pairing information" UserInfo={NSLocalizedDescription=Peer removed pairing information})
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
Scanning for peripherals and listening for connection events
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09997024824084563968
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.097639108945247232
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09541934356072056832
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.0469752203398633472
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13952753699827939328
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17494633744687321088
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16166840496620253184
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3011211361916026368
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18152392190886320128
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06520115434570379264
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06262247525220030464
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06188518348391960576
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05163217987743643648
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05068675717865680896
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04749619921564612608
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03253190169508647936
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014171662522060632064
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03544590411235655168
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.0275903611382936064
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02460196438237409792
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02278166341168204288
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.0199341055166269568
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017499702499928496128
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014373875800039919616
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013117619877673680896
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 207min, IOB: 0.02263620637854343168
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.013033942673113458688
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011395248879433281536
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002171232878722584064
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002155565709311491328
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.0021409587321276736
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.003000946717087727616
  SMB-Basal IOB: 1.2808460189632167936U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2808460189632167936U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:31 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.006642346885033216 U
  Наш Basal IOB: 1.2808460189632167936 U
  Наш Total IOB: 3.2874883658482500096 U
  РАЗНИЦА: 4.0684883658482500096 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.4%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 94.0%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 93.0%, IOB: 0.140U
  SMB: 0.2U, возраст: 41мин, остаток: 87.5%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.8%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.3%, IOB: 0.301U
  SMB: 0.25U, возраст: 62мин, остаток: 72.6%, IOB: 0.182U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.006642346885033216
  Custom Basal IOB: 1.2808460189632167936
  Custom Total IOB: 3.2874883658482500096
  Difference: 4.0684883658482500096
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2874883658482500096
  Difference: 4.0684883658482500096
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:36:35.220Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:36:35.225Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:28:54 +0000
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09996631371032539136
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.097609153957462528
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09538022665516398592
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04695353571597412352
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13945911354876735488
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.1748370321331562496
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16154831079454457856
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3008730038348883968
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18136788866946994176
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.065139173350859776
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06256107202067354624
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.0618239807997753856
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05157518857175289856
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05063027452972412928
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.0474415676986574848
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03248847732162234368
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014151868997121081344
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03538902412728626176
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02754290188414997504
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02455829361679693312
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02274036326233223168
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.0198966196058081536
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017465591893305278464
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.014344280764764416
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013089906830521532416
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02258633099724547584
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01300011566498820096
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011362155208657862656
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002164827718940543744
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.00214919181083317376
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 239min, IOB: 0.00213461403274332032
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.002988136966979926016
  SMB-Basal IOB: 1.2798428391421308928U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2798428391421308928U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:36 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.004992597007500544 U
  Наш Basal IOB: 1.2798428391421308928 U
  Наш Total IOB: 3.2848354361496314368 U
  РАЗНИЦА: 4.0658354361496314368 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.4%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 93.9%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 93.0%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.4%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.8%, IOB: 0.162U
  SMB: 0.4U, возраст: 58мин, остаток: 75.2%, IOB: 0.301U
  SMB: 0.25U, возраст: 62мин, остаток: 72.5%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.004992597007500544
  Custom Basal IOB: 1.2798428391421308928
  Custom Total IOB: 3.2848354361496314368
  Difference: 4.0658354361496314368
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2848354361496314368
  Difference: 4.0658354361496314368
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09996214467054190592
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09757907917822236672
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09534103364927336448
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04693182370071175168
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.1393906253733023744
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17472774266121023488
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.161428309358084096
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.300625143425165568
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18121204540718313472
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06507728438290071552
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06249976463143456768
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06176287490313760768
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.051518301363348224
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05057389616087902208
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04738704053312018432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.0324451475094808832
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.01413212000233992192
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.0353322835543021568
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02749556337375789056
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02451473575824577536
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.02269917102371808
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 184min, IOB: 0.01985923341929185792
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017431573615410921472
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.01431476794047366144
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013062271700530157568
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02253659861602566144
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01296639332737318912
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011329169567978258432
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002158443627037331456
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.002142838901314048512
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.00212829024856938624
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.0029753782125717888
  SMB-Basal IOB: 1.2788408853039611904U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2788408853039611904U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:41 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.003344837185756416 U
  Наш Basal IOB: 1.2788408853039611904 U
  Наш Total IOB: 3.2821857224897176064 U
  РАЗНИЦА: 4.0631857224897176064 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.3%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 93.9%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.9%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.4%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.7%, IOB: 0.161U
  SMB: 0.4U, возраст: 58мин, остаток: 75.2%, IOB: 0.301U
  SMB: 0.25U, возраст: 62мин, остаток: 72.5%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.003344837185756416
  Custom Basal IOB: 1.2788408853039611904
  Custom Total IOB: 3.2821857224897176064
  Difference: 4.0631857224897176064
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2821857224897176064
  Difference: 4.0631857224897176064
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09995773309283923968
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09754882103565350912
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09530168140953874432
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.0469100381869970432
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13932192695431204864
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.1746182363951995904
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.1613081449497811968
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.3003770265184179712
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18105605979314950144
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06501535540765308928
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.06243842227457073152
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06170173540958331904
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05146139682055824384
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05051750172277325824
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04733250130934624256
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03240181971481542656
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014112373353110622208
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03527556115712031744
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 169min, IOB: 0.02744824444662984704
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02447119772000205824
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 178min, IOB: 0.0226579986613298432
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01982186705157200384
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017397574954452379648
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.0142852742395697152
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013034655411334201344
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02248690291301773312
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01293270354537403392
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011296221403194044416
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.00215206694743110912
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 239min, IOB: 0.00213649339180939136
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.0021219738529025152
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.002962643140224986112
  SMB-Basal IOB: 1.277837984843539456U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.277837984843539456U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:46 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.00169555392139008 U
  Наш Basal IOB: 1.277837984843539456 U
  Наш Total IOB: 3.279533538764929536 U
  РАЗНИЦА: 4.060533538764929536 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.3%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 93.8%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.9%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.3%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.7%, IOB: 0.161U
  SMB: 0.4U, возраст: 58мин, остаток: 75.1%, IOB: 0.300U
  SMB: 0.25U, возраст: 62мин, остаток: 72.4%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.00169555392139008
  Custom Basal IOB: 1.277837984843539456
  Custom Total IOB: 3.279533538764929536
  Difference: 4.060533538764929536
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.279533538764929536
  Difference: 4.060533538764929536
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 23 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.09995308317263872
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09751840580797804544
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 27min, IOB: 0.09526220397863886848
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04688819799630348288
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.139253077607232
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.1745086076863372288
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16118792097907228672
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 58min, IOB: 0.300128866503346176
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18090006594906062848
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.0649534396468445184
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 75min, IOB: 0.0623770976601603584
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 76min, IOB: 0.06164061485286084608
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05140452381624676352
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05046113964844336128
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04727799686171094016
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 122min, IOB: 0.03235853112741511168
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014092645996737794048
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03521890560271687168
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.0274009856968151296
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02442771685068536832
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02261688149327704832
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01978455255420067328
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017363625071802161152
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 198min, IOB: 0.01425582495755395072
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.013007081647461404672
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.0224372865064030464
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01289907520493196288
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.001126333896045307904
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.00214570314668097792
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002130160722140928512
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002115670260590929408
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 264min, IOB: 0.00294994266174404352
  SMB-Basal IOB: 1.2768347304282157056U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2768347304282157056U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:51 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 2.000046165564077568 U
  Наш Basal IOB: 1.2768347304282157056 U
  Наш Total IOB: 3.2768808959922932736 U
  РАЗНИЦА: 4.0578808959922932736 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 27мин, остаток: 95.3%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 93.8%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.8%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.3%, IOB: 0.175U
  SMB: 0.2U, возраст: 51мин, остаток: 80.6%, IOB: 0.161U
  SMB: 0.4U, возраст: 58мин, остаток: 75.0%, IOB: 0.300U
  SMB: 0.25U, возраст: 62мин, остаток: 72.4%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 2.000046165564077568
  Custom Basal IOB: 1.2768347304282157056
  Custom Total IOB: 3.2768808959922932736
  Difference: 4.0578808959922932736
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2768808959922932736
  Difference: 4.0578808959922932736
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.099948193797405696
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09748782281933963264
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09522258730928125952
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 30min, IOB: 0.04686629532193343488
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13918405267027951616
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.1743988169811417088
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16106759389014796288
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2998805732834355712
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18074400719516483584
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06489151456463120384
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06231576845659363328
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06157949097273383936
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05134766160488892416
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.0504047893762004992
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.047223507298301696
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03231526592316370944
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.01407293071890169856
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03516229614937925632
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02735376981464363008
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02438427722116460544
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02257580445438944
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01974727625224548352
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017329711522936121344
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014226409296198098944
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.012979540296896937984
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02238773119622051328
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.012865495959206670336
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011230510158687543296
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.00213934988648991616
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002123838565416536064
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.00210937715539504256
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002937272098300613632
  SMB-Basal IOB: 1.275830981695960064U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.275830981695960064U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:36:56 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 1.99839607306829696 U
  Наш Basal IOB: 1.275830981695960064 U
  Наш Total IOB: 3.274227054764257024 U
  РАЗНИЦА: 4.055227054764257024 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.2%, IOB: 0.095U
  SMB: 0.05U, возраст: 30мин, остаток: 93.7%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.8%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.2%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.5%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 75.0%, IOB: 0.300U
  SMB: 0.25U, возраст: 62мин, остаток: 72.3%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 1.99839607306829696
  Custom Basal IOB: 1.275830981695960064
  Custom Total IOB: 3.274227054764257024
  Difference: 4.055227054764257024
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.274227054764257024
  Difference: 4.055227054764257024
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.0999430734743243776
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09745711973329405952
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09518289281849499648
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04684436405881406464
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.13911495887241936896
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 41min, IOB: 0.17428903355401486336
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16094734889334347776
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2996325287082117632
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18058812345617061888
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.0648296752970195456
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.0622545288654090752
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06151845765025118208
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05129089746553181184
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 92min, IOB: 0.05034853739484176384
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04716911623805714432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03227209045055246336
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014053257748093968384
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03510581955104031744
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02730666914255073792
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02434094538169265664
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02253483047143593984
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.0197100952438930432
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.017295886249708548096
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014197072301304625152
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.012952073532088205312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.0223383128544082048
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.012832017194920730624
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011197785218246115328
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 239min, IOB: 0.002133016885347793664
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.0021175365924717696
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002103104163640101376
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.00292465080410808576
  SMB-Basal IOB: 1.2738308984200972288U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2738308984200972288U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:01 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 1.996747813569279488 U
  Наш Basal IOB: 1.2738308984200972288 U
  Наш Total IOB: 3.2705787119893767168 U
  РАЗНИЦА: 4.0515787119893767168 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.2%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.7%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.7%, IOB: 0.139U
  SMB: 0.2U, возраст: 41мин, остаток: 87.1%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.5%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 74.9%, IOB: 0.300U
  SMB: 0.25U, возраст: 62мин, остаток: 72.2%, IOB: 0.181U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 1.996747813569279488
  Custom Basal IOB: 1.2738308984200972288
  Custom Total IOB: 3.2705787119893767168
  Difference: 4.0515787119893767168
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2705787119893767168
  Difference: 4.0515787119893767168
  Show Custom: true
DeviceDataManager.swift - updateUpdateFinished(_:) - 235 WARN: error("Loop recommendation time out or got error. Trying to loop right now.")
APSManager.swift - loop() - 162 DEV: Starting loop
APSManager.swift - runCustomPredictionService() - 198 DEV: 🚀 Starting Custom Prediction Service...
APSManager.swift - determineBasal() - 275 DEV: Start determine basal
OpenAPS.swift - makeProfiles(useAutotune:) - 228 DEV: Start makeProfiles
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.0999386824875757568
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09743173444222998528
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.0951501312744525824
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04682627401792871424
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.1390579825687650304
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17419859080647323648
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.1608483429551750144
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2994283558500634112
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18045982492542234624
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06477879135199240192
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.0622041418170512384
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06146824124815321088
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05124420396308407296
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.05030226601178488832
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04712437818629676032
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03223658612881000448
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014037081210259847168
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03505938892938517504
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02726794996649245696
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02430532572398968832
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02250114986524140288
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01967953379043423744
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 190min, IOB: 0.01726808427271575552
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.01417296094343556096
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.0129294999687688192
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02229770045808968192
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.012804509822069481472
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011170901432000509952
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002127814396262638336
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002112359610632297216
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002097951006243470592
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002914289201573527552
  SMB-Basal IOB: 1.273004923849049088U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.273004923849049088U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:05 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 1.995391217344052736 U
  Наш Basal IOB: 1.273004923849049088 U
  Наш Total IOB: 3.268396141193101824 U
  РАЗНИЦА: 4.049396141193101824 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.1%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.7%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.7%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 87.1%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.4%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 74.9%, IOB: 0.299U
  SMB: 0.25U, возраст: 62мин, остаток: 72.2%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 1.995391217344052736
  Custom Basal IOB: 1.273004923849049088
  Custom Total IOB: 3.268396141193101824
  Difference: 4.049396141193101824
CustomPredictionService.swift - generateCustomIOBData() - 120 DEV: 🎯 Custom IOB Data Generated:
CustomPredictionService.swift - generateCustomIOBData() - 121 DEV:   Total IOB: 3.268396141193101824U
CustomPredictionService.swift - generateCustomIOBData() - 122 DEV:   Basal IOB: 1.273004923849049088U
CustomPredictionService.swift - generateCustomIOBData() - 123 DEV:   Bolus IOB: 1.995391217344052736U
CustomPredictionService.swift - generateCustomIOBData() - 124 DEV:   Activity: 0.00817099035298275456
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 63 DEV: 🚀 Calling oref0 with custom IOB data...
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 139 DEV: 🔧 callOref0WithCustomIOB started
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 142 DEV: 🔧 JavaScript context acquired, loading scripts...
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 151 DEV: 🔧 Scripts loaded, calling oref0...
JavaScriptWorker.swift - createContext() - 19 WARN: error("JavaScript Error: SyntaxError: Unexpected token \',\'")
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 170 DEV: 🔧 oref0 call completed, result: undefined...
CustomPredictionService.swift - parseOref0Result(_:) - 180 DEV: 🔧 parseOref0Result: parsing JSON length 9
CustomPredictionService.swift - parseOref0Result(_:) - 188 DEV: ❌ parseOref0Result: Failed to parse JSON
CustomPredictionService.swift - parseOref0Result(_:) - 189 DEV: Raw JSON: undefined
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 174 DEV: 🔧 Parsing result: FAILED
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 82 DEV: ❌ Custom Prediction Service: oref0 возвратил nil!
APSManager.swift - runCustomPredictionService() - 204 DEV: ❌ Custom Prediction Service returned nil
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:30:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
App is being debugged, do not track this hang
Hang detected: 0.71s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"amount":0.050000000000000003,"duration":0,"automatic":true,"id":"9f89fb5f7f42567cad9be3cf10d18903","_type":"SMB-Basal","timestamp":"2025-09-23T03:35:17.945Z"},{"amount":0.050000000000000003,"delivered_units":0.050000000000000003,"duration":0,"_type":"SMB-Basal","id":"2174abd7c4c6018cc62957a06a3b24eb","timestamp":"2025-09-23T03:30:46.337Z","automatic":true},{"id":"251d614ab1f7cdefec495792d7968ddc","delivered_units":0.10000000000000001,"timestamp":"2025-09-23T03:30:02.191Z","duration":0,"_type"
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.781
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 12
  Timestamp: 2025-09-23 03:30:02 +0000
  Reason: COB: 12, Dev: -3.7, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 9.3, minGuardBG 7.0, IOBpredBG 10.4, COBpredBG 12.9, UAMpredBG 10.4; Eventual BG 12.9 >= 6.3,  insulinReq 0.43; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.45U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.0999374543415325696
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09742477641091649536
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09514116046365601792
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.046821322260883712
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.1390423890174502912
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17417385163690852352
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16082127013427392512
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2993725347942500352
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18042475018003474432
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.0647648824228115456
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06219036925509300224
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06145451547597275136
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05123144273642694656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.050289620278752
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04711215191090208768
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0322268846538155264
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014032661174782441472
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03504670368354842624
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02725737207168745984
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.024295594813994368
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.0224919488161953664
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01967118505699076864
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.01726048955487053824
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.01416637464597409792
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.01292333384747343872
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02228660723344347648
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01279699712149668864
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011163559705851377664
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.0021263936608947328
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002110945843796886016
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002096543748197820416
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.00291146062159879424
  SMB-Basal IOB: 1.2727853256038019072U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2727853256038019072U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:06 +0000
  Системный IOB: -0.781 U
  Наш Bolus IOB: 1.995020343839211008 U
  Наш Basal IOB: 1.2727853256038019072 U
  Наш Total IOB: 3.2678056694430129152 U
  РАЗНИЦА: 4.0488056694430129152 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.1%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.6%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.7%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 87.1%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.4%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 74.8%, IOB: 0.299U
  SMB: 0.25U, возраст: 62мин, остаток: 72.2%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.781
  Custom Bolus IOB: 1.995020343839211008
  Custom Basal IOB: 1.2727853256038019072
  Custom Total IOB: 3.2678056694430129152
  Difference: 4.0488056694430129152
🧮 Custom IOB Update:
  System IOB: -0.781
  Custom IOB: 3.2678056694430129152
  Difference: 4.0488056694430129152
  Show Custom: true
OpenAPS: IOB calculation result: [
    {
        "iob": -0.824,
        "activity": -0.0083,
        "basaliob": -0.828,
        "bolusiob": 0.004,
        "netbasalinsulin": -2.45,
        "bolusinsulin": 0.3,
        "time": "2025-
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,7,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,156,minutes ago; remainingCATime:,8.1,hours;,91% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-3.8,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1.7,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-3.8,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 193 minIOBPredBG: 187 minZTGuardBG: 137
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 193
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minUAMPredBG: 168
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,220,COB:,11,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,206,bgUndershoot:,-129,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-72
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,206,,0m 0U/h temp needed; last bolus,131.6m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 132,
    "tick": "+1",
    "eventualBG": 255,
    "insulinReq": 0.63,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:37:06.740Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            150,
            153,
            157,
            160,
            164,
            168,
            172,
            175,
            179,
            182,
            185,
            187,
            190,
            192,
            195,
            197,
            199,
            200,
            202,
            203,
            205,
            206,
            207,
            208,
            209,
            210,
            211,
            212,
            212,
            213,
            213,
            214,
            214,
            215,
            215,
            215,
            215,
            216
        ],
        "ZT": [
            132,
            137,
            142,
            148,
            153,
            159,
            164,
            170,
            175,
            181,
            187,
            193,
            198,
            204,
            210,
            217,
            223,
            229,
            235,
            242,
            248,
            255,
            261,
            268,
            274,
            281,
            288,
            295,
            301,
            308,
            315,
            322,
            329,
            336,
            343,
            350,
            357,
            364,
            371,
            379,
            386,
            393,
            400,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            151,
            154,
            158,
            162,
            166,
            171,
            175,
            179,
            183,
            186,
            190,
            193,
            196,
            200,
            202,
            205,
            208,
            211,
            213,
            215,
            218,
            220,
            222,
            224,
            226,
            228,
            230,
            232,
            234,
            236,
            237,
            239,
            241,
            243,
            244,
            246,
            248,
            250,
            251,
            253,
            255
        ],
        "UAM": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            150,
            153,
            157,
            160,
            164,
            168,
            172,
            175,
            179,
            182,
            185,
            187,
            190,
            192,
            195,
            197,
            199,
            200,
            202,
            203,
            205,
            206,
            207,
            208,
            209,
            210,
            211,
            212,
            212,
            213,
            213,
            214,
            214,
            215,
            215,
            215,
            215,
            216
        ]
    },
    "COB": 11,
    "IOB": -0.824,
    "reason": "COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.85
}
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
APSManager.swift - enactSuggested() - 746 DEV: SMB-basal active: skipping OpenAPS temp basal (pump held at 0 U/h)
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 378 DEV: Enact bolus 0.1, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 402 DEV: Bolus attempt 1/3: 0.1U
Scheduling session Bolus
======================== Bolus ===========================
APSManager.swift - loopCompleted(error:) - 230 DEV: Loop succeeded
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
Send(Hex): 17a8db2d04030e010083ce
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d04030e010083ce
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
APSManager.swift - reportEnacted(received:) - 836 DEV: Suggestion enacted. Received: true
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:30:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopFirstNotification notification
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopSecondNotification notification
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
App is being debugged, do not track this hang
Hang detected: 0.69s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"automatic":true,"amount":0.050000000000000003,"timestamp":"2025-09-23T03:35:17.945Z","duration":0,"id":"9f89fb5f7f42567cad9be3cf10d18903","_type":"SMB-Basal"},{"automatic":true,"_type":"SMB-Basal","id":"2174abd7c4c6018cc62957a06a3b24eb","timestamp":"2025-09-23T03:30:46.337Z","amount":0.050000000000000003,"delivered_units":0.050000000000000003,"duration":0},{"id":"251d614ab1f7cdefec495792d7968ddc","delivered_units":0.10000000000000001,"duration":0,"_type":"SMB","automatic":true,"timestamp":"20
OpenAPS: IOB calculation result: [
    {
        "iob": -0.824,
        "activity": -0.0083,
        "basaliob": -0.828,
        "bolusiob": 0.004,
        "netbasalinsulin": -2.45,
        "bolusinsulin": 0.3,
        "time": "2025-
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,7,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,156,minutes ago; remainingCATime:,8.1,hours;,91% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-3.8,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1.7,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-3.8,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 193 minIOBPredBG: 187 minZTGuardBG: 137
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 193
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minUAMPredBG: 168
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,220,COB:,11,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,206,bgUndershoot:,-129,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-72
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,206,,0m 0U/h temp needed; last bolus,131.6m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 132,
    "tick": "+1",
    "eventualBG": 255,
    "insulinReq": 0.63,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:37:08.122Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            150,
            153,
            157,
            160,
            164,
            168,
            172,
            175,
            179,
            182,
            185,
            187,
            190,
            192,
            195,
            197,
            199,
            200,
            202,
            203,
            205,
            206,
            207,
            208,
            209,
            210,
            211,
            212,
            212,
            213,
            213,
            214,
            214,
            215,
            215,
            215,
            215,
            216
        ],
        "ZT": [
            132,
            137,
            142,
            148,
            153,
            159,
            164,
            170,
            175,
            181,
            187,
            193,
            198,
            204,
            210,
            217,
            223,
            229,
            235,
            242,
            248,
            255,
            261,
            268,
            274,
            281,
            288,
            295,
            301,
            308,
            315,
            322,
            329,
            336,
            343,
            350,
            357,
            364,
            371,
            379,
            386,
            393,
            400,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            151,
            154,
            158,
            162,
            166,
            171,
            175,
            179,
            183,
            186,
            190,
            193,
            196,
            200,
            202,
            205,
            208,
            211,
            213,
            215,
            218,
            220,
            222,
            224,
            226,
            228,
            230,
            232,
            234,
            236,
            237,
            239,
            241,
            243,
            244,
            246,
            248,
            250,
            251,
            253,
            255
        ],
        "UAM": [
            132,
            134,
            136,
            138,
            141,
            144,
            147,
            150,
            153,
            157,
            160,
            164,
            168,
            172,
            175,
            179,
            182,
            185,
            187,
            190,
            192,
            195,
            197,
            199,
            200,
            202,
            203,
            205,
            206,
            207,
            208,
            209,
            210,
            211,
            212,
            212,
            213,
            213,
            214,
            214,
            215,
            215,
            215,
            215,
            216
        ]
    },
    "COB": 11,
    "IOB": -0.824,
    "reason": "COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.85
}
centralManager(_:didConnect:): <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -59
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 11min, IOB: 0.0999321164981921792
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 22min, IOB: 0.09739519608637464576
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09510306615872448512
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04680030275187468288
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 32min, IOB: 0.1389762083716630528
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17406892086822479872
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16070648246374600704
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2991358999296312832
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18027607287152504832
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.064705933402980096
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.062132000770056704
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06139634598263451648
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.0511773686864777728
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.0502360362338697728
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04706034717571110912
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0321857843521549312
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.014013936486472312832
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03499297128121254912
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02721256849184140288
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02425437971653214208
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.0224529785679502464
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.0196358257119408128
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.017228324573190209536
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014138481681187495936
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 202min, IOB: 0.01289722085118654464
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02223962992780718592
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.01276518683317835776
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011132476517353005056
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002120378681845536768
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002104960380919128576
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002090585854168625152
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002899490221942890496
  SMB-Basal IOB: 1.271829709812909056U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.271829709812909056U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:11 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.99344824951695232 U
  Наш Basal IOB: 1.271829709812909056 U
  Наш Total IOB: 3.265277959329861376 U
  РАЗНИЦА: 4.089277959329861376 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 11мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 22мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.1%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.6%, IOB: 0.047U
  SMB: 0.15U, возраст: 32мин, остаток: 92.7%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 87.0%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.4%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 74.8%, IOB: 0.299U
  SMB: 0.25U, возраст: 62мин, остаток: 72.1%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.99344824951695232
  Custom Basal IOB: 1.271829709812909056
  Custom Total IOB: 3.265277959329861376
  Difference: 4.089277959329861376
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.265277959329861376
  Difference: 4.089277959329861376
  Show Custom: true
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
Error reading message: Пустое значение
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Unacknowledged message reading response for sent command seq:1, error = incorrectResponse
### tryToValidateComms getStatus failed, returning: Неправильный ответ
APSManager.swift - enactBolus(units:activationType:) - 886 DEV: Bolus failed: 0.1
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 407 WARN: error("Bolus attempt 1/3 failed: Pump error: Неправильный ответ (connection error: false)")
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 429 WARN: error("Bolus failed after 1 attempts: Pump error: Неправильный ответ")
APSManager.swift - processError(_:) - 847 WARN: error("Pump error: Pump error: Неправильный ответ")
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 03:37:12 +0000)
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Applying configuration
runCommand guard failed - bluetooth not running or peripheral not connected: peripheral <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Error applying peripheral configuration: notReady
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
HomeStateModel.swift - subscribe() - 140 INFO: Pump error: Pump error: Неправильный ответ
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
centralManager(_:didConnect:): <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109e14d20, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
didReadRSSI: -59
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
didDiscoverServices
Discovered service: <CBService: 0x12f114240, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
Session Established
msgSequenceNumber: 3
Setting podState transport state to ## MessageTransportState
eapSeq: 1385
msgSeq: 3
nonceSeq: 0
messageNumber: 2
Scheduling session Post-connect status fetch
Delegate configuration notified
Peripheral configuration completed
======================== Post-connect status fetch ===========================
Send(Hex): 17a8db2d04030e010703df
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d04030e010703df
Recv(Hex): 17a8db2d080a1d280431880040467bff02f8
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d080a1d280431880040467bff02f8
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:75h10m, reservoirLevel:50+, insulinDelivered:107.35, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:1, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
------------------------ Post-connect status fetch ---------------------------
Start of idle at Optional(2025-09-23 03:37:14 +0000)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09992628477971939328
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09736399867683350528
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09506296352715313152
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04677818895432177664
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13890660274447618048
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17395867217239822336
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.1605859488965764096
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2988874965794264064
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 62min, IOB: 0.18012001958930878464
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.0646440757458059776
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06207075677619724288
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06133531199174619136
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05112064523097737216
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.05017982786155030528
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 97min, IOB: 0.04700600861432707072
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03214268498063544832
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.01399430243039404032
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.0349366404263358208
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.0271656025363528192
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02421117718472365568
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02241213023424888832
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.0195987640297882624
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.017194612583117541376
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014109249222425602048
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.01286985474899289088
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02219040098292790016
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 227min, IOB: 0.012731859355259088896
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011099916315757144064
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002114078038155054336
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002098690678572234752
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002084345051782932992
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.00288695999246866176
  SMB-Basal IOB: 1.270828912076776448U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.270828912076776448U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:16 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.991798146248574464 U
  Наш Basal IOB: 1.270828912076776448 U
  Наш Total IOB: 3.262627058325350912 U
  РАЗНИЦА: 4.086627058325350912 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.1%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.6%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.6%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 87.0%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.3%, IOB: 0.161U
  SMB: 0.4U, возраст: 59мин, остаток: 74.7%, IOB: 0.299U
  SMB: 0.25U, возраст: 62мин, остаток: 72.0%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.991798146248574464
  Custom Basal IOB: 1.270828912076776448
  Custom Total IOB: 3.262627058325350912
  Difference: 4.086627058325350912
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.262627058325350912
  Difference: 4.086627058325350912
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09992022076828536832
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09733265665958201344
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09502275037989148672
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04675602831734734848
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13883687048298518528
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.1738483374458312704
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 51min, IOB: 0.16046539426336882688
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2986391280559579136
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17996400670743369728
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 72min, IOB: 0.06458225029223798784
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06200954924481639424
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.0612743155718160896
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05106397039296012288
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.05012366875805735936
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04695172111282614272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0320996375405053696
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.013974693440951853056
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 157min, IOB: 0.03488039280492547072
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.0271187103601571584
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 175min, IOB: 0.02416804430857480192
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02237134888548826368
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01956176489128381184
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.017160959058709622784
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014080069554965856256
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012842538997887279104
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02214126537672855552
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012698602729949872128
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 238min, IOB: 0.0011067430962654513152
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002107792037454670336
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.00209243557124652032
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002078118799579387392
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.00287446776131332608
  SMB-Basal IOB: 1.2698280839538403328U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2698280839538403328U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:21 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.99014845366938368 U
  Наш Basal IOB: 1.2698280839538403328 U
  Наш Total IOB: 3.2599765376232240128 U
  РАЗНИЦА: 4.0839765376232240128 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.0%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.5%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.6%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 86.9%, IOB: 0.174U
  SMB: 0.2U, возраст: 51мин, остаток: 80.2%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.7%, IOB: 0.299U
  SMB: 0.25U, возраст: 63мин, остаток: 72.0%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.99014845366938368
  Custom Basal IOB: 1.2698280839538403328
  Custom Total IOB: 3.2599765376232240128
  Difference: 4.0839765376232240128
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2599765376232240128
  Difference: 4.0839765376232240128
  Show Custom: true
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09991393013474048
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09730119410434439168
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.0949824572273593344
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04673383758490011648
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.1387670641720595456
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17373799932541659136
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.16034490849497372672
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.298390979250623488
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17980815027447984128
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06452050295110647808
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06194842360352551936
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06121340198774969344
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 91min, IOB: 0.05100738616377899008
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.05006760052735149056
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04689752487212758016
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0320566738549649408
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 131min, IOB: 0.013955124007720511488
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03482426992853221888
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02707192655113012224
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02412501289535939584
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02233066459004268032
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.0195248555686289536
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.01712738879946579968
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014050964172759371776
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.01281529371500027904
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02209225928458211328
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012665441410977693696
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0011035044322250674176
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002101525296899730944
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.0020861996533109376
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002071911670644088832
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002862022669381847552
  SMB-Basal IOB: 1.2688277321758130176U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2688277321758130176U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:26 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.98850039917616256 U
  Наш Basal IOB: 1.2688277321758130176 U
  Наш Total IOB: 3.2573281313519755776 U
  РАЗНИЦА: 4.0813281313519755776 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 95.0%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.5%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.5%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 86.9%, IOB: 0.174U
  SMB: 0.2U, возраст: 52мин, остаток: 80.2%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.6%, IOB: 0.298U
  SMB: 0.25U, возраст: 63мин, остаток: 71.9%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.98850039917616256
  Custom Basal IOB: 1.2688277321758130176
  Custom Total IOB: 3.2573281313519755776
  Difference: 4.0813281313519755776
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2573281313519755776
  Difference: 4.0813281313519755776
  Show Custom: true
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: background
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09990738601490771968
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.0972694769502900224
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09494191240411998208
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04671152221952508928
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13869688642754152448
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17362718779100489728
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.16022397836715599872
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2981419931682256896
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17965178642290085888
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.0644585707165164544
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06188711949619851264
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06115231178711713792
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05095065153678908416
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.05001138436103240704
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.0468431890586344448
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0320136109382532096
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013935510783800399872
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03476803277623548928
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.0270250518662434816
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02408189968446183936
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02228990408422089216
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01948787887654270464
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.01709375884179611648
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.014021809128817784832
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.01278800287574404096
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 208min, IOB: 0.02204317401627013632
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012632234191799887872
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.00110026184939945472
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002095251133259567616
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.00207995637280634624
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002065697235628383488
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002849571738591461888
  SMB-Basal IOB: 1.2678251401346912256U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2678251401346912256U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:31 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.986846963115830016 U
  Наш Basal IOB: 1.2678251401346912256 U
  Наш Total IOB: 3.2546721032505212416 U
  РАЗНИЦА: 4.0786721032505212416 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 94.9%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.4%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.5%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 86.8%, IOB: 0.174U
  SMB: 0.2U, возраст: 52мин, остаток: 80.1%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.5%, IOB: 0.298U
  SMB: 0.25U, возраст: 63мин, остаток: 71.9%, IOB: 0.180U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.986846963115830016
  Custom Basal IOB: 1.2678251401346912256
  Custom Total IOB: 3.2546721032505212416
  Difference: 4.0786721032505212416
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2546721032505212416
  Difference: 4.0786721032505212416
  Show Custom: true
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:37:35.221Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:37:35.226Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:36:00 +0000
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09990062352067969024
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09723767410062237696
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09490133172714278912
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04668920098612808704
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.138626710716687872
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17351649240554799104
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.16010324718504398848
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2978934942271333888
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17949574686738061312
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06439678299205774336
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.0618259629799660544
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06109136988784857088
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05089406824779518976
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.04995531923626981376
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04678900264520600576
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03197067779853036544
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.01391595807074358272
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.0347119804029706752
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02697833557005477888
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02403893393695932416
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02224928411753424384
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.01945103144255700224
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.01706024801575114752
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.013992759456419688448
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012760811599969488896
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02199427058295487744
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012599157649105528832
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010970325897835982848
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002089002908503056896
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002073738927478063616
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 240min, IOB: 0.002059508538889321216
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002837181172750603264
  SMB-Basal IOB: 1.2668238392314015744U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2668238392314015744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:36 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.985196940506465792 U
  Наш Basal IOB: 1.2668238392314015744 U
  Наш Total IOB: 3.2520207797378673664 U
  РАЗНИЦА: 4.0760207797378673664 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 94.9%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.4%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.4%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 86.8%, IOB: 0.174U
  SMB: 0.2U, возраст: 52мин, остаток: 80.1%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.5%, IOB: 0.298U
  SMB: 0.25U, возраст: 63мин, остаток: 71.8%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.985196940506465792
  Custom Basal IOB: 1.2668238392314015744
  Custom Total IOB: 3.2520207797378673664
  Difference: 4.0760207797378673664
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2520207797378673664
  Difference: 4.0760207797378673664
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09989362854798159872
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.097205713722979328
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09486062310831427584
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04666682315110188032
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13855637741853202432
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17340566072333418496
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.15998243919485997056
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2976449143966784512
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17933967481851559936
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06433499840498358272
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.0617648141000210432
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06103043681920395264
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05083750672282748928
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.0498992767594565632
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04673484152116144128
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.03192777603592972288
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.01389642104727676928
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03465598425707375616
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02693167049937218048
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02399601708379437056
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.02220871149663615488
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 185min, IOB: 0.019414228719463104
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.017026779422005653504
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.01396374848292663296
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012733657475617501184
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02194543672291753472
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.01256613581524486144
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.00109380923391832576
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002082766266104663296
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.002067533031406010368
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002053331360453903104
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002824822459283638272
  SMB-Basal IOB: 1.265822362859215872U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.265822362859215872U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:41 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.983546558819376384 U
  Наш Basal IOB: 1.265822362859215872 U
  Наш Total IOB: 3.249368921678592256 U
  РАЗНИЦА: 4.073368921678592256 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 94.9%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.3%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.4%, IOB: 0.139U
  SMB: 0.2U, возраст: 42мин, остаток: 86.7%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 80.0%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.4%, IOB: 0.298U
  SMB: 0.25U, возраст: 63мин, остаток: 71.7%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.983546558819376384
  Custom Basal IOB: 1.265822362859215872
  Custom Total IOB: 3.249368921678592256
  Difference: 4.073368921678592256
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.249368921678592256
  Difference: 4.073368921678592256
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09988640237272590336
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09717359932189382656
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09481979082478835712
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04664439103041724416
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13848589376008237056
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17329470384601731072
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.15986156631465111552
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2973962780043237888
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17918358550423277568
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06427322294344510464
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.06170367877161092096
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.06096951847251905536
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05078097239717296128
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.04984326231336860672
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04668071088035508224
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.031884909737963904
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013876901571669123072
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03460004964070240256
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 170min, IOB: 0.02688506106415323648
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.0239531531772907776
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 179min, IOB: 0.022168190050386816
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.0193774741770881024
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.01699335621319153664
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.013934778937382301696
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012706543055450380288
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.0218966770223313152
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012533171778868056064
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010905920824073107456
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002076541787432673792
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 240min, IOB: 0.00206133926305505024
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002047166276075273728
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002812496736748480512
  SMB-Basal IOB: 1.264820864025913344U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.264820864025913344U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:46 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.981895979329800192 U
  Наш Basal IOB: 1.264820864025913344 U
  Наш Total IOB: 3.246716843355713536 U
  РАЗНИЦА: 4.070716843355713536 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 94.8%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.3%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.3%, IOB: 0.138U
  SMB: 0.2U, возраст: 42мин, остаток: 86.6%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.9%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.3%, IOB: 0.297U
  SMB: 0.25U, возраст: 63мин, остаток: 71.7%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.981895979329800192
  Custom Basal IOB: 1.264820864025913344
  Custom Total IOB: 3.246716843355713536
  Difference: 4.070716843355713536
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.246716843355713536
  Difference: 4.070716843355713536
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 22 min, isZero: true
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 378 DEV: Enact bolus 0.05, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 402 DEV: Bolus attempt 1/3: 0.05U
Scheduling session Bolus
======================== Bolus ===========================
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
Send(Hex): 17a8db2d0c1f1a0e494e532e02001301001000010001170d3f000a00030d400000000000008182
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d0c1f1a0e494e532e02001301001000010001170d3f000a00030d400000000000008182
Recv(Hex): 17a8db2d100a1d680431980140467bff8011
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d100a1d680431980140467bff8011
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:75h10m, reservoirLevel:50+, insulinDelivered:107.35, bolusNotDelivered:0.05, lastProgrammingMessageSeqNum:3, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
Болюс
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 06:37:49 2 секунды Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 06:37:49 2 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 889 DEV: Bolus succeeded: 0.05
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 440 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 03:37:49 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 03:37:49 +0000, endDate: 2025-09-23 03:37:51 +0000, value: 0.05, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09987895249824831488
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09714136069124337664
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 28min, IOB: 0.09477887246510374912
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04662192521872321536
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.1384153243694522368
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17318372306030301184
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.15974073859369652224
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 59min, IOB: 0.2971478111120896
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.1790276207687115776
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06421151268116808704
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 76min, IOB: 0.0616426124693813248
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 77min, IOB: 0.0609086701206969856
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05072451651242203136
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.049787326664141568
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.0466266597683349504
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 123min, IOB: 0.0318421177005118208
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013857417304670588928
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03454422712141394432
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02683854938636195328
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02391038094841240576
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02212775638935757312
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.0193408010167532672
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.016960008576152102912
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 199min, IOB: 0.013905876977390383104
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012679492819015254016
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02184803549378467328
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012500295270692159488
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010873840351109341184
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002070335082589736448
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.00205516320477546752
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.00204101884218259712
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 265min, IOB: 0.002800215087433732608
  SMB-Basal IOB: 1.3138195445764521984U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3138195445764521984U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:51 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.980246702250325504 U
  Наш Basal IOB: 1.3138195445764521984 U
  Наш Total IOB: 3.2940662468267777024 U
  РАЗНИЦА: 4.1180662468267777024 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 28мин, остаток: 94.8%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.2%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.3%, IOB: 0.138U
  SMB: 0.2U, возраст: 42мин, остаток: 86.6%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.9%, IOB: 0.160U
  SMB: 0.4U, возраст: 59мин, остаток: 74.3%, IOB: 0.297U
  SMB: 0.25U, возраст: 63мин, остаток: 71.6%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.980246702250325504
  Custom Basal IOB: 1.3138195445764521984
  Custom Total IOB: 3.2940662468267777024
  Difference: 4.1180662468267777024
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2940662468267777024
  Difference: 4.1180662468267777024
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09987125869320095744
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09710890918414968832
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09473775542272768
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 31min, IOB: 0.04659936387296493568
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13834447495983161344
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17307241267844091904
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.1596196231305723904
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2968988290533798912
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.1788713508182121472
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.0641496975427745792
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06158144688722041856
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06084772405684688896
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05066798345188865024
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.04973131562783118336
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04657253919191071744
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03179928195414832128
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.01383791453054342144
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03448836279377019392
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02679200722790966272
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02386758246801620992
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02208729903148414464
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01930410812367492608
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.016926644564348069888
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013876962913056090112
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.01265243218165342208
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02179937801852145664
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012467415637869682688
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010841762460692414464
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002064129036987671296
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002048987826478243328
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002034872107610463744
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002787943643299462144
  SMB-Basal IOB: 1.3128170183133872128U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3128170183133872128U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:37:56 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.978594182877393664 U
  Наш Basal IOB: 1.3128170183133872128 U
  Наш Total IOB: 3.2914112011907808768 U
  РАЗНИЦА: 4.1154112011907808768 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.7%, IOB: 0.095U
  SMB: 0.05U, возраст: 31мин, остаток: 93.2%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.2%, IOB: 0.138U
  SMB: 0.2U, возраст: 42мин, остаток: 86.5%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.8%, IOB: 0.160U
  SMB: 0.4U, возраст: 60мин, остаток: 74.2%, IOB: 0.297U
  SMB: 0.25U, возраст: 63мин, остаток: 71.5%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.978594182877393664
  Custom Basal IOB: 1.3128170183133872128
  Custom Total IOB: 3.2914112011907808768
  Difference: 4.1154112011907808768
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2914112011907808768
  Difference: 4.1154112011907808768
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 7min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09986334146016786432
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.0970763303680349184
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09469654803518009344
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04657676642409388032
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13827353214013079552
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 42min, IOB: 0.17296106575691419648
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.15949853871893282816
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2966499871029984768
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17871518690701252608
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06408794018991259648
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06152034297286445056
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06078684064982960128
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05061152195886712832
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 93min, IOB: 0.04967537657319419904
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.046518491542669056
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03175651518998175744
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.01381844455555666944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.0344326036134942208
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02674555701950052352
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02382487031812028416
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.0220469243999509504
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01926749201791177984
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 191min, IOB: 0.0168933519407158784
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013848112801231171584
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012625432324626096128
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.0217508325862141696
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.01243461936631375872
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010809771529178845184
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 240min, IOB: 0.002057939974736511488
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002042829371605159424
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002028742240455328256
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002775714682086683136
  SMB-Basal IOB: 1.311814703976095744U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.311814703976095744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:01 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.976942770356221184 U
  Наш Basal IOB: 1.311814703976095744 U
  Наш Total IOB: 3.288757474332316928 U
  РАЗНИЦА: 4.112757474332316928 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 7мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.7%, IOB: 0.095U
  SMB: 0.05U, возраст: 32мин, остаток: 93.2%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.2%, IOB: 0.138U
  SMB: 0.2U, возраст: 42мин, остаток: 86.5%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.7%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 74.2%, IOB: 0.297U
  SMB: 0.25U, возраст: 63мин, остаток: 71.5%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.976942770356221184
  Custom Basal IOB: 1.311814703976095744
  Custom Total IOB: 3.288757474332316928
  Difference: 4.112757474332316928
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.288757474332316928
  Difference: 4.112757474332316928
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.09985522189273030656
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.097043704192333824
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09465535081571616768
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04655418787576655872
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.1382026684175579136
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17284995210050250752
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.15937777814791002112
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2964018863181664256
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17855950608037752832
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06402638959466689536
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06145944808366029824
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06072616671484663808
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05055526807056524288
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04961964426952991744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04646464700440262656
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.0317139203247294208
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.01379905422192100352
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.0343770836378754048
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02669931040249409536
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.023782347141565824
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02200672951131621888
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01923104067065369088
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016860210679296462848
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.01381939592795333632
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.012598558083165059072
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02170251574837326336
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012401985136579260416
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010777944261826332672
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.002051782734244867328
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.00203670260499920768
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002022643936849155584
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002763557455161392128
  SMB-Basal IOB: 1.3108148929545934848U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3108148929545934848U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:06 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.975296452222093312 U
  Наш Basal IOB: 1.3108148929545934848 U
  Наш Total IOB: 3.2861113451766867968 U
  РАЗНИЦА: 4.1101113451766867968 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.7%, IOB: 0.095U
  SMB: 0.05U, возраст: 32мин, остаток: 93.1%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.1%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.4%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.7%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 74.1%, IOB: 0.296U
  SMB: 0.25U, возраст: 63мин, остаток: 71.4%, IOB: 0.179U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.975296452222093312
  Custom Basal IOB: 1.3108148929545934848
  Custom Total IOB: 3.2861113451766867968
  Difference: 4.1101113451766867968
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2861113451766867968
  Difference: 4.1101113451766867968
  Show Custom: true
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 12min, IOB: 0.0998468537243771904
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 23min, IOB: 0.09701084198154412032
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09461392527031599104
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04653149747086272512
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 33min, IOB: 0.13813147333407399936
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17273842772131289088
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.1592566412658436096
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2961530879764040704
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17840340548970950656
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06396468874720088064
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.0613984089972427264
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06066535030693170176
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.0504988954340091392
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04956379538608233472
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04641069318658791424
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03167125019722019328
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013779631010632871936
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03432148065800987648
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.0266529989725842432
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02373976613875757568
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.021966481075831104
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01919454251445759488
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016827028420266061824
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013790645607756136448
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 203min, IOB: 0.01257165346468696064
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.021654147040469504
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.012369323496402941952
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010746095876299329536
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.00204562156747077888
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.00203057195548310784
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002016541790808601344
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002751401356632854528
  SMB-Basal IOB: 1.309812928499501056U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.309812928499501056U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:11 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.973645681147598848 U
  Наш Basal IOB: 1.309812928499501056 U
  Наш Total IOB: 3.283458609647099904 U
  РАЗНИЦА: 4.107458609647099904 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 12мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 23мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.6%, IOB: 0.095U
  SMB: 0.05U, возраст: 32мин, остаток: 93.1%, IOB: 0.047U
  SMB: 0.15U, возраст: 33мин, остаток: 92.1%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.4%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.6%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 74.0%, IOB: 0.296U
  SMB: 0.25U, возраст: 63мин, остаток: 71.4%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.973645681147598848
  Custom Basal IOB: 1.309812928499501056
  Custom Total IOB: 3.283458609647099904
  Difference: 4.107458609647099904
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.283458609647099904
  Difference: 4.107458609647099904
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connecting>, data = ["kCBAdvDataServiceUUIDs": <__NSArrayM 0x127244360>(
FEBC
)
, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataTimestamp": 780291491.662448, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataIsConnectable": 1, "kCBAdvDataLocalName": DXCMHK, "kCBAdvDataManufacturerData": <d00073a5 0204>]
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManager(_:didConnect:): <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
didConnect to E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMHK")
Set notify true for <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Ignoring authentication response: 03ee4a15793546f6833c92d3e49a7fe83b
Observed authenticated session. enabling notifications for control characteristic.
Set notify true for <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Received control response: 4e0097240c00620a000104006f0006f85b000f
Listening for backfill responses
Set notify true for <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [-]: New sensor DXCMHK discovered, activated at 2025-09-13 22:34:54 +0000
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor didRead G7GlucoseMessage(glucose:Optional(111), sequence:2658 glucoseIsDisplayOnly:false state:ok messageTimestamp:795799 age:4, data:4e0097240c00620a000104006f0006f85b000f)
Stopping scan
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:36:00 +0000
Received control response: 3200014b000000600035eb070003010275ec0700
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms 3200014b000000600035eb070003010275ec0700
Received control response: ea00030100000000000200000045ffffff
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms ea00030100000000000200000045ffffff
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09983824352772927488
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09697777231641341952
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09457230768658989056
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04650871513502578688
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13806000948335312896
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.172626591076555776
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.1591352352789144576
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2959038125488804864
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 63min, IOB: 0.17824702353041108992
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.06390289240972939264
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06133727990546694144
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06060444542482864128
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05044245415363555328
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04950787956591071232
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 98min, IOB: 0.04635667806083162112
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03162854279078753792
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013760192217127440384
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03426584423227554816
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02660666402542024192
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.023697165286717568
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.0219262149950845952
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01915803011347792384
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.01679383477631730688
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.01376188750760418304
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012544742492632887296
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02160576966412763904
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 228min, IOB: 0.01233666365393025024
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010714254880085936128
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.002039461990032143104
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002024442911468971264
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.002010441265335139584
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002739257311543054336
  SMB-Basal IOB: 1.3088090156304611328U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3088090156304611328U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:16 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.971991920826167808 U
  Наш Basal IOB: 1.3088090156304611328 U
  Наш Total IOB: 3.2808009364566289408 U
  РАЗНИЦА: 4.1048009364566289408 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.6%, IOB: 0.095U
  SMB: 0.05U, возраст: 32мин, остаток: 93.0%, IOB: 0.047U
  SMB: 0.15U, возраст: 34мин, остаток: 92.0%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.3%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.6%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 74.0%, IOB: 0.296U
  SMB: 0.25U, возраст: 63мин, остаток: 71.3%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.971991920826167808
  Custom Basal IOB: 1.3088090156304611328
  Custom Total IOB: 3.2808009364566289408
  Difference: 4.1048009364566289408
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2808009364566289408
  Difference: 4.1048009364566289408
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.0998294597259938816
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09694475139662098432
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09453081985674749952
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04648601690356806656
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13798882887571228672
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17251530504075096064
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 52min, IOB: 0.159014496256914432
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2956559813233312768
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.1780915653518149632
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 73min, IOB: 0.0638414766700295168
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06127653171521984512
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06054392123735963648
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05038637889333151744
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04945232741663772672
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04630301756739419136
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03158612687153004032
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013740887471072868352
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 158min, IOB: 0.03421060252386574336
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02656066210540468224
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 176min, IOB: 0.02365487238119020544
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.021886241090299264
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01912178439204181504
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016760885124336185344
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013733342861948493824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.01251803218391001088
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02155775574718573056
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.01230425677199224832
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 239min, IOB: 0.0010682666092946501632
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.00203335136052557056
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002018362596598432512
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.00200438926462025472
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002727218618581428736
  SMB-Basal IOB: 1.307811505133138944U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.307811505133138944U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:21 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.970347916205823488 U
  Наш Basal IOB: 1.307811505133138944 U
  Наш Total IOB: 3.278159421338962432 U
  РАЗНИЦА: 4.102159421338962432 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.5%, IOB: 0.095U
  SMB: 0.05U, возраст: 32мин, остаток: 93.0%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 92.0%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.3%, IOB: 0.173U
  SMB: 0.2U, возраст: 52мин, остаток: 79.5%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 73.9%, IOB: 0.296U
  SMB: 0.25U, возраст: 64мин, остаток: 71.2%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.970347916205823488
  Custom Basal IOB: 1.307811505133138944
  Custom Total IOB: 3.278159421338962432
  Difference: 4.102159421338962432
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.278159421338962432
  Difference: 4.102159421338962432
  Show Custom: true
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x109e16060, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = disconnected>
Sensor disconnected: wasRemoteDisconnect:true
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor disconnected: suspectedEndOfSession=false
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Not connecting to unnamed peripheral: <CBPeripheral: 0x12ce150a0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = (null), mtu = 23, state = disconnected>
Scanning for peripherals and listening for connection events
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09982038999975938048
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09691135587002456064
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09448892976850249728
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.0464631116888080896
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.1379170186428823552
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.1724031422371274752
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15889287546859319296
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2954064152280649728
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.1779350367762424832
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06377965367893147648
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06121538513407120384
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06048300132386480128
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 92min, IOB: 0.05032995028490187776
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04939642627932703744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.0462490233099534336
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03154345828167682048
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 132min, IOB: 0.013721469108357097472
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.0341550468142037504
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.0265144030307157248
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02361234482353409536
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.0218460465135588352
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01908534033170827776
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016727756731884253184
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013704645451419430912
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012491179852465549312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.02150948928208737792
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012271687072769798144
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010650924229854765056
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.00202721127931240192
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002012253000157348608
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.001998308141209037312
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002715130816103573504
  SMB-Basal IOB: 1.3068055179409010688U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3068055179409010688U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:26 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.968692578645203456 U
  Наш Basal IOB: 1.3068055179409010688 U
  Наш Total IOB: 3.2754980965861045248 U
  РАЗНИЦА: 4.0994980965861045248 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.5%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.9%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.9%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.2%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.4%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 73.9%, IOB: 0.295U
  SMB: 0.25U, возраст: 64мин, остаток: 71.2%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.968692578645203456
  Custom Basal IOB: 1.3068055179409010688
  Custom Total IOB: 3.2754980965861045248
  Difference: 4.0994980965861045248
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2754980965861045248
  Difference: 4.0994980965861045248
  Show Custom: true
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: background
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.0998110984105007104
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09687782618646935552
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09444693948902680576
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04644016474647856128
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13784509700890558464
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17229091281711878144
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15877125184640303104
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2951569183389930496
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17777856944554225664
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06371787049857964032
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06115428236286298112
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.0604221262540770816
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.0502735765076476416
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04934058052506607616
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04619508588872491008
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03150084576760250368
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.01370207764835288064
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03409957920709013504
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02646822164908227072
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02356989046379994112
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02180592223508146688
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01904896176556513792
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016694689440273573888
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013676003053750542336
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012464379924099702784
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 209min, IOB: 0.0214613197656875264
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012239190451419058176
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.001061925923352109056
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.002021086227275770368
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.0020061583823722688
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.001992241949232731648
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002703081541579967488
  SMB-Basal IOB: 1.3058015269344131072U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3058015269344131072U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:31 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.967037875722015232 U
  Наш Basal IOB: 1.3058015269344131072 U
  Наш Total IOB: 3.2728394026564283392 U
  РАЗНИЦА: 4.0968394026564283392 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.4%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.9%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.9%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.1%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.4%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 73.8%, IOB: 0.295U
  SMB: 0.25U, возраст: 64мин, остаток: 71.1%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.967037875722015232
  Custom Basal IOB: 1.3058015269344131072
  Custom Total IOB: 3.2728394026564283392
  Difference: 4.0968394026564283392
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2728394026564283392
  Difference: 4.0968394026564283392
  Show Custom: true
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:38:35.222Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:38:35.226Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09980160330411513856
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09684422398582632448
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09440492574774407168
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04641721791873731584
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13777319498531311616
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17217882048351023104
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15864984567077851136
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.294907942025144576
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17762244630606004224
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06365623874802055168
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.061093333761369344
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06036140596841972736
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.05021735928305531904
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04928489091542831104
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04614130259972371456
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03145836612272844288
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.013682748028030199808
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.0340442995653968384
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02642220107747460608
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02352758570009984512
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02176594045303352576
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01901271414111109632
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016661742730254221312
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013647467177671268352
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012437680588579237888
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.02141333379655389696
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012206825284587810816
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010587727953545689088
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.00201498720006162432
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.002000089684113037312
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 241min, IOB: 0.001986201578400004864
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002691092373842175488
  SMB-Basal IOB: 1.3047988956395618304U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3047988956395618304U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:36 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.965386800000537856 U
  Наш Basal IOB: 1.3047988956395618304 U
  Наш Total IOB: 3.2701856956400996864 U
  РАЗНИЦА: 4.0941856956400996864 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.4%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.8%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.8%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.1%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.3%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 73.7%, IOB: 0.295U
  SMB: 0.25U, возраст: 64мин, остаток: 71.0%, IOB: 0.178U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.965386800000537856
  Custom Basal IOB: 1.3047988956395618304
  Custom Total IOB: 3.2701856956400996864
  Difference: 4.0941856956400996864
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2701856956400996864
  Difference: 4.0941856956400996864
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09979189383671969792
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09681050598897598464
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09436283392298969088
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04639424127482251264
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13770121864088031232
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17206671799615350784
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15852849694663872512
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2946591576107469824
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.1774664611246749696
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06359467689709477888
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06103245867004516352
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06030076010058119168
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.05016122410602694656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04922928363668511744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.0460876021312421376
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.03141596294121288704
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.013663454570906247168
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03398913437931309568
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.0263762800884092416
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.0234853742363602176
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02172604795492235264
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 186min, IOB: 0.01897654920370024448
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016628872730870388736
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013618999811479855104
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012411046274359451648
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.0213654674244776064
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.01217454838884615168
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010556288281955274752
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.002008906051764225536
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.001994038799823283456
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.00198017896084137216
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002679147241722734592
  SMB-Basal IOB: 1.303798817057134592U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.303798817057134592U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:41 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.963737170771483136 U
  Наш Basal IOB: 1.303798817057134592 U
  Наш Total IOB: 3.267535987828617728 U
  РАЗНИЦА: 4.091535987828617728 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.4%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.8%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.8%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.0%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.3%, IOB: 0.159U
  SMB: 0.4U, возраст: 60мин, остаток: 73.7%, IOB: 0.295U
  SMB: 0.25U, возраст: 64мин, остаток: 71.0%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.963737170771483136
  Custom Basal IOB: 1.303798817057134592
  Custom Total IOB: 3.267535987828617728
  Difference: 4.091535987828617728
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.267535987828617728
  Difference: 4.091535987828617728
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09978194431620390912
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09677658197512146944
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09432055128220674048
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.0463711732571676672
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.1376289751109385216
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17195430480336060416
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15840688022538522624
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.2944098977585724416
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17731019546081660928
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06353301977844748288
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06097149375744888832
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.0602400259323598848
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.05010502034148540416
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04917360946881427456
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04603384037536329728
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.0313735224169207552
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.01364414549343859712
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03393393557316672512
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 171min, IOB: 0.02633033541541413888
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02344314276201094144
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 180min, IOB: 0.02168613765410962944
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 187min, IOB: 0.01894036987137613056
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016595991203885436928
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.013590524534018609152
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012384405480456142848
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.02131759214811377664
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012142273109138556928
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.00105248558080869376
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.002002826455347961344
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 241min, IOB: 0.001987989483708374528
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.001974157926641673728
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.00266721406944436736
  SMB-Basal IOB: 1.302793399320282112U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.302793399320282112U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:46 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.962084563021692416 U
  Наш Basal IOB: 1.302793399320282112 U
  Наш Total IOB: 3.264877962341974528 U
  РАЗНИЦА: 4.088877962341974528 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.3%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.7%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.8%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 86.0%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.2%, IOB: 0.158U
  SMB: 0.4U, возраст: 60мин, остаток: 73.6%, IOB: 0.294U
  SMB: 0.25U, возраст: 64мин, остаток: 70.9%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.962084563021692416
  Custom Basal IOB: 1.302793399320282112
  Custom Total IOB: 3.264877962341974528
  Difference: 4.088877962341974528
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.264877962341974528
  Difference: 4.088877962341974528
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 21 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09977177954504456192
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09674253573719023616
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 29min, IOB: 0.09427818218114992128
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04634807078282756096
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.1375566426222927872
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17184185810011133952
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.1582852953120172032
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 60min, IOB: 0.294160776844078592
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.1771540344565725184
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.0634714193375579136
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 77min, IOB: 0.06091058925803859968
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 78min, IOB: 0.06017935312820760576
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.05004888647471453184
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04911800559100383232
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04598014979550674944
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 124min, IOB: 0.0313311491075224064
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.013624868364741326848
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03387883912370632192
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 172min, IOB: 0.02628448023573404672
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.0234009953063757824
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 181min, IOB: 0.02164630786151185664
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 187min, IOB: 0.0189042652636374016
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016563179144637104128
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 200min, IOB: 0.01356211148600487936
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012357823828475568128
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.02126982589277779456
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012110078942733262848
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010493507951802877952
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.001996763385144429056
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 242min, IOB: 0.001981956635512271616
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.001968153305879760384
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 266min, IOB: 0.002655322247131542016
  SMB-Basal IOB: 1.3017902018800064512U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3017902018800064512U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:51 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.960433050093019648 U
  Наш Basal IOB: 1.3017902018800064512 U
  Наш Total IOB: 3.2622232519730260992 U
  РАЗНИЦА: 4.0862232519730260992 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 29мин, остаток: 94.3%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.7%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.7%, IOB: 0.138U
  SMB: 0.2U, возраст: 43мин, остаток: 85.9%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.1%, IOB: 0.158U
  SMB: 0.4U, возраст: 60мин, остаток: 73.5%, IOB: 0.294U
  SMB: 0.25U, возраст: 64мин, остаток: 70.9%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.960433050093019648
  Custom Basal IOB: 1.3017902018800064512
  Custom Total IOB: 3.2622232519730260992
  Difference: 4.0862232519730260992
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2622232519730260992
  Difference: 4.0862232519730260992
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x109e16220, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataManufacturerData": <d000c93d 0004>, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x12aac08d0>(
FEBC
)
, "kCBAdvDataIsConnectable": 1, "kCBAdvDataRxPrimaryPHY": 1, "kCBAdvDataLocalName": DXCMXn, "kCBAdvDataTimestamp": 780291531.695091]
Not connecting to peripheral: DXCMXn
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09976140186426232832
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09670837204950247424
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 30min, IOB: 0.09423573222525403136
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 32min, IOB: 0.04632493684334971904
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13748423044451803136
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17172939176123623424
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15816375686195400704
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 61min, IOB: 0.293911824520276224
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17699799661073514496
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06340988279371958272
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 78min, IOB: 0.06084975228748935168
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 79min, IOB: 0.06011874877078601728
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.049992828992782592
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04906247842383699968
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04592653657492235264
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 125min, IOB: 0.03128884783890500608
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.013605625373720655872
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03382385123552572416
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 172min, IOB: 0.02623871969378179584
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02335893659004390912
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 181min, IOB: 0.02160656303321988608
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 187min, IOB: 0.0188682394121301248
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.016530440210318938112
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 201min, IOB: 0.01353376382537285632
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012331304268852404224
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.02122217394862113536
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.012077969423194370048
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.001046224813051611136
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.001990717501466843648
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 242min, IOB: 0.001975940912157924864
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.001962165752312228352
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 267min, IOB: 0.002643473033533760512
  SMB-Basal IOB: 1.3007880880642250752U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3007880880642250752U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:38:56 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.958782827890834688 U
  Наш Basal IOB: 1.3007880880642250752 U
  Наш Total IOB: 3.2595709159550597632 U
  РАЗНИЦА: 4.0835709159550597632 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 30мин, остаток: 94.2%, IOB: 0.094U
  SMB: 0.05U, возраст: 32мин, остаток: 92.6%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.7%, IOB: 0.137U
  SMB: 0.2U, возраст: 43мин, остаток: 85.9%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.1%, IOB: 0.158U
  SMB: 0.4U, возраст: 61мин, остаток: 73.5%, IOB: 0.294U
  SMB: 0.25U, возраст: 64мин, остаток: 70.8%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.958782827890834688
  Custom Basal IOB: 1.3007880880642250752
  Custom Total IOB: 3.2595709159550597632
  Difference: 4.0835709159550597632
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2595709159550597632
  Difference: 4.0835709159550597632
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 8min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.0997507747897527296
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.09667397078287122432
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 30min, IOB: 0.09419305214620655616
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 33min, IOB: 0.04630169009162067968
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.13741148395020980224
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 43min, IOB: 0.17161651031167766528
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.158041837498052608
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 61min, IOB: 0.2936621653724604416
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17684153323277340672
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.06334819376058840064
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 78min, IOB: 0.06078876891961899008
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 79min, IOB: 0.0600579997519298048
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.0499366507770742272
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 94min, IOB: 0.04900683271359209472
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04587281219041905664
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 125min, IOB: 0.0312464698668644352
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.013586348856538728448
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03376877856013473792
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 172min, IOB: 0.02619289288868000256
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02331681872940771328
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 181min, IOB: 0.02156676342226903552
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 187min, IOB: 0.01883216564740489984
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 192min, IOB: 0.0164976592896516096
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 201min, IOB: 0.013505381882326151168
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012304753560103436288
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.02117446877601750528
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.01204583166343047168
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010430966449828728832
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 241min, IOB: 0.00198466755007225984
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 242min, IOB: 0.001969921165454414336
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.001956174216800887552
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 267min, IOB: 0.002631624781975539712
  SMB-Basal IOB: 1.2987851426450989056U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2987851426450989056U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:39:01 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.957128093790962176 U
  Наш Basal IOB: 1.2987851426450989056 U
  Наш Total IOB: 3.2559132364360610816 U
  РАЗНИЦА: 4.0799132364360610816 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 8мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 30мин, остаток: 94.2%, IOB: 0.094U
  SMB: 0.05U, возраст: 33мин, остаток: 92.6%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.6%, IOB: 0.137U
  SMB: 0.2U, возраст: 43мин, остаток: 85.8%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.0%, IOB: 0.158U
  SMB: 0.4U, возраст: 61мин, остаток: 73.4%, IOB: 0.294U
  SMB: 0.25U, возраст: 64мин, остаток: 70.7%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.957128093790962176
  Custom Basal IOB: 1.2987851426450989056
  Custom Total IOB: 3.2559132364360610816
  Difference: 4.0799132364360610816
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2559132364360610816
  Difference: 4.0799132364360610816
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.824
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 11
  Timestamp: 2025-09-23 03:37:08 +0000
  Reason: COB: 11, Dev: -2.9, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 10.7, minGuardBG 7.4, IOBpredBG 12.0, COBpredBG 14.2, UAMpredBG 12.0; Eventual BG 14.2 >= 6.3,  insulinReq 0.63; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 9min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 13min, IOB: 0.09973996618026502144
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 24min, IOB: 0.0966395492042036224
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 30min, IOB: 0.09415041122498400256
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 33min, IOB: 0.0462784771453981184
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 34min, IOB: 0.137338861874353152
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 44min, IOB: 0.17150392513944152064
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 53min, IOB: 0.15792030528334589952
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 61min, IOB: 0.2934133718882089984
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 64min, IOB: 0.17668562974052397056
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 74min, IOB: 0.0632867406967695872
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 78min, IOB: 0.0607280231514606592
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 79min, IOB: 0.0599974885881943552
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 93min, IOB: 0.04988070550982112256
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 95min, IOB: 0.04895141878573925376
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 99min, IOB: 0.04581931485816114176
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 125min, IOB: 0.03120428193368447488
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 133min, IOB: 0.01356716014127535104
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 159min, IOB: 0.03371396768839735296
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 172min, IOB: 0.0261472882084014592
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 177min, IOB: 0.02327490676582344192
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 181min, IOB: 0.02152715947772457472
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 187min, IOB: 0.01879627096663096832
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 193min, IOB: 0.016465042653952720896
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 201min, IOB: 0.013477144240922765312
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 204min, IOB: 0.012278338760742295552
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 210min, IOB: 0.0211270105293710464
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 229min, IOB: 0.01201386784484497408
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 240min, IOB: 0.0010399859687366017024
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 242min, IOB: 0.001978651587709679616
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 242min, IOB: 0.00196393526207357952
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 242min, IOB: 0.001950216388485593088
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 267min, IOB: 0.002619851994753031168
  SMB-Basal IOB: 1.2977865881954367488U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2977865881954367488U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:39:06 +0000
  Системный IOB: -0.824 U
  Наш Bolus IOB: 1.95547926968440064 U
  Наш Basal IOB: 1.2977865881954367488 U
  Наш Total IOB: 3.2532658578798373888 U
  РАЗНИЦА: 4.0772658578798373888 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 9мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 13мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 24мин, остаток: 96.6%, IOB: 0.097U
  SMB: 0.1U, возраст: 30мин, остаток: 94.2%, IOB: 0.094U
  SMB: 0.05U, возраст: 33мин, остаток: 92.6%, IOB: 0.046U
  SMB: 0.15U, возраст: 34мин, остаток: 91.6%, IOB: 0.137U
  SMB: 0.2U, возраст: 44мин, остаток: 85.8%, IOB: 0.172U
  SMB: 0.2U, возраст: 53мин, остаток: 79.0%, IOB: 0.158U
  SMB: 0.4U, возраст: 61мин, остаток: 73.4%, IOB: 0.293U
  SMB: 0.25U, возраст: 64мин, остаток: 70.7%, IOB: 0.177U
  ... и еще 31 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.824
  Custom Bolus IOB: 1.95547926968440064
  Custom Basal IOB: 1.2977865881954367488
  Custom Total IOB: 3.2532658578798373888
  Difference: 4.0772658578798373888
🧮 Custom IOB Update:
  System IOB: -0.824
  Custom IOB: 3.2532658578798373888
  Difference: 4.0772658578798373888
  Show Custom: true