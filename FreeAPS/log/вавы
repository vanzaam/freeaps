Skipping updateConnections until state is poweredOn
OmniBLE centralManager(_:willRestoreState:): {
    kCBRestoredPeripherals =     (
        "<CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>"
    );
}
Created device
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod peripheral was restored EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7)
centralManagerDidUpdateState(_:): 5
Re-connecting to known peripheral EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
Discovered service: <CBService: 0x109208fc0, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
centralManager(_:didConnect:): <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=false
PeripheralManager - didConnect: <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
Session already established.
Delegate configuration notified
Peripheral configuration completed
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -75
NightscoutManager.swift - subscribe() - 74 DEV: Network status: reachable by WiFi
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
HealthKitManager.swift - init(resolver:) - 95 DEV: HealthKitManager did create
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d1f6fcbc5d6c9f3d8a3738
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1f6fcbc5d6c9f3d8a3738
Restoring peripheral from state: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
API MISUSE: <CBCentralManager: 0x109304540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
Unable to run command: central state = Optional("unknown"), peripheral state = CBPeripheralState(rawValue: 1)
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
Error applying peripheral configuration: notReady
Restoring peripheral from state: E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
API MISUSE: <CBCentralManager: 0x109304540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
API MISUSE: <CBCentralManager: 0x109304540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
API MISUSE: <CBCentralManager: 0x109304540> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManagerDidUpdateState(_:): 5
Scanning for peripherals and listening for connection events
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:18:05.147Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:18:05.536Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
UserNotificationsManager.swift - requestNotificationPermissionsIfNeeded() - 288 DEV: UNUserNotificationCenter.authorizationStatus: UNAuthorizationStatus(rawValue: 2)
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 228 DEV: WCSession is activated: true
Application context data is nil
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 237 DEV: WCSession activated successfully
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 239 DEV: Watch is paired
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 241 DEV: Watch app is installed
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d1fc67bc5d6c9f3d8ec015
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1fc67bc5d6c9f3d8ec015
Application context data is nil
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Temp Target by _id: 68d1e6efbc5d6c9f3d7c8f7e
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1e6efbc5d6c9f3d7c8f7e
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 20:07:57 +0000, 0.5)
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Temp Target by _id: 68d1e6efbc5d6c9f3d7c8fbb
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1e6efbc5d6c9f3d7c8fbb
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: tempTarget(2025-09-22 20:56:23 +0000)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: tempTarget(2025-09-22 19:56:19 +0000)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 21:06:37 +0000, 0.2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
SMB-Basal Manager initialized: isEnabled=true
SMB-Basal Manager starting...
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.0998777167200338944
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09971958177108733952
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 18min, IOB: 0.09872912100502982656
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08566376601237438464
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.0398676450723728896
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 78min, IOB: 0.1206981037288598528
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.1029237674716867584
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 96min, IOB: 0.09559470652534972416
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09096033638007000064
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08342990452199487488
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07669373416260364288
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.0675818121935579648
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 123min, IOB: 0.06375196028470073344
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.1161421781172895744
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 148min, IOB: 0.0828795864030573568
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 159min, IOB: 0.008431883305169379328
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016413993503404179456
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016348131239088451584
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016286607277478647808
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03853715482137967616
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.008141975170540606464
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005915205260536526848
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.0404607004191600384
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.03000832980214935552
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 228min, IOB: 0.02945691500782882816
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 233min, IOB: 0.02240756205006790144
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 243min, IOB: 0.00740947307396191232
  SMB-Basal IOB: 1.3105829296382697472U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3105829296382697472U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:06 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5643318513008345088 U
  Наш Basal IOB: 1.3105829296382697472 U
  Наш Total IOB: 2.874914780939104256 U
  РАЗНИЦА: 2.874914780939104256 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.7%, IOB: 0.086U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.7%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 68.1%, IOB: 0.000U
  SMB: 0.2U, возраст: 78мин, остаток: 60.3%, IOB: 0.121U
  SMB: 0.2U, возраст: 91мин, остаток: 51.5%, IOB: 0.103U
  SMB: 0.2U, возраст: 96мин, остаток: 47.8%, IOB: 0.096U
  SMB: 0.2U, возраст: 100мин, остаток: 45.5%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5643318513008345088
  Custom Basal IOB: 1.3105829296382697472
  Custom Total IOB: 2.874914780939104256
  Difference: 2.874914780939104256
SMB-Basal: Custom IOB saved for middleware - Total: 2.874914780939104256U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.874914780939104, calculationTime=1758593886.8953838
SMB-Basal: Middleware installed successfully
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.0998699500082834432
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09970807209201047552
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 18min, IOB: 0.0987060859223904256
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08560692756225127424
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.03983719764653650944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 78min, IOB: 0.120576014769418752
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10280938926965522432
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 96min, IOB: 0.09548452177891043328
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09085307881234511872
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08332783580377724928
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.0765967432687149056
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.0674923239162153472
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 123min, IOB: 0.0636658397915288576
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.11598039490126372864
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 148min, IOB: 0.08275172467118012416
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 159min, IOB: 0.008418093711182976
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016386946891663501312
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016321163003939723264
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016259712346874413056
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.038463636143419648
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.008125702991614844928
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.00590227108616088064
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.04036185744510125056
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.02993333695087168
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 228min, IOB: 0.02937889492939609088
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 233min, IOB: 0.02234512545812203008
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 243min, IOB: 0.0073863306469524224
  SMB-Basal IOB: 1.3096245994946289664U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3096245994946289664U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:11 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.56254917181978112 U
  Наш Basal IOB: 1.3096245994946289664 U
  Наш Total IOB: 2.8721737713144100864 U
  РАЗНИЦА: 2.8721737713144100864 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.6%, IOB: 0.086U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.7%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 68.0%, IOB: 0.000U
  SMB: 0.2U, возраст: 78мин, остаток: 60.3%, IOB: 0.121U
  SMB: 0.2U, возраст: 91мин, остаток: 51.4%, IOB: 0.103U
  SMB: 0.2U, возраст: 96мин, остаток: 47.7%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.4%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.56254917181978112
  Custom Basal IOB: 1.3096245994946289664
  Custom Total IOB: 2.8721737713144100864
  Difference: 2.8721737713144100864
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8721737713144100864
  Difference: 2.8721737713144100864
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connecting>, data = ["kCBAdvDataServiceUUIDs": <__NSArrayM 0x117cef060>(
FEBC
)
, "kCBAdvDataTimestamp": 780286692.071629, "kCBAdvDataManufacturerData": <d00073a5 0204>, "kCBAdvDataIsConnectable": 1, "kCBAdvDataLocalName": DXCMHK, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataRxPrimaryPHY": 161]
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 11 min, isZero: true
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManager(_:didConnect:): <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
didConnect to E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMHK")
Set notify true for <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Ignoring authentication response: 034c8b39531bf27366567c968e8c5f54c5
Observed authenticated session. enabling notifications for control characteristic.
Set notify true for <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Received control response: 4e00d9110c00520a00010600be00060af3000f
Listening for backfill responses
Set notify true for <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [-]: New sensor DXCMHK discovered, activated at 2025-09-13 22:34:54 +0000
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor didRead G7GlucoseMessage(glucose:Optional(190), sequence:2642 glucoseIsDisplayOnly:false state:ok messageTimestamp:791001 age:6, data:4e00d9110c00520a00010600be00060af3000f)
Stopping scan
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 02:13:48 +0000
Received control response: 3200014b000000600035eb070003010275ec0700
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms 3200014b000000600035eb070003010275ec0700
Received control response: ea00030100000000000200000045ffffff
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms ea00030100000000000200000045ffffff
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.09986200502626598912
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09969641974452529152
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 18min, IOB: 0.09868301898181287936
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08555040637290189824
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.039806935019240192
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 78min, IOB: 0.1204547613756583936
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10269581751544383488
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 96min, IOB: 0.09537512205536382976
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.0907465901688562176
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08322650585688143872
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07650046015505334272
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06740349568078297088
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06358035731551148032
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.11581981812884201472
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08262483574575118336
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 159min, IOB: 0.00840441014157889024
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016360108508721125376
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016294402434769360896
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.01623302455569958912
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03839069757340006912
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.008109560187073150976
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.00588944126505531904
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.04026382678320141312
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.0298589627952680704
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 228min, IOB: 0.02930152504034499584
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 233min, IOB: 0.02228321390981991936
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00736338701841270272
  SMB-Basal IOB: 1.3086704813550594048U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3086704813550594048U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:16 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5607791093562349568 U
  Наш Basal IOB: 1.3086704813550594048 U
  Наш Total IOB: 2.8694495907112943616 U
  РАЗНИЦА: 2.8694495907112943616 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.6%, IOB: 0.086U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.6%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 78мин, остаток: 60.2%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.3%, IOB: 0.103U
  SMB: 0.2U, возраст: 96мин, остаток: 47.7%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.4%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5607791093562349568
  Custom Basal IOB: 1.3086704813550594048
  Custom Total IOB: 2.8694495907112943616
  Difference: 2.8694495907112943616
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8694495907112943616
  Difference: 2.8694495907112943616
  Show Custom: true
SMB-Basal: Settings changed - smbBasalEnabled=false, current isEnabled=true
SMB-Basal: Disabling and stopping SMB-basal system
SMB-Basal: Middleware removed
SMB-Basal: Settings changed - smbBasalEnabled=true, current isEnabled=false
SMB-Basal: Enabling and starting SMB-basal system
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.09985949824067907584
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09969276702098284544
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09867583827404306432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08553289061780529152
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.03979755970934852608
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 78min, IOB: 0.12041721634638077952
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10266065581003833344
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 96min, IOB: 0.09534125364988327936
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09071362394726738944
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08319513806100760576
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07647065582496336896
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06737600041542688768
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06355389824134172672
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.1157701169874338816
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08258556544665728
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 159min, IOB: 0.008400175497516900352
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016351802909932302336
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016286120924990117888
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016224765575961090048
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.0383681283274710528
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.00810456534652506112
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005885471821142099968
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.0402334998822326784
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.0298359547867510016
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02927759160515809792
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02226406327922416384
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007356290886543524864
  SMB-Basal IOB: 1.3083760990464401408U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3083760990464401408U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:18 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5602311094367076352 U
  Наш Basal IOB: 1.3083760990464401408 U
  Наш Total IOB: 2.868607208483147776 U
  РАЗНИЦА: 2.868607208483147776 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.5%, IOB: 0.086U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.6%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 78мин, остаток: 60.2%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.3%, IOB: 0.103U
  SMB: 0.2U, возраст: 96мин, остаток: 47.7%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.4%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5602311094367076352
  Custom Basal IOB: 1.3083760990464401408
  Custom Total IOB: 2.868607208483147776
  Difference: 2.868607208483147776
SMB-Basal: Custom IOB saved for middleware - Total: 2.868607208483147776U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.8686072084831484, calculationTime=1758593898.468157
SMB-Basal: Middleware installed successfully
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x10924a140, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = disconnected>
Sensor disconnected: wasRemoteDisconnect:true
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor disconnected: suspectedEndOfSession=false
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Not connecting to unnamed peripheral: <CBPeripheral: 0x12e4e4fc0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = (null), mtu = 23, state = disconnected>
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.09985382258247200768
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09968453662599815168
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.098659743053404672
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08549376412750296064
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.03977662234461382144
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 78min, IOB: 0.12033340156099375104
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10258216964301078528
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09526565712161712128
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09064004278959238144
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08312512704037705728
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.0764041363480809472
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.0673146368905761792
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06349484824163697664
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.1156591992529534976
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08249793281216690176

  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 159min, IOB: 0.008390726167720822784
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016333269607030964224
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016267641388841179136
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016206336326888800256
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03831777165383715328
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.008093421156965752832
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005876615958749952
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.040165845434141696
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.02978462843713432576
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02922420305976899072
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02222134541164402688
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00734046352605748224
  SMB-Basal IOB: 1.3077144013027022848U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3077144013027022848U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:21 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5590079085637779456 U
  Наш Basal IOB: 1.3077144013027022848 U
  Наш Total IOB: 2.8667223098664802304 U
  РАЗНИЦА: 2.8667223098664802304 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.9%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.5%, IOB: 0.085U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.6%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 78мин, остаток: 60.2%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.3%, IOB: 0.103U
  SMB: 0.2U, возраст: 97мин, остаток: 47.6%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.3%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5590079085637779456
  Custom Basal IOB: 1.3077144013027022848
  Custom Total IOB: 2.8667223098664802304
  Difference: 2.8667223098664802304
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8667223098664802304
  Difference: 2.8667223098664802304
  Show Custom: true
Scanning for peripherals and listening for connection events
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 10 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 12min, IOB: 0.09984534045679968256
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09967233370416248832
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09863608657548326912
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08543658784158513152
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 52min, IOB: 0.03974603878171824128
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.12021105226538819584
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10246761898402598912
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.0951553308313797632
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.0905326618037833216
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.0830229621551382528
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.0763070714754130944
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.0672251015346348032
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06340869094515457024
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.11549737071765049344
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.0823700936313981952
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008376942357808018432
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.0163062351705433088
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016240685416313270272
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016179453740162619392
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03824432866559206912
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.00807716868274950144
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005863702035356855296
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.04006720208546044416
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 222min, IOB: 0.029709794263472128
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02914636776889679872
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02215907096899599616
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00731739386160889856
  SMB-Basal IOB: 1.3067529723059689472U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3067529723059689472U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:26 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5572226867206754304 U
  Наш Basal IOB: 1.3067529723059689472 U
  Наш Total IOB: 2.8639756590266443776 U
  РАЗНИЦА: 2.8639756590266443776 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 12мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.4%, IOB: 0.085U
  Bolus: 0.05U, возраст: 52мин, остаток: 79.5%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.8%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 60.1%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.2%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.6%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.3%, IOB: 0.091U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5572226867206754304
  Custom Basal IOB: 1.3067529723059689472
  Custom Total IOB: 2.8639756590266443776
  Difference: 2.8639756590266443776
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8639756590266443776
  Difference: 2.8639756590266443776
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09983676989587083264
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09966011328290689024
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09861263213219213312
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.0853802800139062272
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03971593431326024704
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.12009071243219296256
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10235497298814734336
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.095046846985522176
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09042707876287694848
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08292251482282313728
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07621164409731902464
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06713708356396801024
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06332399656209154048
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 129min, IOB: 0.11533829774069250048
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08224445032231000064

  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008363396406041249792
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.01627966752119330816
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016214194916251834368
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.016153035396167624704
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03817216770776409088
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.00806120088039326208
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005851015809894145024
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03997031271584284672
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.029636293084818176
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02906992539209775104
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02209791564951679744
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007294742932123155456
  SMB-Basal IOB: 1.3058027659863539712U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3058027659863539712U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:31 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.555467196328183808 U
  Наш Basal IOB: 1.3058027659863539712 U
  Наш Total IOB: 2.8612699623145377792 U
  РАЗНИЦА: 2.8612699623145377792 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.4%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.4%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 60.0%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.2%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.5%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.2%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.555467196328183808
  Custom Basal IOB: 1.3058027659863539712
  Custom Total IOB: 2.8612699623145377792
  Difference: 2.8612699623145377792
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8612699623145377792
  Difference: 2.8612699623145377792
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09982792008738904064
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09964760137976922112
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09858884972794617856
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08532356152228262912
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03968562480844688384
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11996964565689720832
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10224166978688172032
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.094937738231536128
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09032089220707666944
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08282150027108685824
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07611568352477836288
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06704858070956849152
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06323883838088384512
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11517836143597152256
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08211814418502354944
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008349780089043564544
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.01625296213634873344
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016187567120790704128
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 161min, IOB: 0.01612648016823532544
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03809964658325024768
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 193min, IOB: 0.008045154347375571968
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005838268537802561536
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03987297182691218432
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02956245174938655744
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.0289931357158062592
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02203648717083862528
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007271994988785743872
  SMB-Basal IOB: 1.3048481784729397248U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3048481784729397248U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:36 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.553701512350114816 U
  Наш Basal IOB: 1.3048481784729397248 U
  Наш Total IOB: 2.8585496908230545408 U
  РАЗНИЦА: 2.8585496908230545408 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.3%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.4%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 60.0%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.1%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.5%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.2%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.553701512350114816
  Custom Basal IOB: 1.3048481784729397248
  Custom Total IOB: 2.8585496908230545408
  Difference: 2.8585496908230545408
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8585496908230545408
  Difference: 2.8585496908230545408
  Show Custom: true
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09981883490475388928
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09963486089176072192
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.0985648608169723904
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.0852667251467177472
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03965526684602374656
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11984847814853783552
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.10212829562971916288
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09482856918431430656
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.0902146516694454784
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 106min, IOB: 0.08272044132634048512
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.0760196864747639808
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06696005114487621632
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.0631536572838460416
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11501838989585901568
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.0819918293542592512
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008336163934939570176
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016226257343703461888
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016160939956087171072
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.016099925606973927424
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.03802714106042579968
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.008029112237681478656
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005825526289959503872
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03977568408648758272
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02948865311267815424
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02891639694258727936
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.0219751041219566592
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007249268049215772672
  SMB-Basal IOB: 1.3038924315504091136U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3038924315504091136U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:41 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5519347714608861184 U
  Наш Basal IOB: 1.3038924315504091136 U
  Наш Total IOB: 2.855827203011295232 U
  РАЗНИЦА: 2.855827203011295232 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.3%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.3%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.6%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.9%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.1%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.4%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.1%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5519347714608861184
  Custom Basal IOB: 1.3038924315504091136
  Custom Total IOB: 2.855827203011295232
  Difference: 2.855827203011295232
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.855827203011295232
  Difference: 2.855827203011295232
  Show Custom: true
centralManager(_:didConnect:): <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109248b60, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
Applying configuration
didReadRSSI: -70
didDiscoverServices
Discovered service: <CBService: 0x12e8b1f40, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
Session Established
msgSequenceNumber: 3
Setting podState transport state to ## MessageTransportState
eapSeq: 1363
msgSeq: 3
nonceSeq: 0
messageNumber: 6
Scheduling session Post-connect status fetch
Delegate configuration notified
Peripheral configuration completed
======================== Post-connect status fetch ===========================
Send(Hex): 17a8db2d14030e010780f7
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d14030e010780f7
Recv(Hex): 17a8db2d180a1d280415180040453fff01d7
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d180a1d280415180040453fff01d7
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:73h51m, reservoirLevel:50+, insulinDelivered:104.50, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:3, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно]
------------------------ Post-connect status fetch ---------------------------
Start of idle at Optional(2025-09-23 02:18:43 +0000)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.0998095254552374272
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09962190727332204544
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.098540694229856256
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08520983875117492224
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03962489665705587712
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11972735440968351744
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 91min, IOB: 0.1020149856996677632
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09471947000440999936
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 100min, IOB: 0.09010848381407911936
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08261945846796613632
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07592376738644980736
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06687160040047284224
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06306855480753995776
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11485857380090208256
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08186565637777457152
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008322564171329468416
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016199584969596104704
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 161min, IOB: 0.016134345155938717696
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.016073403359629666304
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 186min, IOB: 0.037954737542646528
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.00801309366795062272
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 206min, IOB: 0.005812804250160390144
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03967856541934500352
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02941498511004585472
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02883980050961536
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02191383964211692032
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00722658919228447232
  SMB-Basal IOB: 1.3029365993784111104U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3029365993784111104U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:46 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5501690805262512128 U
  Наш Basal IOB: 1.3029365993784111104 U
  Наш Total IOB: 2.8531056799046623232 U
  РАЗНИЦА: 2.8531056799046623232 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.2%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.2%, IOB: 0.040U
  Bolus: 0U, возраст: 68мин, остаток: 67.6%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.9%, IOB: 0.120U
  SMB: 0.2U, возраст: 91мин, остаток: 51.0%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.4%, IOB: 0.095U
  SMB: 0.2U, возраст: 100мин, остаток: 45.1%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5501690805262512128
  Custom Basal IOB: 1.3029365993784111104
  Custom Total IOB: 2.8531056799046623232
  Difference: 2.8531056799046623232
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8531056799046623232
  Difference: 2.8531056799046623232
  Show Custom: true
[u 23EFC09E-EB1D-4372-8AEB-E82F84085C0E:m (null)] [com.swiftkey.SwiftKeyApp.Keyboard(4.2.5)] RB query for the extension process state failed with error: Error Domain=RBSServiceErrorDomain Code=1 "Client not entitled" UserInfo={RBSEntitlement=com.apple.runningboard.process-state, NSLocalizedFailureReason=Client not entitled, RBSPermanent=false}
App is being debugged, do not track this hang
Hang detected: 0.94s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.32s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 1.13s (debugger attached, not reporting)
AddGlucoseStateModel.swift - add() - 19 DEV: AddGlucose: start units=mmol/L input=12
AddGlucoseStateModel.swift - add() - 30 DEV: AddGlucose: converted to mg/dL=216 at 2025-09-23 02:18:47 +0000
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x10924a300, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataLocalName": DXCMXn, "kCBAdvDataIsConnectable": 1, "kCBAdvDataManufacturerData": <d000c93d 0004>, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x12e3293e0>(
FEBC
)
, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataTimestamp": 780286731.448161]
Not connecting to peripheral: DXCMXn
AddGlucoseStateModel.swift - add() - 55 DEV: AddGlucose: stored locally id=B80BA6D8-C729-4C85-A0BE-C7779D89D20F
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/entries.json
AddGlucoseStateModel.swift - add() - 58 DEV: AddGlucose: requested NS upload
AddGlucoseStateModel.swift - add() - 60 DEV: AddGlucose: requested HealthKit save
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09980000488385062912
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09960875832912422912
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09851638210311241728
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 44min, IOB: 0.08515297617561511936
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03959455359203299328
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11960643093008912384
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10190188627942488064
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.0946105815002131456
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.09000252564380314624
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08251868197504627712
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07582804997939104768
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 120min, IOB: 0.06678334253075385344
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06298364067601747968
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.1146991191688720384
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08173978781802625024
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008308998315438246912
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016172979368287522816
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.016107816974515011584
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.01604694758676043776
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03788252922672707072
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007997119253037275136
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.00580011878466850816
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03958174070441765888
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02934154245718252032
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02876344487196630016
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02185277246055591168
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007203987545593772032
  SMB-Basal IOB: 1.3019818821620277248U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3019818821620277248U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:51 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.548406719134522368 U
  Наш Basal IOB: 1.3019818821620277248 U
  Наш Total IOB: 2.8503886012965500928 U
  РАЗНИЦА: 2.8503886012965500928 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 44мин, остаток: 85.2%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.2%, IOB: 0.040U
  Bolus: 0U, возраст: 69мин, остаток: 67.5%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.8%, IOB: 0.120U
  SMB: 0.2U, возраст: 92мин, остаток: 51.0%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  SMB: 0.2U, возраст: 101мин, остаток: 45.0%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.548406719134522368
  Custom Basal IOB: 1.3019818821620277248
  Custom Total IOB: 2.8503886012965500928
  Difference: 2.8503886012965500928
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8503886012965500928
  Difference: 2.8503886012965500928
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09979025349695281152
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09959538651133288448
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09849187272019161088
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.0850960151444099072
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03956417235022992384
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11948544714363000832
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10178875358067939328
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09450166893232125952
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08989654872019610624
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08241789455668918272
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07573232785161361408
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06669508719600115712
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06289873175152577536
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11453968207181215744
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.0816139521275122688
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008295437097018800128
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016146383133606989824
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.01608129817256920064
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.016020501205238781952
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0378103602693418496
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007981154513450139648
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.0057874425087106048
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03948500088097397248
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.0292681665727475712
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02868716514111556608
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02179177069143203328
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007181414285781784576
  SMB-Basal IOB: 1.301025816802092032U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.301025816802092032U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:18:56 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5466438886270855168 U
  Наш Basal IOB: 1.301025816802092032 U
  Наш Total IOB: 2.8476697054291775488 U
  РАЗНИЦА: 2.8476697054291775488 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 85.1%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.1%, IOB: 0.040U
  Bolus: 0U, возраст: 69мин, остаток: 67.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.7%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.9%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  SMB: 0.2U, возраст: 101мин, остаток: 44.9%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5466438886270855168
  Custom Basal IOB: 1.301025816802092032
  Custom Total IOB: 2.8476697054291775488
  Difference: 2.8476697054291775488
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8476697054291775488
  Difference: 2.8476697054291775488
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09978025932038637568
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 14min, IOB: 0.09958177553084618752
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09846713651962687488
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.0850388874595193856
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03953371657729672704
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11936425841348460544
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10167545238752423936
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.0943926021410398208
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08979042639920412672
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08231697578135443456
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 112min, IOB: 0.07563648663327880192
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06660672895919335424
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06281372659962368
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11438007205531930624
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08148799902450873344
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.0082818643224200704
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 161min, IOB: 0.016119764507130916864
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.016054757084218535936
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.015994032635732422656
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0377381445226336768
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007965180394232961024
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005774760295693169664
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 220min, IOB: 0.03938823054349793792
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02919476992875704832
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02861087034052849664
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.0217307615910165248
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.007158842504656569344
  SMB-Basal IOB: 1.300068608703762432U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.300068608703762432U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:01 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5448784824727246848 U
  Наш Basal IOB: 1.300068608703762432 U
  Наш Total IOB: 2.8449470911764871168 U
  РАЗНИЦА: 2.8449470911764871168 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 85.0%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.1%, IOB: 0.040U
  Bolus: 0U, возраст: 69мин, остаток: 67.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.7%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.8%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.2%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.9%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5448784824727246848
  Custom Basal IOB: 1.300068608703762432
  Custom Total IOB: 2.8449470911764871168
  Difference: 2.8449470911764871168
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8449470911764871168
  Difference: 2.8449470911764871168
  Show Custom: true
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:19:05.163Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:19:05.166Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09977005492132067328
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09956796959006982144
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09844225349171607552
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.0849817772706778112
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03950328442348592128
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11924325515046936576
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10156234766558302208
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.094283732440214528
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08968450050339001344
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08221625070081414144
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07554083501367774208
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06651855239858861056
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06272889899544239104
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.1142208031633240064
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.08136233413312724992
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008268323700681091072
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.016093209209769488384
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.01602827918063130624
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.015967627115834437632
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03766611453181871616
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.00794924833352884736
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005762112982295209984
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03929174128123936768
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.0291215888522185728
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02853480612445835264
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02166994159351702784
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00713634487512862208
  SMB-Basal IOB: 1.2991119460487847936U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2991119460487847936U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:06 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5431161876430221312 U
  Наш Basal IOB: 1.2991119460487847936 U
  Наш Total IOB: 2.8422281336918069248 U
  РАЗНИЦА: 2.8422281336918069248 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 85.0%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 79.0%, IOB: 0.040U
  Bolus: 0U, возраст: 69мин, остаток: 67.3%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.6%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.8%, IOB: 0.102U
  SMB: 0.2U, возраст: 97мин, остаток: 47.1%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.8%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5431161876430221312
  Custom Basal IOB: 1.2991119460487847936
  Custom Total IOB: 2.8422281336918069248
  Difference: 2.8422281336918069248
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8422281336918069248
  Difference: 2.8422281336918069248
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09975963325673017344
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09955395868991219712
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09841720453935640576
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.0849246388852982784
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03947285146589896704
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11912233976872464384
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10144934808007555072
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09417497187420530688
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08957868543167761408
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08211563788186523648
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07544529563284576256
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06643048616535839744
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 124min, IOB: 0.06264418028623886336
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11406174645788772352
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 149min, IOB: 0.081236855627509248
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008254804254677686272
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.016066695712370700288
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.016001842995212292096
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.01594126323745757184
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03759421183583286272
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.00793334539618086912
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005749490293539151872
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.0391954546395697408
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02904856382989472768
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02845891060699382272
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02160926119552619264
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 244min, IOB: 0.00711390306779798016
  SMB-Basal IOB: 1.2981557094012870656U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2981557094012870656U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:11 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5413555811086374912 U
  Наш Basal IOB: 1.2981557094012870656 U
  Наш Total IOB: 2.8395112905099245568 U
  РАЗНИЦА: 2.8395112905099245568 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.8%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.9%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 78.9%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 67.2%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.6%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.7%, IOB: 0.101U
  SMB: 0.2U, возраст: 97мин, остаток: 47.1%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.8%, IOB: 0.090U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5413555811086374912
  Custom Basal IOB: 1.2981557094012870656
  Custom Total IOB: 2.8395112905099245568
  Difference: 2.8395112905099245568
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8395112905099245568
  Difference: 2.8395112905099245568
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09974899319363817472
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09953974097903904768
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 19min, IOB: 0.09839198559763492864
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08486746171344024576
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03944241201094994944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11900148930857228288
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10133643209035231232
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 97min, IOB: 0.09406629968170498048
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08947296096831922176
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08201511807802974208
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07534985019483543552
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06634251337059984384
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06255955421550027776
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11390287139129298944
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08111153934505844736
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008241303377503690752
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.016040218901563021312
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.01597544342937212928
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.015914935915838181376
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0375224225243158272
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007917468502690971648
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.0057368897807039488
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.0390993518972466688
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.02897568065663200256
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 229min, IOB: 0.02838316900636459008
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 234min, IOB: 0.02154870856552259584
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.007091512695396851712
  SMB-Basal IOB: 1.297199509698178048U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.297199509698178048U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:16 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.539596327392118784 U
  Наш Basal IOB: 1.297199509698178048 U
  Наш Total IOB: 2.836795837090296832 U
  РАЗНИЦА: 2.836795837090296832 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.9%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 78.9%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 67.2%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.5%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.7%, IOB: 0.101U
  SMB: 0.2U, возраст: 97мин, остаток: 47.0%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.7%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.539596327392118784
  Custom Basal IOB: 1.297199509698178048
  Custom Total IOB: 2.836795837090296832
  Difference: 2.836795837090296832
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.836795837090296832
  Difference: 2.836795837090296832
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.0997381269752196096
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09952530589558157312
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09836657747653081088
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08481020144597988352
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03941194243733559808
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 79min, IOB: 0.11888060978379798528
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.101223511830397952
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09395763128187731968
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.089367244816794112
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08191461302954789888
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07525442437877188608
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06625456549812094976
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.0624749548680175104
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11374405420046471168
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08098628762876614656
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 160min, IOB: 0.008227810546177625088
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.016013758140065769472
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.015949059905968746496
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.015888624630079811584
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03745069061829192704
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007901605271281185792
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005724301614907222016
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03900335806969844736
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.0289028824617686272
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.0283075222127088896
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02148823644108356096
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.00706915627638573568
  SMB-Basal IOB: 1.296242513613509632U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.296242513613509632U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:21 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5378370577356222464 U
  Наш Basal IOB: 1.296242513613509632 U
  Наш Total IOB: 2.8340795713491318784 U
  РАЗНИЦА: 2.8340795713491318784 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.8%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 78.8%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 67.1%, IOB: 0.000U
  SMB: 0.2U, возраст: 79мин, остаток: 59.4%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.6%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 47.0%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.7%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5378370577356222464
  Custom Basal IOB: 1.296242513613509632
  Custom Total IOB: 2.8340795713491318784
  Difference: 2.8340795713491318784
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8340795713491318784
  Difference: 2.8340795713491318784
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 9 min, isZero: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 13min, IOB: 0.09972704679564156928
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09951066941091852288
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09834100775787556864
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08475291930219262976
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 53min, IOB: 0.03938147528299287552
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11875983003651688448
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10111070759863242752
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09384908242298370048
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08926164956888484864
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.0818142297607056384
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07515911978610712576
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06616673617052039168
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06239047229508168704
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11358546391883341824
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08086123374330144768
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.00821434011430888448
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.01598734157612128256
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.01592272049099388928
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.01586235736924896256
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03737909239532905472
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007885772568534862848
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005711739177649246208
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03890757517344946688
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 223min, IOB: 0.0288302466066175744
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02823205060294426112
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02142790906732611072
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.007046857554811359232
  SMB-Basal IOB: 1.2952860312937443328U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2952860312937443328U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:26 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5360796465485234176 U
  Наш Basal IOB: 1.2952860312937443328 U
  Наш Total IOB: 2.8313656778422677504 U
  РАЗНИЦА: 2.8313656778422677504 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 13мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.100U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.8%, IOB: 0.085U
  Bolus: 0.05U, возраст: 53мин, остаток: 78.8%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 67.1%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.4%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.6%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.9%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.6%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5360796465485234176
  Custom Basal IOB: 1.2952860312937443328
  Custom Total IOB: 2.8313656778422677504
  Difference: 2.8313656778422677504
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8313656778422677504
  Difference: 2.8313656778422677504
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09971575154137030656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09949582972428077056
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09831527252336398336
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08469560512473486336
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03935100508872512512
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.1186391280637845504
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10099799875492169728
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09374063321266188288
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08915615585554697216
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08171394983201393664
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07506391888875326464
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.0660790092085942272
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06230609092366544896
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 130min, IOB: 0.11342707128403935232
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.0807363545452969984
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008200889585105332224
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015960964312380889088
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.015896420301262057472
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.0158361292634069504
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0373076145346889472
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007869967445624168448
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005699200124332261376
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.0388119852854809088
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02875775949204699136
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02815674002688487936
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.0213677151189581696
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.007024612331746471936
  SMB-Basal IOB: 1.2943296949647607808U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2943296949647607808U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:31 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5343237723936718848 U
  Наш Basal IOB: 1.2943296949647607808 U
  Наш Total IOB: 2.8286534673584326656 U
  РАЗНИЦА: 2.8286534673584326656 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.7%, IOB: 0.085U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.7%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 67.0%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.3%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.5%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.9%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.6%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5343237723936718848
  Custom Basal IOB: 1.2943296949647607808
  Custom Total IOB: 2.8286534673584326656
  Difference: 2.8286534673584326656
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8286534673584326656
  Difference: 2.8286534673584326656
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09970423331319904256
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09948077624654450688
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09828935291201343488
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08463821601499969536
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03932050901127535616
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11851841314226894848
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10088530052586438656
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09363220206163331072
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08905068429954724864
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08161369777244589056
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07496875002456295424
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06599131855984241664
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06222174721380210688
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11326875700702236672
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08061155594300930048
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.00818744882177696256
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015934606469449363456
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.015870139515382157312
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 162min, IOB: 0.015809920545411641344
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0372362031389450496
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 194min, IOB: 0.007854177982976518144
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005686674995778418688
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.0387165162691446272
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02868536641177855488
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02808153363637040128
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.0213076091507191936
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.00700240380558639104
  SMB-Basal IOB: 1.293372827242605568U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.293372827242605568U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:36 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5325681147913508864 U
  Наш Basal IOB: 1.293372827242605568 U
  Наш Total IOB: 2.8259409420339564544 U
  РАЗНИЦА: 2.8259409420339564544 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.6%, IOB: 0.085U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.6%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 66.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.3%, IOB: 0.119U
  SMB: 0.2U, возраст: 92мин, остаток: 50.4%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.8%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.5%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5325681147913508864
  Custom Basal IOB: 1.293372827242605568
  Custom Total IOB: 2.8259409420339564544
  Difference: 2.8259409420339564544
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8259409420339564544
  Difference: 2.8259409420339564544
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09969249788974938112
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.0994655163577276416
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09826326122342248448
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08458077846792702976
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03929000109925417984
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11839774068798435328
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10077266459953416192
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09352383868469276672
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.08894528324933236736
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 107min, IOB: 0.08151351952403608576
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.0748736567949984256
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06590370438630532096
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06213747978939623424
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11311059357088172032
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08048689504061964288
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008174023972581313536
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.0159082801038461952
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.015843890154560909312
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015783743203443724288
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.03716489085136032768
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007838411396810273792
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005674169514242832384
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03862121172134358016
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02861310042183387648
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02800646576390659584
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02124761859582176512
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006980242107578238976
  SMB-Basal IOB: 1.292415827475997696U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.292415827475997696U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:41 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.53081347917319168 U
  Наш Basal IOB: 1.292415827475997696 U
  Наш Total IOB: 2.823229306649189376 U
  РАЗНИЦА: 2.823229306649189376 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.6%, IOB: 0.085U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.6%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 66.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.2%, IOB: 0.118U
  SMB: 0.2U, возраст: 92мин, остаток: 50.4%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.8%, IOB: 0.094U
  SMB: 0.2U, возраст: 101мин, остаток: 44.5%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.53081347917319168
  Custom Basal IOB: 1.292415827475997696
  Custom Total IOB: 2.823229306649189376
  Difference: 2.823229306649189376
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.823229306649189376
  Difference: 2.823229306649189376
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09968054070760398848
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09945004395237842944
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09823698661037330432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08452326786096499712
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03925946824341011456
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11827705865146017792
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 92min, IOB: 0.10066004234432473088
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09341549627845888
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 101min, IOB: 0.0888399071714287616
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08141337179555708928
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.0747785980949692928
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06581612880226999296
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06205325220657625088
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.1129525125585321984
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08036231787863885824
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008160609224689844224
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.01588197381605753856
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 162min, IOB: 0.0158176608525612032
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015757585902388514816
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 187min, IOB: 0.0370936467711687168
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007822660853782177792
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 207min, IOB: 0.005661678257638115328
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03852603030042000384
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02854093017122059264
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02793150383459672064
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02118771741603824384
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006958117613488300032
  SMB-Basal IOB: 1.2914580869439920128U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2914580869439920128U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:46 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.52905910817099776 U
  Наш Basal IOB: 1.2914580869439920128 U
  Наш Total IOB: 2.8205171951149897728 U
  РАЗНИЦА: 2.8205171951149897728 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.5%, IOB: 0.085U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.5%, IOB: 0.039U
  Bolus: 0U, возраст: 69мин, остаток: 66.8%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.1%, IOB: 0.118U
  SMB: 0.2U, возраст: 92мин, остаток: 50.3%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.7%, IOB: 0.093U
  SMB: 0.2U, возраст: 101мин, остаток: 44.4%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.52905910817099776
  Custom Basal IOB: 1.2914580869439920128
  Custom Total IOB: 2.8205171951149897728
  Difference: 2.8205171951149897728
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8205171951149897728
  Difference: 2.8205171951149897728
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - updateUpdateFinished(_:) - 235 WARN: error("Loop recommendation time out or got error. Trying to loop right now.")
APSManager.swift - loop() - 161 DEV: Starting loop
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
APSManager.swift - determineBasal() - 244 DEV: Start determine basal
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
OpenAPS.swift - makeProfiles(useAutotune:) - 190 DEV: Start makeProfiles
OpenAPS.swift - determineBasal(currentTemp:clock:) - 34 DEV: Start determineBasal
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.0996691607315729408
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09943538566984175616
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09821225523603949568
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08446943077031090176
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03923089819156000768
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11816421505061564416
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10055475545861388288
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.0933142175473888256
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08874140550425580544
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08131976352698515456
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07468975157388273664
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06573428249157470208
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06197453733180788736
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11280478488181577728
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.0802459167290671104
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.00814807586761135104
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015857396176745476096
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015793155176053981184
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015733147528949190656
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.03702709680850799616
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.00780794895104147456
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005650012071057519616
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03843714910404407296
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02847353914688096768
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02786151187737582592
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02113179194594153984
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006937465338253545472
  SMB-Basal IOB: 1.2905596678154344448U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2905596678154344448U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:51 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5274190506877949952 U
  Наш Basal IOB: 1.2905596678154344448 U
  Наш Total IOB: 2.81797871850322944 U
  РАЗНИЦА: 2.81797871850322944 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.5%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.5%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.8%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.1%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.3%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.7%, IOB: 0.093U
  SMB: 0.2U, возраст: 102мин, остаток: 44.4%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5274190506877949952
  Custom Basal IOB: 1.2905596678154344448
  Custom Total IOB: 2.81797871850322944
  Difference: 2.81797871850322944
SMB-Basal: Custom IOB saved for middleware - Total: 2.81797871850322944U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.8179787185032303, calculationTime=1758593991.604025
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09966844434810279936
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09943446502585862144
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09821070700529231872
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08446606986159212544
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.0392291150375147008
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11815717466798342144
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10054818719762280448
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.0933078995587989504
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08873526088725646336
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08131392436051692544
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07468420960002725888
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.06572917736540622848
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06196962760639942656
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11279557080482770944
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.080238657095012864
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008147294226407558144
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015855863403218522112
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015791626891606202368
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015731623442899456
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.03702294685012050944
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007807031566206558208
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005649284650342401024
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03843160752942253056
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.0284693375128274944
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02785714827110066176
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02112830544301468416
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006936177956657287168
  SMB-Basal IOB: 1.2905086011718402048U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2905086011718402048U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:51 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5273167381660368896 U
  Наш Basal IOB: 1.2905086011718402048 U
  Наш Total IOB: 2.8178253393378770944 U
  РАЗНИЦА: 2.8178253393378770944 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.5%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.5%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.1%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.3%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.7%, IOB: 0.093U
  SMB: 0.2U, возраст: 102мин, остаток: 44.4%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5273167381660368896
  Custom Basal IOB: 1.2905086011718402048
  Custom Total IOB: 2.8178253393378770944
  Difference: 2.8178253393378770944
🧮 Custom IOB Update:
  System IOB: 0
  Custom IOB: 2.8178253393378770944
  Difference: 2.8178253393378770944
  Show Custom: true
App is being debugged, do not track this hang
Hang detected: 0.66s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"timestamp":"2025-09-23T02:13:16.227Z","delivered_units":0.050000000000000003,"id":"4cfa9ee5972be3a4f6b7a246f7fb2f9c","_type":"SMB-Basal","duration":0,"automatic":true,"amount":0.050000000000000003},{"timestamp":"2025-09-23T02:13:06.268Z","automatic":true,"delivered_units":0.050000000000000003,"_type":"SMB-Basal","amount":0.050000000000000003,"duration":0,"id":"6ee4eb1e6cd7e1e6ce67a36e67ffa778"},{"duration":0,"timestamp":"2025-09-23T02:11:45.191Z","id":"cb01304a9189e9a5b45f1db98d588341","deliv
OpenAPS: IOB calculation result: [
    {
        "iob": -0.709,
        "activity": -0.0069,
        "basaliob": -0.747,
        "bolusiob": 0.039,
        "netbasalinsulin": -1.8,
        "bolusinsulin": 0.3,
        "time": "2025-0
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: 0
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 0
  Timestamp: 2025-09-23 02:14:16 +0000
  Reason: Warning: currenttemp rate 0.75 != lastTemp rate 0 from pumphistory; canceling temp
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09966595809549105152
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09943127177344561152
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09820534153999683584
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08445443096683377664
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03922294030112275456
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11813279743989202944
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10052544527677861888
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09328602438509017088
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08871398610899580928
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08129370733503875072
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07466502169439384576
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.0657115021297485824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06195262896905281536
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11276366967899420672
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.0802135231659863552
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008144588097173510144
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015850556776974680064
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015786335808079925248
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.01572634689564998656
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.037008579612656256
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007803855587217257472
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005646766365092084736
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03841242333035478016
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02845479207353465856
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02784204227877673984
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02111623594324691456
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006931721437468184576
  SMB-Basal IOB: 1.290310178024389632U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.290310178024389632U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:52 +0000
  Системный IOB: 0 U
  Наш Bolus IOB: 1.5269624930670860288 U
  Наш Basal IOB: 1.290310178024389632 U
  Наш Total IOB: 2.8172726710914756608 U
  РАЗНИЦА: 2.8172726710914756608 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.5%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.4%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.1%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.3%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.6%, IOB: 0.093U
  SMB: 0.2U, возраст: 102мин, остаток: 44.4%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: 0
  Custom Bolus IOB: 1.5269624930670860288
  Custom Basal IOB: 1.290310178024389632
  Custom Total IOB: 2.8172726710914756608
  Difference: 2.8172726710914756608
SMB-Basal: Custom IOB saved for middleware - Total: 2.8172726710914756608U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.8172726710914757, calculationTime=1758593992.906853
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 417 DEV: 🔄 Forced Custom IOB update before JavaScript injection
OpenAPS.swift - getCustomIOBData() - 27 DEV: ❌ Custom IOB data not found in middleware/custom-iob.json
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 429 DEV: ❌ No custom IOB data available, injecting null into JavaScript
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: 🎯 ПРОСТОЕ РЕШЕНИЕ - заменяем только IOB, НЕ трогаем временный базал!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: Custom IOB data not available
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Middleware reason: SMB-Basal Middleware: No changes needed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.7;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.75 to 0.5;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 116;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 128.6
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,21,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,128.6,CSF:,7.564705882352941
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,78,minutes ago; remainingCATime:,6.2,hours;,84% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,13.6,mg/dL per 5m; CI Duration:,1.8,hours; remaining CI (~2h peak):,0,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,13 12 12 11 10 10 9 8 8 7 7 6 5 5 4 3 3 2 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,13.6,mg/dL per 5m; UAM Duration:,1.3,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 415 minIOBPredBG: 358 minZTGuardBG: 220
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 418
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,415,COB:,19,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.4,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,280,bgUndershoot:,-202,zeroTempDuration:,240,zeroTempEffect:,386,carbsReq:,-78
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.75
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,280,,0m 0U/h temp needed; last bolus,54.4m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 100 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 216,
    "tick": "+19",
    "eventualBG": 401,
    "insulinReq": 2.22,
    "reservoir": 23,
    "deliverAt": "2025-09-23T02:19:53.019Z",
    "sensitivityRatio": 0.7,
    "predBGs": {
        "IOB": [
            216,
            233,
            249,
            263,
            277,
            289,
            300,
            310,
            319,
            326,
            332,
            337,
            340,
            344,
            347,
            350,
            353,
            355,
            358,
            360,
            362,
            364,
            366,
            368,
            369,
            371,
            372,
            373,
            375,
            376,
            377,
            378,
            378,
            379,
            380,
            380,
            381,
            381,
            382,
            382,
            382,
            383,
            383,
            383,
            383,
            383,
            384
        ],
        "ZT": [
            216,
            220,
            225,
            230,
            234,
            239,
            244,
            249,
            254,
            259,
            265,
            270,
            275,
            281,
            286,
            292,
            298,
            304,
            309,
            315,
            321,
            327,
            333,
            339,
            345,
            351,
            358,
            364,
            371,
            377,
            384,
            390,
            397,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            216,
            233,
            250,
            266,
            282,
            297,
            311,
            324,
            336,
            348,
            359,
            369,
            379,
            387,
            395,
            401
        ]
    },
    "COB": 19,
    "IOB": -0.709,
    "reason": "COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 3
}
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
APSManager.swift - enactSuggested() - 715 DEV: SMB-basal active: skipping OpenAPS temp basal (pump held at 0 U/h)
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 347 DEV: Enact bolus 0.1, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 1/3: 0.1U
Scheduling session Bolus
======================== Bolus ===========================
APSManager.swift - loopCompleted(error:) - 199 DEV: Loop succeeded
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
Send(Hex): 17a8db2d1c1f1a0e494e532e02002501002000020002170d3f001400030d40000000000000820e
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d1c1f1a0e494e532e02002501002000020002170d3f001400030d40000000000000820e
APSManager.swift - reportEnacted(received:) - 805 DEV: Suggestion enacted. Received: true
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
OpenAPS.swift - determineBasal(currentTemp:clock:) - 34 DEV: Start determineBasal
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.709
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:19:53 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09966511309818304512
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09943018715682777088
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.0982035207190034432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.0844504841861469184
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.039220846558814848
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11812453237966737408
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10051773487355901952
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09327860791533805568
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08870677323712256
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.081286853139933184
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07465851645401307136
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 121min, IOB: 0.0657055097897085952
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06194686603769899008
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11275285452992370688
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08020500241185974272
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008143670691468238848
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015848757778467002368
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015784542079074275328
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015724558094927872
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.03700370910577253376
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.00780277893630495744
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.00564591268502629888
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.0384059201653113088
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02844986140277824512
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02783692164976553984
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02111214466814939904
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.0069302108216868352
  SMB-Basal IOB: 1.2902446167688994816U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2902446167688994816U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:53 +0000
  Системный IOB: -0.709 U
  Наш Bolus IOB: 1.52684239056653312 U
  Наш Basal IOB: 1.2902446167688994816 U
  Наш Total IOB: 2.8170870073354326016 U
  РАЗНИЦА: 3.5260870073354326016 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopFirstNotification notification
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopSecondNotification notification
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.4%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.4%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.1%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.3%, IOB: 0.101U
  SMB: 0.2U, возраст: 98мин, остаток: 46.6%, IOB: 0.093U
  SMB: 0.2U, возраст: 102мин, остаток: 44.4%, IOB: 0.089U
  ... и еще 20 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.709
  Custom Bolus IOB: 1.52684239056653312
  Custom Basal IOB: 1.2902446167688994816
  Custom Total IOB: 2.8170870073354326016
  Difference: 3.5260870073354326016
SMB-Basal: Custom IOB saved for middleware - Total: 2.8170870073354326016U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.8170870073354326, calculationTime=1758593993.249628
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
Recv(Hex): 17a8db2d200a1d6804153802404543ff028a
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d200a1d6804153802404543ff028a
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:73h52m, reservoirLevel:50+, insulinDelivered:104.50, bolusNotDelivered:0.10, lastProgrammingMessageSeqNum:7, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
Болюс
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 05:19:53 4 секунды Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 05:19:53 4 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 858 DEV: Bolus succeeded: 0.1
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 409 DEV: Bolus succeeded on attempt 1/3
PumpHistoryStorage: Automatic bolus 0.1U -> SMB (isSmbBasal: false)
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 02:19:53 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 02:19:53 +0000, endDate: 2025-09-23 02:19:57 +0000, value: 0.1, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
App is being debugged, do not track this hang
Hang detected: 0.56s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"id":"4cfa9ee5972be3a4f6b7a246f7fb2f9c","_type":"SMB-Basal","automatic":true,"amount":0.050000000000000003,"duration":0,"delivered_units":0.050000000000000003,"timestamp":"2025-09-23T02:13:16.227Z"},{"duration":0,"_type":"SMB-Basal","timestamp":"2025-09-23T02:13:06.268Z","automatic":true,"amount":0.050000000000000003,"delivered_units":0.050000000000000003,"id":"6ee4eb1e6cd7e1e6ce67a36e67ffa778"},{"amount":0.050000000000000003,"id":"cb01304a9189e9a5b45f1db98d588341","_type":"SMB-Basal","automat
OpenAPS: IOB calculation result: [
    {
        "iob": -0.709,
        "activity": -0.0069,
        "basaliob": -0.747,
        "bolusiob": 0.039,
        "netbasalinsulin": -1.8,
        "bolusinsulin": 0.3,
        "time": "2025-0
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.709
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:19:53 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.099662477381658624
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09942680617465102336
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09819785002459027456
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 45min, IOB: 0.08443820214979111936
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.0392143314286343936
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.1180988165206817792
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10049374544684222464
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.093255533239460352
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08868433214703081472
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08126552818800760832
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.0746382773455187456
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 122min, IOB: 0.06568686661990201344
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06192893667820877824
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.1127192071784800256
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08017849378726349824
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008140816614651625472
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015843161047918886912
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015778961743273562112
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015718993092253640704
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.0369885572482772736
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.00779942956819684352
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005643257005021884416
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03838569016503203328
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02843452317813790208
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02782099270218556928
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02109941791500302336
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006925511866338584576
  SMB-Basal IOB: 1.2900403717058639872U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2900403717058639872U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:54 +0000
  Системный IOB: -0.709 U
  Наш Bolus IOB: 1.6264687164570120192 U
  Наш Basal IOB: 1.2900403717058639872 U
  Наш Total IOB: 2.9165090881628760064 U
  РАЗНИЦА: 3.6255090881628760064 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 45мин, остаток: 84.4%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.4%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.0%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.2%, IOB: 0.100U
  SMB: 0.2U, возраст: 98мин, остаток: 46.6%, IOB: 0.093U
  ... и еще 21 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.709
  Custom Bolus IOB: 1.6264687164570120192
  Custom Basal IOB: 1.2900403717058639872
  Custom Total IOB: 2.9165090881628760064
  Difference: 3.6255090881628760064
SMB-Basal: Custom IOB saved for middleware - Total: 2.9165090881628760064U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=2.916509088162876, calculationTime=1758593994.3164349
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 417 DEV: 🔄 Forced Custom IOB update before JavaScript injection
OpenAPS.swift - getCustomIOBData() - 27 DEV: ❌ Custom IOB data not found in middleware/custom-iob.json
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 429 DEV: ❌ No custom IOB data available, injecting null into JavaScript
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: 🎯 ПРОСТОЕ РЕШЕНИЕ - заменяем только IOB, НЕ трогаем временный базал!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: Custom IOB data not available
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Middleware reason: SMB-Basal Middleware: No changes needed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.7;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.75 to 0.5;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 116;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 128.6
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,21,m,tempModulus:,29,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,128.6,CSF:,7.564705882352941
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,78,minutes ago; remainingCATime:,6.2,hours;,84% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,13.6,mg/dL per 5m; CI Duration:,1.8,hours; remaining CI (~2h peak):,0,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,13 12 12 11 10 10 9 8 8 7 7 6 5 5 4 3 3 2 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,13.6,mg/dL per 5m; UAM Duration:,1.3,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 415 minIOBPredBG: 358 minZTGuardBG: 220
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 418
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,415,COB:,19,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.4,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,280,bgUndershoot:,-202,zeroTempDuration:,240,zeroTempEffect:,386,carbsReq:,-78
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.75
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,280,,0m 0U/h temp needed; last bolus,54.4m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 100 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 216,
    "tick": "+19",
    "eventualBG": 401,
    "insulinReq": 2.22,
    "reservoir": 23,
    "deliverAt": "2025-09-23T02:19:54.421Z",
    "sensitivityRatio": 0.7,
    "predBGs": {
        "IOB": [
            216,
            233,
            249,
            263,
            277,
            289,
            300,
            310,
            319,
            326,
            332,
            337,
            340,
            344,
            347,
            350,
            353,
            355,
            358,
            360,
            362,
            364,
            366,
            368,
            369,
            371,
            372,
            373,
            375,
            376,
            377,
            378,
            378,
            379,
            380,
            380,
            381,
            381,
            382,
            382,
            382,
            383,
            383,
            383,
            383,
            383,
            384
        ],
        "ZT": [
            216,
            220,
            225,
            230,
            234,
            239,
            244,
            249,
            254,
            259,
            265,
            270,
            275,
            281,
            286,
            292,
            298,
            304,
            309,
            315,
            321,
            327,
            333,
            339,
            345,
            351,
            358,
            364,
            371,
            377,
            384,
            390,
            397,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            216,
            233,
            250,
            266,
            282,
            297,
            311,
            324,
            336,
            348,
            359,
            369,
            379,
            387,
            395,
            401
        ]
    },
    "COB": 19,
    "IOB": -0.709,
    "reason": "COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 3
}
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.709
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:19:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.09965598520285657088
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.0994184920083885056
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09818393831488063488
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 46min, IOB: 0.08440813268432292864
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03919838341064037888
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11803588507406331904
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.1004350432104052736
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09319907089424375808
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08862942102129743872
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08121334943706499072
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.07458875654140966912
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 122min, IOB: 0.0656412520332488192
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06188506910523464704
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11263688402264383488

  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.08011364015756910592
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008133834292824940544
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015829469045400387584
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015765309856940402688
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015705378724405612544
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.0369514919540003328
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007791236347051756544
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005636760970545451008
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03833620856918563328
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02839700708331474432
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.0277820329909677056
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02106829117398425088
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006914020095092609024
  SMB-Basal IOB: 1.2895429503887302656U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2895429503887302656U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:19:56 +0000
  Системный IOB: -0.709 U
  Наш Bolus IOB: 1.6255543442219843584 U
  Наш Basal IOB: 1.2895429503887302656 U
  Наш Total IOB: 2.915097294610714624 U
  РАЗНИЦА: 3.624097294610714624 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.7%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 46мин, остаток: 84.4%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.4%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.0%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.2%, IOB: 0.100U
  SMB: 0.2U, возраст: 98мин, остаток: 46.6%, IOB: 0.093U
  ... и еще 21 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.709
  Custom Bolus IOB: 1.6255543442219843584
  Custom Basal IOB: 1.2895429503887302656
  Custom Total IOB: 2.915097294610714624
  Difference: 3.624097294610714624
🧮 Custom IOB Update:
  System IOB: -0.709
  Custom IOB: 2.915097294610714624
  Difference: 3.624097294610714624
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.709
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:19:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.099643393074213376
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 15min, IOB: 0.09940241988272535552
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.0981571757819639808
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 46min, IOB: 0.08435052987545837568
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03916784287545165312
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.1179154380470460416
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10032270769501939712
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09309102764683962368
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08852434955642046464
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.0811135114466089984
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 113min, IOB: 0.0744940084231156224
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 122min, IOB: 0.06555398279785339904
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.06180114429444640768
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11247939407552186368
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.07998958483561944064
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.008120478972449169408
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 162min, IOB: 0.015803280098162241536
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.01573919767076724736
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015679338328569409536
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.03688060694837499904
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007775568065693063168
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005624339436903456768
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 221min, IOB: 0.03824160243165697024
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02832528014239529984
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02770755093467155968
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.0210087875447643008
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.006892054961632118784
  SMB-Basal IOB: 1.288585683214239744U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.288585683214239744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:20:01 +0000
  Системный IOB: -0.709 U
  Наш Bolus IOB: 1.623804595844342784 U
  Наш Basal IOB: 1.288585683214239744 U
  Наш Total IOB: 2.912390279058582528 U
  РАЗНИЦА: 3.621390279058582528 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 15мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.2%, IOB: 0.098U
  SMB: 0.1U, возраст: 46мин, остаток: 84.4%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.3%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.6%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 59.0%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.2%, IOB: 0.100U
  SMB: 0.2U, возраст: 98мин, остаток: 46.5%, IOB: 0.093U
  ... и еще 21 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.709
  Custom Bolus IOB: 1.623804595844342784
  Custom Basal IOB: 1.288585683214239744
  Custom Total IOB: 2.912390279058582528
  Difference: 3.621390279058582528
🧮 Custom IOB Update:
  System IOB: -0.709
  Custom IOB: 2.912390279058582528
  Difference: 3.621390279058582528
  Show Custom: true
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:20:05.163Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:20:05.169Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 02:18:47 +0000
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.709
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:19:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.1, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 14min, IOB: 0.0996306131619209216
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 16min, IOB: 0.09938617759320184832
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 20min, IOB: 0.09813029839608287232
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 46min, IOB: 0.084292995927894016
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 54min, IOB: 0.03913735244540519424
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 80min, IOB: 0.11779527616477229056
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 93min, IOB: 0.10021066041539190784
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 98min, IOB: 0.09298326933635121152
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 102min, IOB: 0.08841955970699372544
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 108min, IOB: 0.08101394774399118336
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 114min, IOB: 0.0743995260997921792
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 122min, IOB: 0.06546696507237220352
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 125min, IOB: 0.0617174640499658752
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 131min, IOB: 0.11232237063056678912
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 150min, IOB: 0.07986591555475193856
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 161min, IOB: 0.00810716628457988096
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 163min, IOB: 0.015777175017127264256
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 163min, IOB: 0.015713169144356399104
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 163min, IOB: 0.015653381399279065088
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 188min, IOB: 0.03680996264238043136
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 195min, IOB: 0.007759953943920637952
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 208min, IOB: 0.005611962329628219392
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 222min, IOB: 0.03814734928548180992
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 224min, IOB: 0.02825382319041899008
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 230min, IOB: 0.02763335569565520384
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 235min, IOB: 0.02094951774139038208
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 245min, IOB: 0.00687018031105601536
  SMB-Basal IOB: 1.2876297688799084544U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.2876297688799084544U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:20:06 +0000
  Системный IOB: -0.709 U
  Наш Bolus IOB: 1.6220593892847282176 U
  Наш Basal IOB: 1.2876297688799084544 U
  Наш Total IOB: 2.909689158164636672 U
  РАЗНИЦА: 3.618689158164636672 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 14мин, остаток: 99.6%, IOB: 0.100U
  SMB: 0.1U, возраст: 16мин, остаток: 99.4%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.1%, IOB: 0.098U
  SMB: 0.1U, возраст: 46мин, остаток: 84.3%, IOB: 0.084U
  Bolus: 0.05U, возраст: 54мин, остаток: 78.3%, IOB: 0.039U
  Bolus: 0U, возраст: 70мин, остаток: 66.6%, IOB: 0.000U
  SMB: 0.2U, возраст: 80мин, остаток: 58.9%, IOB: 0.118U
  SMB: 0.2U, возраст: 93мин, остаток: 50.1%, IOB: 0.100U
  SMB: 0.2U, возраст: 98мин, остаток: 46.5%, IOB: 0.093U
  ... и еще 21 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.709
  Custom Bolus IOB: 1.6220593892847282176
  Custom Basal IOB: 1.2876297688799084544
  Custom Total IOB: 2.909689158164636672
  Difference: 3.618689158164636672
🧮 Custom IOB Update:
  System IOB: -0.709
  Custom IOB: 2.909689158164636672
  Difference: 3.618689158164636672
  Show Custom: true