Skipping updateConnections until state is poweredOn
OmniBLE centralManager(_:willRestoreState:): {
    kCBRestoredPeripherals =     (
        "<CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>"
    );
}
Created device
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod peripheral was restored EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7)
centralManagerDidUpdateState(_:): 5
Re-connecting to known peripheral EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
centralManager(_:didConnect:): <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
Discovered service: <CBService: 0x14c5f41c0, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
PeripheralManager - didConnect - running assertConfiguration
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -79
NightscoutManager.swift - subscribe() - 74 DEV: Network status: reachable by WiFi
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
HealthKitManager.swift - init(resolver:) - 95 DEV: HealthKitManager did create
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
Restoring peripheral from state: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
API MISUSE: <CBCentralManager: 0x14c6b8600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
Unable to run command: central state = Optional("unknown"), peripheral state = CBPeripheralState(rawValue: 1)
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
Error applying peripheral configuration: notReady
Restoring peripheral from state: E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
API MISUSE: <CBCentralManager: 0x14c6b8600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
API MISUSE: <CBCentralManager: 0x14c6b8600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Temp Target by _id: 68d1e6efbc5d6c9f3d7c8f7e
API MISUSE: <CBCentralManager: 0x14c6b8600> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
centralManagerDidUpdateState(_:): 5
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1e6efbc5d6c9f3d7c8f7e
Scanning for peripherals and listening for connection events
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d1fc67bc5d6c9f3d8ec015
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1fc67bc5d6c9f3d8ec015
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:22:54.486Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:22:54.491Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
UserNotificationsManager.swift - requestNotificationPermissionsIfNeeded() - 288 DEV: UNUserNotificationCenter.authorizationStatus: UNAuthorizationStatus(rawValue: 2)
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: tempTarget(2025-09-22 20:56:23 +0000)
Application context data is nil
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 228 DEV: WCSession is activated: true
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 21:06:37 +0000, 0.2)
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 237 DEV: WCSession activated successfully
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d1fc67bc5d6c9f3d8ec139
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1fc67bc5d6c9f3d8ec139
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Temp Target by _id: 68d1e6efbc5d6c9f3d7c8fbb
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d1e6efbc5d6c9f3d7c8fbb
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 239 DEV: Watch is paired
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 241 DEV: Watch app is installed
Application context data is nil
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 20:07:57 +0000, 0.5)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: tempTarget(2025-09-22 19:56:19 +0000)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
SMB-Basal Manager initialized: isEnabled=true
SMB-Basal Manager starting...
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09907586849003001856
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 18min, IOB: 0.0987201685324064768
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.09712320619294711808
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08231654584914950144
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03809768037436416
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11374795490979219456
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09644940854810800128
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.08937040665277038592
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08490880735907602432
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07768212252037458944
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 116min, IOB: 0.07124089127767697408
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06256171693090190336
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 128min, IOB: 0.0589251895765274624
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10708708900593068032
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07575335643299424256
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.00766507668411149824
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 165min, IOB: 0.014910427235804080128
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.01484898581406881792
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.01479159636963002368
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03447230667958467072
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.00724382632482946048
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005203695152817376256
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 224min, IOB: 0.03504680223131983872
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02590454600847777792
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02519778893699974144
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01900661356086802944
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.00615552826666729984
  SMB-Basal IOB: 1.3542085367634079744U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3542085367634079744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:22:56 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6635076059182280704 U
  Наш Basal IOB: 1.3542085367634079744 U
  Наш Total IOB: 3.0177161426816360448 U
  РАЗНИЦА: 3.7197161426816360448 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.3%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 76.2%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.5%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.9%, IOB: 0.114U
  SMB: 0.2U, возраст: 96мин, остаток: 48.2%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6635076059182280704
  Custom Basal IOB: 1.3542085367634079744
  Custom Total IOB: 3.0177161426816360448
  Difference: 3.7197161426816360448
SMB-Basal: Custom IOB saved for middleware - Total: 3.0177161426816360448U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.0177161426816363, calculationTime=1758594176.0076609
SMB-Basal: Middleware installed successfully
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
centralManager(_:didConnect:): <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -75
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
Error reading message: Пустое значение
Pod session sync error: incorrectResponse
Delegate configuration notified
Peripheral configuration completed
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Applying configuration
runCommand guard failed - bluetooth not running or peripheral not connected: peripheral <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Error applying peripheral configuration: notReady
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Applying configuration
runCommand guard failed - bluetooth not running or peripheral not connected: peripheral <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connecting>
Error applying peripheral configuration: notReady
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09905593414580269056
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 18min, IOB: 0.09869710981264351232
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.09709059017373464576
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08225718779221598208
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03806667581870151168
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11362868379670329344
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09633893612215533568
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.08926442066515601408
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.0848058919577636864
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07758456381687254016
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 116min, IOB: 0.07114849535573955584
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06247684498001211392
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 128min, IOB: 0.05884366312300934144
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10693436053848510464
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07563369365398192128
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.00765223139116391424
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 165min, IOB: 0.014885247655522527232
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.01482388140082428928
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014766562250965700608
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.034404629248705152
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.00722890027845183488
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005191913907925481472
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 224min, IOB: 0.03495758256847392768
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02583698534214678016
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02512785850253056
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01895090984108576256
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.00613511139337279488
  SMB-Basal IOB: 1.3532466752594444288U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3532466752594444288U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:01 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6617888655341463552 U
  Наш Basal IOB: 1.3532466752594444288 U
  Наш Total IOB: 3.015035540793590784 U
  РАЗНИЦА: 3.717035540793590784 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.3%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 76.1%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.8%, IOB: 0.114U
  SMB: 0.2U, возраст: 96мин, остаток: 48.2%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6617888655341463552
  Custom Basal IOB: 1.3532466752594444288
  Custom Total IOB: 3.015035540793590784
  Difference: 3.717035540793590784
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.015035540793590784
  Difference: 3.717035540793590784
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 5 min, isZero: true
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 347 DEV: Enact bolus 0.05, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 1/3: 0.05U
APSManager.swift - enactBolus(units:activationType:) - 855 DEV: Bolus failed: 0.05
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 376 WARN: error("Bolus attempt 1/3 failed: Pump error: Под не подключен (connection error: true)")
centralManager(_:didConnect:): <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x14c638c40, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 384 DEV: Retrying bolus in 2.0 seconds...
didReadRSSI: -69
didDiscoverServices
Discovered service: <CBService: 0x14dde9e40, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
Session Established
msgSequenceNumber: 3
Setting podState transport state to ## MessageTransportState
eapSeq: 1365
msgSeq: 3
nonceSeq: 0
messageNumber: 5
Scheduling session Post-connect status fetch
Delegate configuration notified
Peripheral configuration completed
======================== Post-connect status fetch ===========================
Send(Hex): 17a8db2d10030e010701fc
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d10030e010701fc
Recv(Hex): 17a8db2d140a1d280418180040454fff008a
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d140a1d280418180040454fff008a
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:73h55m, reservoirLevel:50+, insulinDelivered:104.80, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:3, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
Болюс
ВБС
DU: Stored pod events: [Болюс: 0.05ед 23/09/2025, 05:21:24 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Болюс: 0.05ед 23/09/2025, 05:21:24 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно]
------------------------ Post-connect status fetch ---------------------------
Start of idle at Optional(2025-09-23 02:23:02 +0000)
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 2/3: 0.05U
Scheduling session Bolus
======================== Bolus ===========================
Send(Hex): 17a8db2d181f1a0e494e532e02001301001000010001170d3f000a00030d4000000000000081fa
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d181f1a0e494e532e02001301001000010001170d3f000a00030d4000000000000081fa
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
Recv(Hex): 17a8db2d1c0a1d680418300140454fff819f
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d1c0a1d680418300140454fff819f
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:73h55m, reservoirLevel:50+, insulinDelivered:104.80, bolusNotDelivered:0.05, lastProgrammingMessageSeqNum:6, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
Болюс
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 05:23:03 2 секунды Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 05:23:03 2 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 858 DEV: Bolus succeeded: 0.05
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 409 DEV: Bolus succeeded on attempt 2/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 02:23:03 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 02:23:03 +0000, endDate: 2025-09-23 02:23:05 +0000, value: 0.05, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09903584113641824256
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09867390762451232768
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.09705787837809823744
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08219789210602140672
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03803571589064879104
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11350966320306110464
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09622871636651501568
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.08915868428503836672
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.0847032231599402496
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07748724516758994944
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07105633195456889856
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06239219294163099648
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 128min, IOB: 0.05876235047022782464
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10678203978396485632
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07551436806455379968
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.007639423328573087744
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014860141313041328128
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.01479885004490999808
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014741601020724862976
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03433716198834199552
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007214021524155623424
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005180171461924399104
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.034868671273996288
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02576966055134536704
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02505817869543834112
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01889541048224907776
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.00611477363828498944
  SMB-Basal IOB: 1.4022824079886460928U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4022824079886460928U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:06 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6600741158557751296 U
  Наш Basal IOB: 1.4022824079886460928 U
  Наш Total IOB: 3.0623565238444212224 U
  РАЗНИЦА: 3.7643565238444212224 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.2%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 76.1%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.3%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.8%, IOB: 0.114U
  SMB: 0.2U, возраст: 96мин, остаток: 48.1%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6600741158557751296
  Custom Basal IOB: 1.4022824079886460928
  Custom Total IOB: 3.0623565238444212224
  Difference: 3.7643565238444212224
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0623565238444212224
  Difference: 3.7643565238444212224
  Show Custom: true
SMB-Basal: Settings changed - smbBasalEnabled=false, current isEnabled=true
SMB-Basal: Disabling and stopping SMB-basal system
SMB-Basal: Middleware removed
SMB-Basal: Settings changed - smbBasalEnabled=true, current isEnabled=false
SMB-Basal: Enabling and starting SMB-basal system
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09902901135832727552
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09866602994789783552
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.097046795914166272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08217785631416313856
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03802525735810384896
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11346947476560263168
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09619150426478010368
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.0891229874710322176
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08466856292073650176
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07745439251660647424
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07102522076828551168
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06236361875868926976
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 128min, IOB: 0.05873490406893630464
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10673062681638182912
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07547409598810437632
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.007635100874063177728
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014851668503311372288
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014790402550020603904
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014733177199648462848
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03431439635460740096
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007209001163724050432
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005176209680533328896
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03483867679402697728
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02574694887462313984
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02503467402865663488
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01887669028627103232
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.006107914569217286144
  SMB-Basal IOB: 1.4019577575970852864U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4019577575970852864U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:07 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.659495200110516224 U
  Наш Basal IOB: 1.4019577575970852864 U
  Наш Total IOB: 3.0614529577076015104 U
  РАЗНИЦА: 3.7634529577076015104 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.2%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 76.1%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.3%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.7%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 48.1%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.659495200110516224
  Custom Basal IOB: 1.4019577575970852864
  Custom Total IOB: 3.0614529577076015104
  Difference: 3.7634529577076015104
SMB-Basal: Custom IOB saved for middleware - Total: 3.0614529577076015104U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.0614529577076004, calculationTime=1758594187.741432
SMB-Basal: Middleware installed successfully
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09901556084182188032
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.0986505286909394944
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.09702502327831482368
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08213857128434935808
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03800475483182977024
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11339071676930617344
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09611858584618022912
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.08905304068515252224
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08460064866460008448
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07739002217316980736
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07096426429553819648
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.0623076351500156416
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 128min, IOB: 0.0586811308958430208
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10662990055766048768
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07539520238084179968
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.007626633461810173952
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014835070895575220224
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014773854544787869696
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.01471667558140601344
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03426980456179654656
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007199167929728123904
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005168450340661400576
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03477993596702444032
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02570247138420081664
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02498864572606975488
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01884003279432192512
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.006094484679650548736
  SMB-Basal IOB: 1.401317588262076416U (from 66 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.401317588262076416U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:11 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6583608142125963264 U
  Наш Basal IOB: 1.401317588262076416 U
  Наш Total IOB: 3.0596784024746727424 U
  РАЗНИЦА: 3.7616784024746727424 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.1%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 76.0%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.3%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.7%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 48.1%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6583608142125963264
  Custom Basal IOB: 1.401317588262076416
  Custom Total IOB: 3.0596784024746727424
  Difference: 3.7616784024746727424
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0596784024746727424
  Difference: 3.7616784024746727424
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connecting>, data = ["kCBAdvDataServiceUUIDs": <__NSArrayM 0x14de830f0>(
FEBC
)
, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataIsConnectable": 1, "kCBAdvDataLocalName": DXCMHK, "kCBAdvDataManufacturerData": <d00073a5 0204>, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataTimestamp": 780286991.9109859]
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 5 min, isZero: true
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 347 DEV: Enact bolus 0.05, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 1/3: 0.05U
Scheduling session Bolus
======================== Bolus ===========================
Send(Hex): 17a8db2d20030e01000157
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d20030e01000157
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
Recv(Hex): 17a8db2d240a1d280418b000404553ff80c3
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d240a1d280418b000404553ff80c3
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:73h56m, reservoirLevel:50+, insulinDelivered:104.85, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:6, alerts:slot7Expired)
Send(Hex): 17a8db2d281f1a0e494e532e02001301001000010001170d3f000a00030d40000000000000815a
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d281f1a0e494e532e02001301001000010001170d3f000a00030d40000000000000815a
centralManager(_:didConnect:): <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
didConnect to E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMHK")
Set notify true for <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Recv(Hex): 17a8db2d2c0a1d680418d001404553ff8100
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d2c0a1d680418d001404553ff8100
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:73h56m, reservoirLevel:50+, insulinDelivered:104.85, bolusNotDelivered:0.05, lastProgrammingMessageSeqNum:10, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
Болюс
ВБС
Болюс
DU: Stored pod events: [Болюс: 0.05ед 23/09/2025, 05:23:03 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 05:23:13 2 секунды Определенно]
Stored doses: [Болюс: 0.05ед 23/09/2025, 05:23:03 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 05:23:13 2 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 858 DEV: Bolus succeeded: 0.05
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 409 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 02:23:13 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 02:23:13 +0000, endDate: 2025-09-23 02:23:15 +0000, value: 0.05, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
Ignoring authentication response: 0361aa17fea995e3c38c5dfb5134a13bd7
Observed authenticated session. enabling notifications for control characteristic.
Set notify true for <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Received control response: 4e0005130c00530a00010600bd000604e5000f
Listening for backfill responses
Set notify true for <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [-]: New sensor DXCMHK discovered, activated at 2025-09-13 22:34:54 +0000
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor didRead G7GlucoseMessage(glucose:Optional(189), sequence:2643 glucoseIsDisplayOnly:false state:ok messageTimestamp:791301 age:6, data:4e0005130c00530a00010600bd000604e5000f)
Stopping scan
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 02:18:47 +0000
Received control response: 3200014b000000600035eb070003010275ec0700
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms 3200014b000000600035eb070003010275ec0700
Received control response: ea00030100000000000200000045ffffff
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms ea00030100000000000200000045ffffff
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09899517837236391936
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09862707074831362048
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 23min, IOB: 0.09699216121175994368
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.0820794692345334784
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03797391982835385344
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11327233236702834688
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09600899607732813824
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.08894792291793767424
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08449858890342930432
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07729329327136540672
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07087266964032278528
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06222351803480201216
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05860033712913074176
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10647856605603735552
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 153min, IOB: 0.07527668456888711168
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.007613914154094061568
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014810139042023718912
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014748997232298610688
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014691887977697404928
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.0342028326126109696
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007184400271491265536
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005156798490399561728
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03469173949998671872
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02563569256703671808
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 233min, IOB: 0.02491954384792963072
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 238min, IOB: 0.01878500312253951488
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 248min, IOB: 0.006074327408098814976
  SMB-Basal IOB: 1.4503577862848155648U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4503577862848155648U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:16 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6566559845878001664 U
  Наш Basal IOB: 1.4503577862848155648 U
  Наш Total IOB: 3.1070137708726157312 U
  РАЗНИЦА: 3.8090137708726157312 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.1%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 75.9%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.2%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.6%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 48.0%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6566559845878001664
  Custom Basal IOB: 1.4503577862848155648
  Custom Total IOB: 3.1070137708726157312
  Difference: 3.8090137708726157312
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.1070137708726157312
  Difference: 3.8090137708726157312
  Show Custom: true
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x14c63a300, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = disconnected>
Sensor disconnected: wasRemoteDisconnect:true
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor disconnected: suspectedEndOfSession=false
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Not connecting to unnamed peripheral: <CBPeripheral: 0x14dd55b20, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = (null), mtu = 23, state = disconnected>
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09897448901950529536
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09860329816798414848
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09695896200192663552
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08201999194762237952
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.03794290096150303744
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 83min, IOB: 0.11315332006976651264
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09589884551733362688
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 101min, IOB: 0.088842274386401792
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.0843960180144595968
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07719608617992178688
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.0707806273111625216
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06213899607644889088
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05851915705454340096
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.1063265151050999808
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07515762331239981056
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 164min, IOB: 0.007601137553312294912
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014785095141977690112
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014724028246297458688
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014666989049146089472
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03413557294924199936
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007169570107230260224
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005145098788589422592
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03460319533745804288
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.025568652851212544
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.0248501784623841024
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.01872976832017218816
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.006054099207797889024
  SMB-Basal IOB: 1.4493910617997799424U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4493910617997799424U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:21 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6549424911408994304 U
  Наш Basal IOB: 1.4493910617997799424 U
  Наш Total IOB: 3.1043335529406793728 U
  РАЗНИЦА: 3.8063335529406793728 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 24мин, остаток: 97.0%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.0%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 75.9%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.2%, IOB: 0.000U
  SMB: 0.2U, возраст: 83мин, остаток: 56.6%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.9%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6549424911408994304
  Custom Basal IOB: 1.4493910617997799424
  Custom Total IOB: 3.1043335529406793728
  Difference: 3.8063335529406793728
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.1043335529406793728
  Difference: 3.8063335529406793728
  Show Custom: true
Scanning for peripherals and listening for connection events
[u 23EFC09E-EB1D-4372-8AEB-E82F84085C0E:m (null)] [com.swiftkey.SwiftKeyApp.Keyboard(4.2.5)] RB query for the extension process state failed with error: Error Domain=RBSServiceErrorDomain Code=1 "Client not entitled" UserInfo={RBSEntitlement=com.apple.runningboard.process-state, NSLocalizedFailureReason=Client not entitled, RBSPermanent=false}
App is being debugged, do not track this hang
Hang detected: 1.55s (debugger attached, not reporting)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 17min, IOB: 0.09895212815696594944
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09857764731265007616
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09692325369504055296
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08195627452647001088
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 57min, IOB: 0.037909683948721408
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11302596042818623488
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09578099184739698688
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08872924550538438656
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.0842862864268025856
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.0770920997708094976
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07068217155551857664
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.0620485916762612736
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05843232994088486912
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10616389512929062912
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.0750303057184485888
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007587476098084591616
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01475831709046040576
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.01469733033838456832
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014640366089067311104
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03406367065599015936
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.00715371732403670528
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005132593958938636288
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03450857403050854912
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 227min, IOB: 0.02549701455357960192
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02477606215351856128
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.01867075565684033536
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.006032492151859038208
  SMB-Basal IOB: 1.4483578900675530752U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4483578900675530752U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:26 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6531092357400997888 U
  Наш Basal IOB: 1.4483578900675530752 U
  Наш Total IOB: 3.101467125807652864 U
  РАЗНИЦА: 3.803467125807652864 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 82.0%, IOB: 0.082U
  Bolus: 0.05U, возраст: 57мин, остаток: 75.8%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.1%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.5%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.9%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6531092357400997888
  Custom Basal IOB: 1.4483578900675530752
  Custom Total IOB: 3.101467125807652864
  Difference: 3.803467125807652864
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.101467125807652864
  Difference: 3.803467125807652864
  Show Custom: true
App is being debugged, do not track this hang
Hang detected: 0.30s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.36s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 1.00s (debugger attached, not reporting)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09893265995479502848
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09855534946640136192
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09689230678969817088
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08190126359765680128
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03788101670522360832
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11291611698466584576
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09567936579597576192
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.0886317864732864
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08419167434242910208
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07700244700016736256
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07059729180955881472
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06197065887271371776
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05835748326380609536
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 134min, IOB: 0.10602372009313185792
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07492057685095681024
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007575702900009448448
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01473524048086559744
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.01467432282942209024
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014617423200767778816
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.0340017194095361792
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.007140059379051544576
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005121821792130284544
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03442707679577250816
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02543531474280955392
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02471223408262263808
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.01861993901890123264
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.00601388990099689472
  SMB-Basal IOB: 1.447464528582880256U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.447464528582880256U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:31 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.651528462533352448 U
  Наш Basal IOB: 1.447464528582880256 U
  Наш Total IOB: 3.098992991116232704 U
  РАЗНИЦА: 3.800992991116232704 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.6%, IOB: 0.099U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 81.9%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.8%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.0%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.5%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.8%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.651528462533352448
  Custom Basal IOB: 1.447464528582880256
  Custom Total IOB: 3.098992991116232704
  Difference: 3.800992991116232704
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.098992991116232704
  Difference: 3.800992991116232704
  Show Custom: true
AddGlucoseStateModel.swift - add() - 19 DEV: AddGlucose: start units=mmol/L input=12.5
AddGlucoseStateModel.swift - add() - 30 DEV: AddGlucose: converted to mg/dL=225 at 2025-09-23 02:23:24 +0000
AddGlucoseStateModel.swift - add() - 55 DEV: AddGlucose: stored locally id=8167CBD6-7B25-4F6E-A0C8-02FAD5805DF1
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/entries.json
AddGlucoseStateModel.swift - add() - 58 DEV: AddGlucose: requested NS upload
AddGlucoseStateModel.swift - add() - 60 DEV: AddGlucose: requested HealthKit save
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09891148067979026432
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09853112750327103488
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09685878573695490048
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08184189369244489728
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03785008921812534784
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11279768717041844224
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09556981520634650624
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08852673464429750272
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08408969526023834624
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07690581934088001536
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07050581340811358208
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06188667347307981824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05827682609720643584
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10587266982138671104
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07480235171051880448
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007563019090525901824
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01471037923032365056
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014649536059765600256
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 166min, IOB: 0.014592706083084038144
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03393498982014442496
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 198min, IOB: 0.00712534888368149504
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005110220871960592384
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03433932349805989888
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02536888086586302464
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02464351485160176128
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.01856523281316983552
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.00599386785127747072
  SMB-Basal IOB: 1.4464986796524521472U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4464986796524521472U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:36 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6498244828825294848 U
  Наш Basal IOB: 1.4464986796524521472 U
  Наш Total IOB: 3.096323162534981632 U
  РАЗНИЦА: 3.798323162534981632 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 24мин, остаток: 96.9%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 81.8%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.7%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 64.0%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.4%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.8%, IOB: 0.096U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6498244828825294848
  Custom Basal IOB: 1.4464986796524521472
  Custom Total IOB: 3.096323162534981632
  Difference: 3.798323162534981632
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.096323162534981632
  Difference: 3.798323162534981632
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09889010102785613824
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09850671299442161664
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09682509727515809792
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08178245091389298688
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03781913546990795776
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11267923357953609728
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09546026281774145536
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08842168814737635328
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08398772550127878144
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 111min, IOB: 0.07680920668516209664
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07041435428825464832
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06180271199289554944
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.0581961944168003072
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10572167435038564352
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.074684186939776256
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.00755034277849268224
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01468553293031283712
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014624764233540706304
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014568003902060179456
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03386831352553027072
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.007110651067702411264
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005098631408945808384
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.0342516713018061568
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02530252588058097664
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02457488366777757696
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.01851060139880054016
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005973877371921342464
  SMB-Basal IOB: 1.4455335921308516352U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4455335921308516352U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:41 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6481205358679146496 U
  Наш Basal IOB: 1.4455335921308516352 U
  Наш Total IOB: 3.0936541279987662848 U
  РАЗНИЦА: 3.7956541279987662848 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.099U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 81.8%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.6%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 63.9%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.3%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.7%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6481205358679146496
  Custom Basal IOB: 1.4455335921308516352
  Custom Total IOB: 3.0936541279987662848
  Difference: 3.7956541279987662848
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0936541279987662848
  Difference: 3.7956541279987662848
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09886853845422487552
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09848212579203944448
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09679126857852690432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08172298271632493568
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03778818014586450944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11256085051153123328
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 96min, IOB: 0.09535079580116344832
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08831673055364749312
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 105min, IOB: 0.08388584618048350208
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07671268587405215744
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07032298718208311296
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06171884118975494144
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05811565232787582976
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.1055708537140852736
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07456617644265089024
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.0075376840358889984
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01466072132207500288
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 166min, IOB: 0.014600027032756017152
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.01454333628431223808
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.0338017434820946176
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.007095977603251134464
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 211min, IOB: 0.005087062604757952512
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03416418978136682496
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02523630245358115328
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02450639499638112768
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.0184560881251429248
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005953934320079843328
  SMB-Basal IOB: 1.4445680808107556864U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4445680808107556864U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:46 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6464179775059963904 U
  Наш Basal IOB: 1.4445680808107556864 U
  Наш Total IOB: 3.0909860583167520768 U
  РАЗНИЦА: 3.7929860583167520768 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 81.7%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.6%, IOB: 0.038U
  Bolus: 0U, возраст: 73мин, остаток: 63.8%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.3%, IOB: 0.113U
  SMB: 0.2U, возраст: 96мин, остаток: 47.7%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6464179775059963904
  Custom Basal IOB: 1.4445680808107556864
  Custom Total IOB: 3.0909860583167520768
  Difference: 3.7929860583167520768
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0909860583167520768
  Difference: 3.7929860583167520768
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 2min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09884679639172483072
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09845736968110923776
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.096757304503757312
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 49min, IOB: 0.08166349684199643136
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03775722723445214208
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.1124425529485261824
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09524142794029481984
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08821187505476599808
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08378407008846859264
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.0766162690045279232
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07023172352362364928
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 125min, IOB: 0.06163507153895374848
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.0580352098817336832
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10542022671126849536
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.0744483348730773504
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007525044431495247872
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014635947479711100928
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014575327522180345856
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.01451870628588238848
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 191min, IOB: 0.03373528789936090112
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.007081330297270427648
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005075515880015055872
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03407688964055834112
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02517021868141960192
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02443805719399303168
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018401699631328411648
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005934041113754462208
  SMB-Basal IOB: 1.443601731908944896U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.443601731908944896U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:51 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.644717022275250176 U
  Наш Basal IOB: 1.443601731908944896 U
  Наш Total IOB: 3.088318754184195072 U
  РАЗНИЦА: 3.790318754184195072 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 2мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.8%, IOB: 0.097U
  SMB: 0.1U, возраст: 49мин, остаток: 81.7%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.5%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.8%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.2%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.6%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.644717022275250176
  Custom Basal IOB: 1.443601731908944896
  Custom Total IOB: 3.088318754184195072
  Difference: 3.790318754184195072
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.088318754184195072
  Difference: 3.790318754184195072
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x14c63a4c0, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x14e7a0b10>(
FEBC
)
, "kCBAdvDataIsConnectable": 1, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataManufacturerData": <d000c93d 0004>, "kCBAdvDataLocalName": DXCMXn, "kCBAdvDataTimestamp": 780287031.465215]
Not connecting to peripheral: DXCMXn
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:23:54.503Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T02:23:54.506Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x14c63a4c0, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataTimestamp": 780287034.787084, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataIsConnectable": 1, "kCBAdvDataLocalName": DXCMXn, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x14e7a23a0>(
FEBC
)
, "kCBAdvDataManufacturerData": <d000c93d 0004>, "kCBAdvDataRxSecondaryPHY": 0]
Not connecting to peripheral: DXCMXn
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09882482625353736192
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09843238932364689408
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09672312908749664256
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08160386015055921152
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0377262074525691904
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11232407607170215936
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09513191439992172544
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.0881068869151530496
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.0836821693823560704
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07651974022983747584
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.0701403590015423488
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06155121550498809856
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.0579546869912060416
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10526945613141577728
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07433039841770029056
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.00751239566898909696
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.014611155941981902848
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014550610406987251712
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014494058767566979072
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03366879800645565952
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.00706667635988695552
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005063965386507640832
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03398957545855563776
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02510412663722094592
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02436971729165427712
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018347314175515250688
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005914153226963402752
  SMB-Basal IOB: 1.4426344934742175744U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4426344934742175744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:23:56 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6430138626419175424 U
  Наш Basal IOB: 1.4426344934742175744 U
  Наш Total IOB: 3.0856483561161351168 U
  РАЗНИЦА: 3.7876483561161351168 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.6%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.5%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.2%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.6%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6430138626419175424
  Custom Basal IOB: 1.4426344934742175744
  Custom Total IOB: 3.0856483561161351168
  Difference: 3.7876483561161351168
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0856483561161351168
  Difference: 3.7876483561161351168
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09880273220636428288
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 19min, IOB: 0.09840730301346838528
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09668890377152301056
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08154435346011199488
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0376952668190435072
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11220597727499923456
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09502277032405016576
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08800225996378560512
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08358062335258232832
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07642355354942363648
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 117min, IOB: 0.07004932330681335808
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06146766744227073024
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05787446232619286528
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.1051192509671299072
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07421292160355300352
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007499797218107369472
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 166min, IOB: 0.01458646326849721344
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014525991896749402112
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014469509611598850048
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03360258636620630016
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.00705208467479778816
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005052465414808281088
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 225min, IOB: 0.03390265759023791104
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.0250383369296304896
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02430169644175705088
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018293187318645762048
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005894364101134688256
  SMB-Basal IOB: 1.4416688688315953152U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4416688688315953152U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:01 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6413165102134827008 U
  Наш Basal IOB: 1.4416688688315953152 U
  Наш Total IOB: 3.082985379045078016 U
  РАЗНИЦА: 3.784985379045078016 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 19мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.5%, IOB: 0.082U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.4%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.7%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.1%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.5%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6413165102134827008
  Custom Basal IOB: 1.4416688688315953152
  Custom Total IOB: 3.082985379045078016
  Difference: 3.784985379045078016
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.082985379045078016
  Difference: 3.784985379045078016
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09878041892327032832
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09838200235077388288
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09665448022315264
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08148471785632999424
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03766427065712978944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11208774215390375936
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.0949135202212153344
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08789753835665836032
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08347898955976152064
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07632728984738660352
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06995821974563849216
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.0613840632576717824
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.05779418626566217728
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10496895659022823424
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07409539236625150976
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007487194159830068224
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014561761818204688384
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014501364673555828736
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.01444495180225548288
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.0335363642944380416
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.007037491618334367744
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005040965816381038592
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.03381575695405703168
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02497256261620588544
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02423369794683806208
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018239082949588379648
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005874587397138151424
  SMB-Basal IOB: 1.440701431223149568U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.440701431223149568U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:06 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6396175704218621952 U
  Наш Basal IOB: 1.440701431223149568 U
  Наш Total IOB: 3.0803190016450117632 U
  РАЗНИЦА: 3.7823190016450117632 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.7%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.5%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.3%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.6%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.0%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.5%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6396175704218621952
  Custom Basal IOB: 1.440701431223149568
  Custom Total IOB: 3.0803190016450117632
  Difference: 3.7823190016450117632
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0803190016450117632
  Difference: 3.7823190016450117632
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09875793934475423744
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09835654730592796672
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09661993987864987648
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08142509405827940352
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0376332920877938176
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.1119696495060343808
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09480442167127248896
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.0877929689861291008
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08337750761024094208
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07623117606082055168
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06986726308306151424
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.0613006000287618048
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 129min, IOB: 0.0577140480384932352
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10481892726927149056
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07397808771986294784
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007474616198159051776
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014537109809388658688
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014476786780705896448
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.01442044321919838208
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03347028785538226176
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.0070229315808356096
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005029493690242361344
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.0337290783219980032
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02490695868532152832
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.02416588203169294336
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018185128551185010688
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 249min, IOB: 0.005854869710827603968
  SMB-Basal IOB: 1.4397339693790273536U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4397339693790273536U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:11 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.637921049084291072 U
  Наш Basal IOB: 1.4397339693790273536 U
  Наш Total IOB: 3.0776550184633184256 U
  РАЗНИЦА: 3.7796550184633184256 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.4%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.6%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.4%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.3%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.5%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 56.0%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.4%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.637921049084291072
  Custom Basal IOB: 1.4397339693790273536
  Custom Total IOB: 3.0776550184633184256
  Difference: 3.7796550184633184256
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.0776550184633184256
  Difference: 3.7796550184633184256
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 4 min, isZero: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09873526837634721792
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09833090934392717312
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 24min, IOB: 0.09658524369350709248
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08136541392035198976
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0376022956649903616
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11185156394892423168
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09469534953540800512
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08768843188520126464
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.0832760610654691328
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07613510189042649088
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06977634892167596032
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06121718193906584576
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 130min, IOB: 0.05763395563741400064
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10466899073243850752
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 154min, IOB: 0.07386087291568662528
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.00746204888170254336
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.0145124789174984704
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014452229978697562112
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014395955702459471872
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03340428109199753216
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.00700838782254935552
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005018035842979407872
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.0336425219729319424
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02484144965566884864
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 234min, IOB: 0.0240981706537154304
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 239min, IOB: 0.018131262020886335488
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 250min, IOB: 0.005835188336330964992
  SMB-Basal IOB: 1.4387658753080479744U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4387658753080479744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:16 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6362250003482515456 U
  Наш Basal IOB: 1.4387658753080479744 U
  Наш Total IOB: 3.07499087565629952 U
  РАЗНИЦА: 3.77699087565629952 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 24мин, остаток: 96.6%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.4%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.2%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.5%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 55.9%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6362250003482515456
  Custom Basal IOB: 1.4387658753080479744
  Custom Total IOB: 3.07499087565629952
  Difference: 3.77699087565629952
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.07499087565629952
  Difference: 3.77699087565629952
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
DeviceDataManager.swift - updateUpdateFinished(_:) - 235 WARN: error("Loop recommendation time out or got error. Trying to loop right now.")
APSManager.swift - loop() - 161 DEV: Starting loop
APSManager.swift - determineBasal() - 244 DEV: Start determine basal
OpenAPS.swift - makeProfiles(useAutotune:) - 190 DEV: Start makeProfiles
OpenAPS.swift - determineBasal(currentTemp:clock:) - 34 DEV: Start determineBasal
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09871468981861216256
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09830766626389311488
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 25min, IOB: 0.09655386686739068928
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08131162419180617728
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0375743683238469632
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11174523468299511808
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09459715330864697344
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 102min, IOB: 0.08759432443245750272
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.0831847393183117824
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07604862153193622528
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06969451758499301376
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06114210302362420224
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 130min, IOB: 0.05756187207141797888
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10453405306890735616
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 155min, IOB: 0.07375539846269294592
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007450741185652611072
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014490316992934621184
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014430134749342670848
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014373922843122296832
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03334490194297677824
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.006995305168066891776
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005007730323767001088
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.03356468301437067264
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02478254027970576384
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 235min, IOB: 0.02403728631425142272
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 240min, IOB: 0.018082830637808123904
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 250min, IOB: 0.005817496415162181632
  SMB-Basal IOB: 1.437890930062119936U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.437890930062119936U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:20 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.6346981228186933248 U
  Наш Basal IOB: 1.437890930062119936 U
  Наш Total IOB: 3.0725890528808132608 U
  РАЗНИЦА: 3.7745890528808132608 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 25мин, остаток: 96.6%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.3%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.1%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 55.9%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.6346981228186933248
  Custom Basal IOB: 1.437890930062119936
  Custom Total IOB: 3.0725890528808132608
  Difference: 3.7745890528808132608
SMB-Basal: Custom IOB saved for middleware - Total: 3.0725890528808132608U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.0725890528808133, calculationTime=1758594260.558737
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
<0x14cde0000> Gesture: System gesture gate timed out.
DeviceDataManager.swift - heartbeat(date:) - 196 WARN: error("Loop in progress. Skip updating.")
App is being debugged, do not track this hang
Hang detected: 0.67s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"id":"065281c02d41260b204148776bf0ea51","duration":0,"amount":0.050000000000000003,"automatic":true,"_type":"SMB-Basal","timestamp":"2025-09-23T02:23:13.695Z"},{"id":"83e83cfa5dbf0c3b802cb6fbbf5b5094","delivered_units":0.050000000000000003,"amount":0.050000000000000003,"timestamp":"2025-09-23T02:23:03.825Z","automatic":true,"_type":"SMB-Basal","duration":0},{"_type":"SMB-Basal","amount":0.050000000000000003,"timestamp":"2025-09-23T02:21:24.614Z","automatic":true,"id":"185efad3f757d21de23e65230
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.702
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 19
  Timestamp: 2025-09-23 02:20:54 +0000
  Reason: COB: 19, Dev: 4.6, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 23.0, minGuardBG 12.9, IOBpredBG 21.3, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 2.22; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.95 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.098709970805984768
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09830233999989358592
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 25min, IOB: 0.09654668703952345088
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08129933960670076928
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.0375679915244005632
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11172096446037721088
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.0945747417476043776
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 103min, IOB: 0.0875728468506541056
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.0831638979651841024
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07602888576571624448
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06967584334511136768
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06112497041019155456
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 130min, IOB: 0.05754542326306960384
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.1045032623259817984
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 155min, IOB: 0.073731332744853504
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007448161265214373888
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014485260642214526976
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014425093619708930048
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014368895947471048704
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.0333313557877581056
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.006992320729627987968
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.00500537957555167232
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.03354692913843127296
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02476910421950089216
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 235min, IOB: 0.024023400536748928
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 240min, IOB: 0.018071785517769265152
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 250min, IOB: 0.005813462125576185856
  SMB-Basal IOB: 1.4376966093822976U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4376966093822976U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:21 +0000
  Системный IOB: -0.702 U
  Наш Bolus IOB: 1.634349646960820224 U
  Наш Basal IOB: 1.4376966093822976 U
  Наш Total IOB: 3.072046256343117824 U
  РАЗНИЦА: 3.774046256343117824 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 25мин, остаток: 96.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.3%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.1%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 55.9%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.702
  Custom Bolus IOB: 1.634349646960820224
  Custom Basal IOB: 1.4376966093822976
  Custom Total IOB: 3.072046256343117824
  Difference: 3.774046256343117824
🧮 Custom IOB Update:
  System IOB: -0.702
  Custom IOB: 3.072046256343117824
  Difference: 3.774046256343117824
  Show Custom: true
OpenAPS: IOB calculation result: [
    {
        "iob": -0.68,
        "activity": -0.0069,
        "basaliob": -0.715,
        "bolusiob": 0.035,
        "netbasalinsulin": -1.75,
        "bolusinsulin": 0.3,
        "time": "2025-0
OpenAPS.swift - getCustomIOBData() - 27 DEV: ❌ Custom IOB data not found in middleware/custom-iob.json
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 423 DEV: ❌ No custom IOB data available, injecting null into JavaScript
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: 🎯 ПРОСТОЕ РЕШЕНИЕ - заменяем только IOB, НЕ трогаем временный базал!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: Custom IOB data not available
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Middleware reason: SMB-Basal Middleware: No changes needed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.7;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.75 to 0.5;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 116;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 128.6
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,26,m,tempModulus:,0,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,128.6,CSF:,7.564705882352941
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,83,minutes ago; remainingCATime:,6.4,hours;,87% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,4.6,mg/dL per 5m; CI Duration:,4.1,hours; remaining CI (~2h peak):,0,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,5 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,4.6,mg/dL per 5m; UAM Duration:,0.5,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 357 minIOBPredBG: 315 minZTGuardBG: 229
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 357
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,383,COB:,15,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.4,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,286,bgUndershoot:,-208,zeroTempDuration:,240,zeroTempEffect:,386,carbsReq:,-78
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.75
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,286,,0m 0U/h temp needed; last bolus,58.9m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 100 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 225,
    "tick": "+9",
    "eventualBG": 401,
    "insulinReq": 1.87,
    "reservoir": 23,
    "deliverAt": "2025-09-23T02:24:21.895Z",
    "sensitivityRatio": 0.7,
    "predBGs": {
        "IOB": [
            225,
            234,
            242,
            250,
            257,
            264,
            271,
            277,
            282,
            287,
            292,
            295,
            299,
            302,
            305,
            308,
            310,
            313,
            315,
            318,
            320,
            321,
            323,
            325,
            327,
            328,
            329,
            330,
            331,
            332,
            333,
            334,
            335,
            336,
            336,
            337,
            337,
            337,
            338,
            338,
            338,
            339,
            339,
            339,
            339,
            339,
            340
        ],
        "ZT": [
            225,
            229,
            234,
            239,
            243,
            248,
            253,
            258,
            262,
            268,
            273,
            278,
            283,
            289,
            294,
            300,
            305,
            311,
            317,
            322,
            328,
            334,
            340,
            346,
            352,
            358,
            364,
            370,
            377,
            383,
            390,
            396,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            225,
            234,
            243,
            252,
            260,
            269,
            277,
            285,
            293,
            300,
            307,
            315,
            321,
            328,
            334,
            340,
            346,
            352,
            357,
            362,
            367,
            371,
            376,
            380,
            384,
            387,
            391,
            394,
            397,
            400,
            401
        ]
    },
    "COB": 15,
    "IOB": -0.68,
    "reason": "COB: 15, Dev: 1.5, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 19.8, minGuardBG 13.0, IOBpredBG 18.9, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 1.87; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.25 to maxSafeBasal: 3, temp 0<3U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 3
}
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
APSManager.swift - enactSuggested() - 715 DEV: SMB-basal active: skipping OpenAPS temp basal (pump held at 0 U/h)
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 347 DEV: Enact bolus 0.1, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 371 DEV: Bolus attempt 1/3: 0.1U
Scheduling session Bolus
======================== Bolus ===========================
APSManager.swift - loopCompleted(error:) - 199 DEV: Loop succeeded
Send(Hex): 17a8db2d30030e0100827f
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d30030e0100827f
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
APSManager.swift - reportEnacted(received:) - 805 DEV: Suggestion enacted. Received: true
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
OpenAPS.swift - determineBasal(currentTemp:clock:) - 34 DEV: Start determineBasal
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.68
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 15
  Timestamp: 2025-09-23 02:24:21 +0000
  Reason: COB: 15, Dev: 1.5, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 19.8, minGuardBG 13.0, IOBpredBG 18.9, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 1.87; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.25 to maxSafeBasal: 3, temp 0<3U/hr. 
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.0987077785044931584
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09829986606218655744
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 25min, IOB: 0.09654335345753843712
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.08129363890121883648
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03756503251077984256
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 84min, IOB: 0.11170970347003334656
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09456434343024228352
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 103min, IOB: 0.08756288197218592768
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08315422833402087424
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07601972917383849984
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.0696671793299766784
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.0611170217289611776
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 130min, IOB: 0.05753779186901855232
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10448897711822467072
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 155min, IOB: 0.0737201678259969024
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 165min, IOB: 0.007446964365403993088
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014482914858303545344
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.01442275489782638592
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014366563829634924544
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03332507153135089664
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.006990936218971444224
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.005004289060945734656
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.03353869330331937792
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02476287140718067712
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 235min, IOB: 0.02401695919900467712
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 240min, IOB: 0.018066661972450086912
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 250min, IOB: 0.005811590783477615616
  SMB-Basal IOB: 1.4375991727312089088U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4375991727312089088U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:22 +0000
  Системный IOB: -0.68 U
  Наш Bolus IOB: 1.6341879651165851648 U
  Наш Basal IOB: 1.4375991727312089088 U
  Наш Total IOB: 3.0717871378477940736 U
  РАЗНИЦА: 3.7517871378477940736 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopFirstNotification notification
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopSecondNotification notification
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 25мин, остаток: 96.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.3%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.1%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 84мин, остаток: 55.9%, IOB: 0.112U
  SMB: 0.2U, возраст: 97мин, остаток: 47.3%, IOB: 0.095U
  ... и еще 22 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.68
  Custom Bolus IOB: 1.6341879651165851648
  Custom Basal IOB: 1.4375991727312089088
  Custom Total IOB: 3.0717871378477940736
  Difference: 3.7517871378477940736
SMB-Basal: Custom IOB saved for middleware - Total: 3.0717871378477940736U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.0717871378477946, calculationTime=1758594262.063151
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
Recv(Hex): 17a8db2d340a1d2804195000404557ff02aa
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d340a1d2804195000404557ff02aa
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:73h57m, reservoirLevel:50+, insulinDelivered:104.90, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:10, alerts:slot7Expired)
Send(Hex): 17a8db2d381f1a0e494e532e02002501002000020002170d3f001400030d4000000000000082d6
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d381f1a0e494e532e02002501002000020002170d3f001400030d4000000000000082d6
Recv(Hex): 17a8db2d3c0a1d6804197002404557ff0064
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d3c0a1d6804197002404557ff0064
App is being debugged, do not track this hang
Hang detected: 0.59s (debugger attached, not reporting)
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:73h57m, reservoirLevel:50+, insulinDelivered:104.90, bolusNotDelivered:0.10, lastProgrammingMessageSeqNum:14, alerts:slot7Expired)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"timestamp":"2025-09-23T02:23:13.695Z","automatic":true,"duration":0,"_type":"SMB-Basal","id":"065281c02d41260b204148776bf0ea51","amount":0.050000000000000003},{"id":"83e83cfa5dbf0c3b802cb6fbbf5b5094","delivered_units":0.050000000000000003,"_type":"SMB-Basal","timestamp":"2025-09-23T02:23:03.825Z","automatic":true,"amount":0.050000000000000003,"duration":0},{"timestamp":"2025-09-23T02:21:24.614Z","automatic":true,"_type":"SMB-Basal","delivered_units":0.050000000000000003,"duration":0,"amount":
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
Болюс
ВБС
Болюс
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
DU: Stored pod events: [Болюс: 0.05ед 23/09/2025, 05:23:13 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 05:24:22 4 секунды Определенно]
Stored doses: [Болюс: 0.05ед 23/09/2025, 05:23:13 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 04:58:27 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 05:24:22 4 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 858 DEV: Bolus succeeded: 0.1
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 409 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 02:24:22 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 02:24:22 +0000, endDate: 2025-09-23 02:24:26 +0000, value: 0.1, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 01:58:27 +0000, endDate: 2025-09-23 02:28:27 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.1U -> SMB (isSmbBasal: false)
OpenAPS: IOB calculation result: [
    {
        "iob": -0.68,
        "activity": -0.0069,
        "basaliob": -0.715,
        "bolusiob": 0.035,
        "netbasalinsulin": -1.75,
        "bolusinsulin": 0.3,
        "time": "2025-0
OpenAPS.swift - getCustomIOBData() - 27 DEV: ❌ Custom IOB data not found in middleware/custom-iob.json
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 423 DEV: ❌ No custom IOB data available, injecting null into JavaScript
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: 🎯 ПРОСТОЕ РЕШЕНИЕ - заменяем только IOB, НЕ трогаем временный базал!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB-Basal Middleware: Custom IOB data not available
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Middleware reason: SMB-Basal Middleware: No changes needed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.7;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.75 to 0.5;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 116;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 128.6
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,26,m,tempModulus:,0,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,128.6,CSF:,7.564705882352941
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,83,minutes ago; remainingCATime:,6.4,hours;,87% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,4.6,mg/dL per 5m; CI Duration:,4.1,hours; remaining CI (~2h peak):,0,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,5 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,4.6,mg/dL per 5m; UAM Duration:,0.5,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 357 minIOBPredBG: 315 minZTGuardBG: 229
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 357
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,383,COB:,15,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.4,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,286,bgUndershoot:,-208,zeroTempDuration:,240,zeroTempEffect:,386,carbsReq:,-78
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.75
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,286,,0m 0U/h temp needed; last bolus,58.9m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 100 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 225,
    "tick": "+9",
    "eventualBG": 401,
    "insulinReq": 1.87,
    "reservoir": 23,
    "deliverAt": "2025-09-23T02:24:23.211Z",
    "sensitivityRatio": 0.7,
    "predBGs": {
        "IOB": [
            225,
            234,
            242,
            250,
            257,
            264,
            271,
            277,
            282,
            287,
            292,
            295,
            299,
            302,
            305,
            308,
            310,
            313,
            315,
            318,
            320,
            321,
            323,
            325,
            327,
            328,
            329,
            330,
            331,
            332,
            333,
            334,
            335,
            336,
            336,
            337,
            337,
            337,
            338,
            338,
            338,
            339,
            339,
            339,
            339,
            339,
            340
        ],
        "ZT": [
            225,
            229,
            234,
            239,
            243,
            248,
            253,
            258,
            262,
            268,
            273,
            278,
            283,
            289,
            294,
            300,
            305,
            311,
            317,
            322,
            328,
            334,
            340,
            346,
            352,
            358,
            364,
            370,
            377,
            383,
            390,
            396,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            225,
            234,
            243,
            252,
            260,
            269,
            277,
            285,
            293,
            300,
            307,
            315,
            321,
            328,
            334,
            340,
            346,
            352,
            357,
            362,
            367,
            371,
            376,
            380,
            384,
            387,
            391,
            394,
            397,
            400,
            401
        ]
    },
    "COB": 15,
    "IOB": -0.68,
    "reason": "COB: 15, Dev: 1.5, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 19.8, minGuardBG 13.0, IOBpredBG 18.9, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 1.87; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.25 to maxSafeBasal: 3, temp 0<3U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 3
}
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.68
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 15
  Timestamp: 2025-09-23 02:24:23 +0000
  Reason: COB: 15, Dev: 1.5, BGI: 0.2, ISF: 7.1, CR: 17, Target: 6.4, minPredBG 19.8, minGuardBG 13.0, IOBpredBG 18.9, COBpredBG 22.3; Eventual BG 22.3 >= 6.4,  insulinReq 1.87; maxBolus 0.1. Microbolusing 0.1U. adj. req. rate: 4.25 to maxSafeBasal: 3, temp 0<3U/hr. 
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 3min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 18min, IOB: 0.09868936692226215936
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 20min, IOB: 0.09827910095099486208
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 25min, IOB: 0.09651540505056858112
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 50min, IOB: 0.0812459193662275072
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 58min, IOB: 0.03754026720639753216
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 85min, IOB: 0.11161548185609744384
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 97min, IOB: 0.09447734692390905856
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 103min, IOB: 0.0874795142600420864
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 106min, IOB: 0.08307333215916357632
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 112min, IOB: 0.07594312725034174464
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 118min, IOB: 0.06959469997064795136
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 126min, IOB: 0.06105052872329982976
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 130min, IOB: 0.05747395394589519872
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 135min, IOB: 0.10436948138700935168
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 155min, IOB: 0.0736267794600336896
  Bolus: 0.050000000000000044U at 2025-09-22 23:38:25 +0000, age: 166min, IOB: 0.00743695332138786816
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 167min, IOB: 0.014463294470768869376
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 167min, IOB: 0.014403193591177986048
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 167min, IOB: 0.014347057772351524864
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 192min, IOB: 0.03327251399746571264
  Bolus: 0.1U at 2025-09-22 23:04:38 +0000, age: 199min, IOB: 0.006979357380417482752
  Bolus: 0.1U at 2025-09-22 22:51:49 +0000, age: 212min, IOB: 0.004995169466748182528
  Bolus: 1U at 2025-09-22 22:38:03 +0000, age: 226min, IOB: 0.03346982501858630656
  Bolus: 0.8U at 2025-09-22 22:35:29 +0000, age: 228min, IOB: 0.02471075329437697536
  Bolus: 0.95U at 2025-09-22 22:29:17 +0000, age: 235min, IOB: 0.02396309971741592064
  Bolus: 0.85U at 2025-09-22 22:24:17 +0000, age: 240min, IOB: 0.018023822938955618304
  Bolus: 0.4U at 2025-09-22 22:14:16 +0000, age: 250min, IOB: 0.005795945601980980224
  SMB-Basal IOB: 1.4368279361552592896U (from 67 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.4368279361552592896U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 02:24:26 +0000
  Системный IOB: -0.68 U
  Наш Bolus IOB: 1.7328352920045236224 U
  Наш Basal IOB: 1.4368279361552592896 U
  Наш Total IOB: 3.169663228159782912 U
  РАЗНИЦА: 3.849663228159782912 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 3мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 20мин, остаток: 98.3%, IOB: 0.098U
  SMB: 0.1U, возраст: 25мин, остаток: 96.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 50мин, остаток: 81.2%, IOB: 0.081U
  Bolus: 0.05U, возраст: 58мин, остаток: 75.1%, IOB: 0.038U
  Bolus: 0U, возраст: 74мин, остаток: 63.4%, IOB: 0.000U
  SMB: 0.2U, возраст: 85мин, остаток: 55.8%, IOB: 0.112U
  ... и еще 23 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.68
  Custom Bolus IOB: 1.7328352920045236224
  Custom Basal IOB: 1.4368279361552592896
  Custom Total IOB: 3.169663228159782912
  Difference: 3.849663228159782912
🧮 Custom IOB Update:
  System IOB: -0.68
  Custom IOB: 3.169663228159782912
  Difference: 3.849663228159782912
  Show Custom: true