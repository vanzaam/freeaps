Skipping updateConnections until state is poweredOn
OmniBLE centralManager(_:willRestoreState:): {
    kCBRestoredPeripherals =     (
        "<CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>"
    );
}
Created device
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod peripheral was restored EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7)
centralManagerDidUpdateState(_:): 5
Re-connecting to known peripheral EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
Applying configuration
Discovered service: <CBService: 0x109d8cbc0, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
centralManager(_:didConnect:): <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 247, state = connected>
PeripheralManager - didConnect - running assertConfiguration
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=false
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -58
NightscoutManager.swift - subscribe() - 74 DEV: Network status: reachable by WiFi
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:46:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:06:19.074Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:46:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:06:23.088Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:57:57.808Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:17:57.808Z&find%5BenteredBy%5D=freeaps-x&count=100
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: noBolus
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Bolus to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Bolus&find%5Binsulin%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:56:37.407Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:37.407Z&find%5BenteredBy%5D=freeaps-x&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:32:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:52:29.426Z&find%5BenteredBy%5D=freeaps-x&count=100
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
HealthKitManager.swift - init(resolver:) - 95 DEV: HealthKitManager did create
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d20e08bc5d6c9f3d9dd10c
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d20e08bc5d6c9f3d9dd10c
NightscoutAPI.swift - deleteTreatmentsByIds(_:logName:) - 352 DEV: DELETE Bolus by _id: 68d20c0abc5d6c9f3d9c22bb
NetworkService.swift - run(_:) - 17 DEV: DELETE  ***/api/v1/treatments/68d20c0abc5d6c9f3d9c22bb
Restoring peripheral from state: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
Connecting to peripheral: B9AB9AF1-6354-C8ED-24A7-00FD69122AAA
API MISUSE: <CBCentralManager: 0x109ea5200> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover [F8083532-849E-531C-C594-30F1F86A4EA5]
Unable to run command: central state = Optional("unknown"), peripheral state = CBPeripheralState(rawValue: 1)
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
Error applying peripheral configuration: notReady
Restoring peripheral from state: E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
API MISUSE: <CBCentralManager: 0x109ea5200> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: AF975C27-1624-F114-76E3-514F1731EFCE
Connecting to peripheral: AF975C27-1624-F114-76E3-514F1731EFCE
API MISUSE: <CBCentralManager: 0x109ea5200> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Restoring peripheral from state: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
Connecting to peripheral: 5DFBA815-D9D7-679E-B6BE-2887E06E54BB
API MISUSE: <CBCentralManager: 0x109ea5200> can only accept this command while in the powered on state
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
centralManagerDidUpdateState(_:): 5
Scanning for peripherals and listening for connection events
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:47:08.265Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:47:08.269Z
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 21:06:37 +0000, 0.2)
NightscoutManager.swift - processPendingDeletions() - 415 DEV: Pending deletion processed: bolus(2025-09-22 20:07:57 +0000, 0.5)
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T19:36:19.074Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T20:16:19.074Z&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T20:36:23.088Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T21:16:23.088Z&count=100
NightscoutAPI.swift - performFetch(queryItems:logName:) - 255 DEV: Fetching Temp Target (fallback) to delete: https://vanzaam.aw2.ru/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary%20Target&find%5Bcreated_at%5D%5B$gte%5D=2025-09-22T21:22:29.426Z&find%5Bcreated_at%5D%5B$lte%5D=2025-09-22T22:02:29.426Z&count=100
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
NightscoutManager.swift - processPendingDeletions() - 417 DEV: Pending deletion failed: Не удалось завершить операцию. (FreeAPS.NightscoutAPI.Error, ошибка 2)
UserNotificationsManager.swift - requestNotificationPermissionsIfNeeded() - 288 DEV: UNUserNotificationCenter.authorizationStatus: UNAuthorizationStatus(rawValue: 2)
centralManager(_:didDisconnectPeripheral:error:): error=The specified device has disconnected from us. <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 Optional(Error Domain=CBErrorDomain Code=7 "The specified device has disconnected from us." UserInfo={NSLocalizedDescription=The specified device has disconnected from us.})
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
Application context data is nil
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 228 DEV: WCSession is activated: true
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 237 DEV: WCSession activated successfully
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 239 DEV: Watch is paired
WatchManager.swift - session(_:activationDidCompleteWith:error:) - 241 DEV: Watch app is installed
Application context data is nil
SMB-Basal Manager initialized: isEnabled=true
SMB-Basal Manager starting...
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09915316733667756032
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 21min, IOB: 0.0977525659402185728
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 32min, IOB: 0.09270016959224625152
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08954595989113714688
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04382541172849037312
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 42min, IOB: 0.1297443593880788992
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.1601733867353573376
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 61min, IOB: 0.14597800121423302656
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2692794230474743808
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 72min, IOB: 0.16163716008212066304
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 82min, IOB: 0.05742061701813400576
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05494808705567920128
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05424491541022644224
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 101min, IOB: 0.04461827694015350272
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04374347465469056
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 107min, IOB: 0.04080565188582726656
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02729794157404934144
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.0117963169644312576
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 167min, IOB: 0.02870357182390882304
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.0219972167896832768
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 185min, IOB: 0.01946857481267943936
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017935291155597197312
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.01554846353890899968
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013520672922384523264
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010937196125629669376
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 212min, IOB: 0.0099064189583413248
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.01687758884644830208
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 237min, IOB: 0.00918554179308430336
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014518669029442428928
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014398895110931513344
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014287286497144840192
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.001628666216165752832
  SMB-Basal IOB: 1.348084820887906304U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.348084820887906304U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:09 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.894694574505809408 U
  Наш Basal IOB: 1.348084820887906304 U
  Наш Total IOB: 3.242779395393715712 U
  РАЗНИЦА: 4.067779395393715712 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.2%, IOB: 0.099U
  SMB: 0.1U, возраст: 21мин, остаток: 97.8%, IOB: 0.098U
  SMB: 0.1U, возраст: 32мин, остаток: 92.7%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.5%, IOB: 0.090U
  SMB: 0.05U, возраст: 41мин, остаток: 87.7%, IOB: 0.044U
  SMB: 0.15U, возраст: 42мин, остаток: 86.5%, IOB: 0.130U
  SMB: 0.2U, возраст: 52мин, остаток: 80.1%, IOB: 0.160U
  SMB: 0.2U, возраст: 61мин, остаток: 73.0%, IOB: 0.146U
  SMB: 0.4U, возраст: 69мин, остаток: 67.3%, IOB: 0.269U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.894694574505809408
  Custom Basal IOB: 1.348084820887906304
  Custom Total IOB: 3.242779395393715712
  Difference: 4.067779395393715712
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.242779395393715712U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.242779395393717, calculationTime=1758599229.631794
SMB-Basal: Middleware installed successfully
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.242779395393717U
centralManager(_:didConnect:): <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
didReadRSSI: -77
Error reading message: Пустое значение
Disconnecting due to error while reading pod response
centralManager(_:didDisconnectPeripheral:error:): error=None <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod disconnected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7 nil
Pod session sync error: incorrectResponse
Delegate configuration notified
Peripheral configuration completed
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
Applying configuration
runCommand guard failed - bluetooth not running or peripheral not connected: peripheral <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
Error applying peripheral configuration: notReady
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
Applying configuration
runCommand guard failed - bluetooth not running or peripheral not connected: peripheral <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = disconnected>
Error applying peripheral configuration: notReady
omnipodPeripheralDidDisconnect... will auto-reconnect
Reconnecting disconnected autoconnect peripheral
SMB-Basal: tick() - processing basal replacement
centralManager(_:didConnect:): <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect: <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
PeripheralManager - didConnect - running assertConfiguration
Configured peripheral has no services. Reconfiguring <CBPeripheral: 0x109de8a80, identifier = EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7, name = TWI BOARD, mtu = 23, state = connected>
Applying configuration

SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: Pod connected EBF46251-2FE0-6FE3-B72C-F3D50DA1D7F7
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 12 min, isZero: true
didReadRSSI: -83
[u 23EFC09E-EB1D-4372-8AEB-E82F84085C0E:m (null)] [com.swiftkey.SwiftKeyApp.Keyboard(4.2.5)] RB query for the extension process state failed with error: Error Domain=RBSServiceErrorDomain Code=1 "Client not entitled" UserInfo={RBSEntitlement=com.apple.runningboard.process-state, NSLocalizedFailureReason=Client not entitled, RBSPermanent=false}
didDiscoverServices
Discovered service: <CBService: 0x12fcefd00, isPrimary = YES, UUID = 1A7E4024-E3ED-4464-8B7E-751E03D0DC5F>
PodComms completeConfiguration: isPaired=true needsSessionEstablishment=true
App is being debugged, do not track this hang
Hang detected: 1.96s (debugger attached, not reporting)
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09913026481458915328
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09771741003713830912
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 32min, IOB: 0.09264468796763875328
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08948374351177275392
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04379280709116980224
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12964424500520183808
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.16002865522742923264
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 61min, IOB: 0.14582859268257079296
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2689809794193764864
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 72min, IOB: 0.16145191276107481088
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 82min, IOB: 0.05734914914804022272
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05487788363999451136
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05417510243050719232
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 101min, IOB: 0.04455505975941632
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.0436809646075689472
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 107min, IOB: 0.0407456393141698816
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02725174115094595584
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.011775443762014824448
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 167min, IOB: 0.02864508939820032
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.021949005268565888
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 185min, IOB: 0.0194244511111734016
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017893713395240157184
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015510962974173827072
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013486760721731278848
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.0109080554166262272
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009879256862420682752
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.016829078128697757696
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 237min, IOB: 0.009153678832461142016
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014460030659754541056
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014340575417640450048
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014229264411575128064
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0016181460559395067904
  SMB-Basal IOB: 1.3468915088200448U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3468915088200448U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:15 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.892715467544746496 U
  Наш Basal IOB: 1.3468915088200448 U
  Наш Total IOB: 3.239606976364791296 U
  РАЗНИЦА: 4.064606976364791296 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 32мин, остаток: 92.6%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.5%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.6%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.4%, IOB: 0.130U
  SMB: 0.2U, возраст: 52мин, остаток: 80.0%, IOB: 0.160U
  SMB: 0.2U, возраст: 61мин, остаток: 72.9%, IOB: 0.146U
  SMB: 0.4U, возраст: 69мин, остаток: 67.2%, IOB: 0.269U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.892715467544746496
  Custom Basal IOB: 1.3468915088200448
  Custom Total IOB: 3.239606976364791296
  Difference: 4.064606976364791296
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.239606976364791296
  Difference: 4.064606976364791296
  Show Custom: true
App is being debugged, do not track this hang
Hang detected: 0.69s (debugger attached, not reporting)
App is being debugged, do not track this hang
Hang detected: 0.65s (debugger attached, not reporting)
Session Established
msgSequenceNumber: 3
Setting podState transport state to ## MessageTransportState
eapSeq: 1387
msgSeq: 3
nonceSeq: 0
messageNumber: 5
Scheduling session Post-connect status fetch
Delegate configuration notified
Peripheral configuration completed
======================== Post-connect status fetch ===========================
Send(Hex): 17a8db2d10030e010701fc
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d10030e010701fc
Recv(Hex): 17a8db2d140a1d28043498004046a3ff823a
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d140a1d28043498004046a3ff823a
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:75h20m, reservoirLevel:50+, insulinDelivered:107.65, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:3, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
Болюс
ВБС
DU: Stored pod events: [Болюс: 0.05ед 23/09/2025, 06:44:35 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
Stored doses: [Болюс: 0.05ед 23/09/2025, 06:44:35 2 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно]
------------------------ Post-connect status fetch ---------------------------
Start of idle at Optional(2025-09-23 03:47:17 +0000)
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
AddGlucoseStateModel.swift - add() - 19 DEV: AddGlucose: start units=mmol/L input=7.5
AddGlucoseStateModel.swift - add() - 30 DEV: AddGlucose: converted to mg/dL=135 at 2025-09-23 03:47:13 +0000
AddGlucoseStateModel.swift - add() - 55 DEV: AddGlucose: stored locally id=BD7394B9-7587-40BE-BB86-CEF29C77EFE3
DeviceDataManager.swift - updatePumpData() - 215 DEV: Start updating the pump data
DeviceDataManager.swift - updatePumpData() - 218 DEV: Waiting for pump update and loop recommendation
Skipping status update because pumpData is fresh
DeviceDataManager.swift - updatePumpData() - 221 DEV: Pump data updated.
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/entries.json
AddGlucoseStateModel.swift - add() - 58 DEV: AddGlucose: requested NS upload
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
AddGlucoseStateModel.swift - add() - 60 DEV: AddGlucose: requested HealthKit save
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09911463096282943488
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09769352283628685312
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09260711548748429312
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08944163939276136448
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04377074859038031872
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12957652284789202944
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15993080680550232064
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 61min, IOB: 0.14572762065228087296
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2687793313822671872
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16132675823018979328
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 82min, IOB: 0.05730087436359768064
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05483046572001490944
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05412794897431328768
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 101min, IOB: 0.0445123696394491904
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04363875269770451968
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04070511607129449472
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.027220551843908992
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.011761353477535232
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 167min, IOB: 0.02860561907125177856
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.02191646999906870784
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 185min, IOB: 0.019394675784820608
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.0178656569335837696
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.0154856590912037888
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013463879300520957952
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010888395024405880832
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009860932095414925312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.01679635275528394752
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.009132190048862830592
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014420494342555328512
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.001430125416498117632
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014190144004627144704
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.001611060401979270144
  SMB-Basal IOB: 1.3460821198449238016U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3460821198449238016U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:19 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.891378209733304832 U
  Наш Basal IOB: 1.3460821198449238016 U
  Наш Total IOB: 3.2374603295782286336 U
  РАЗНИЦА: 4.0624603295782286336 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.6%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.4%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.5%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.4%, IOB: 0.130U
  SMB: 0.2U, возраст: 52мин, остаток: 80.0%, IOB: 0.160U
  SMB: 0.2U, возраст: 61мин, остаток: 72.9%, IOB: 0.146U
  SMB: 0.4U, возраст: 69мин, остаток: 67.2%, IOB: 0.269U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.891378209733304832
  Custom Basal IOB: 1.3460821198449238016
  Custom Total IOB: 3.2374603295782286336
  Difference: 4.0624603295782286336
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2374603295782286336
  Difference: 4.0624603295782286336
  Show Custom: true
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending glucocoseNotification notification
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09909522053226502144
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09766398673104642048
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.092560795321701888
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08938976465111066624
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04374357812272688128
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12949311706898679808
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15981035840009596928
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 61min, IOB: 0.14560336951411019776
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.268531241544244736
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16117279099317839872
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05724149634786735104
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05477214469161852928
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05406995404682494976
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 101min, IOB: 0.04445987349149692928
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.0435868453654517504
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04065528765979374592
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02718220878455380992
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.011744032410458355712
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02855710710535936512
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.0218764851942032256
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.0193580843008194432
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017831178709577486336
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015454564921932648448
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013435763226613598208
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010864238614718593024
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009838417535031250944
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.01675614737613831168
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.00910579623200526848
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014371944683093338112
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014252968821380722688
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014142105501566697472
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0016023676416235597824
  SMB-Basal IOB: 1.3450842165000249344U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3450842165000249344U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:24 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.88973291843616 U
  Наш Basal IOB: 1.3450842165000249344 U
  Наш Total IOB: 3.2348171349361849344 U
  РАЗНИЦА: 4.0598171349361849344 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.7%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.6%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.4%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.5%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.3%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.9%, IOB: 0.160U
  SMB: 0.2U, возраст: 61мин, остаток: 72.8%, IOB: 0.146U
  SMB: 0.4U, возраст: 69мин, остаток: 67.1%, IOB: 0.269U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.88973291843616
  Custom Basal IOB: 1.3450842165000249344
  Custom Total IOB: 3.2348171349361849344
  Difference: 4.0598171349361849344
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2348171349361849344
  Difference: 4.0598171349361849344
  Show Custom: true
SMB-Basal: Settings changed - smbBasalEnabled=false, current isEnabled=true
SMB-Basal: Disabling and stopping SMB-basal system
SMB-Basal: Middleware removed
SMB-Basal: Settings changed - smbBasalEnabled=true, current isEnabled=false
SMB-Basal: Enabling and starting SMB-basal system
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09908453164241938432
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09764777782211592192
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09253543928181878784
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08936138290706814976
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04372871580258232832
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12944749885672828928
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15974450810433574912
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14553545991337562112
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2683956701673185792
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16108865941284851712
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05720905556402379776
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05474028280222534656
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05403827069760359424
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 101min, IOB: 0.0444311984935975424
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.0435584923502500352
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04062807131449837056
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02716126952867177984
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.011734573811348619264
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02853061993381619712
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.0218546554011333888
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.0193381077694519552
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017812356304144576512
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015437590618968363008
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.01342041527229827072
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010851052971152812032
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009826128453224435712
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.01673420324553975808
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.00909139355832233472
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014345457163729262592
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014226625609784270848
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014115897056657616896
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0015976289328860643328
  SMB-Basal IOB: 1.3445412003850627072U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3445412003850627072U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:27 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.88883380891678592 U
  Наш Basal IOB: 1.3445412003850627072 U
  Наш Total IOB: 3.2333750093018486272 U
  РАЗНИЦА: 4.0583750093018486272 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.5%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.4%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.5%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.3%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.9%, IOB: 0.160U
  SMB: 0.2U, возраст: 62мин, остаток: 72.8%, IOB: 0.146U
  SMB: 0.4U, возраст: 69мин, остаток: 67.1%, IOB: 0.268U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.88883380891678592
  Custom Basal IOB: 1.3445412003850627072
  Custom Total IOB: 3.2333750093018486272
  Difference: 4.0583750093018486272
SMB-Basal: 🔄 Attempting to save Custom IOB data...
SMB-Basal: ✅ Data saved in transaction
SMB-Basal: Custom IOB saved for middleware - Total: 3.2333750093018486272U
SMB-Basal: Saved to middleware/custom-iob.json: totalIOB=3.233375009301848, calculationTime=1758599247.383085
SMB-Basal: Middleware installed successfully
SMB-Basal: ✅ Verification SUCCESS - data saved as CustomIOBData struct!
SMB-Basal: ✅ Verified IOB: 3.233375009301848U
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.0990754854015123456
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09763409025998589952
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09251406215206217728
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08933746302037229568
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04371619172025119744
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12940906032221315072
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15968903711493869568
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14547826497431898112
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2682815012724659712
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.1610178125793724416
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.057181739983291136
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05471345543386187776
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05401159386892476416
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04440705699829574656
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.0435346221259554304
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.0406051586554597632
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02714364343787994112
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 141min, IOB: 0.011726612088388800512
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02850832669259084288
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.0218362829809851648
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.019321295461464192
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017796515545255940096
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015423305575128612864
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013407499245327665152
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010839957077897934848
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009815787229904437248
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 218min, IOB: 0.01671573793172612096
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.009079275846043623424
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014323174718246070272
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014204464618962522112
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.001409384949030634496
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0015936446387664121856
  SMB-Basal IOB: 1.3440828881767714816U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3440828881767714816U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:29 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.888076628517393664 U
  Наш Basal IOB: 1.3440828881767714816 U
  Наш Total IOB: 3.2321595166941651456 U
  РАЗНИЦА: 4.0571595166941651456 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.5%, IOB: 0.093U
  SMB: 0.1U, возраст: 38мин, остаток: 89.3%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.4%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.3%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.8%, IOB: 0.160U
  SMB: 0.2U, возраст: 62мин, остаток: 72.7%, IOB: 0.145U
  SMB: 0.4U, возраст: 69мин, остаток: 67.1%, IOB: 0.268U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.888076628517393664
  Custom Basal IOB: 1.3440828881767714816
  Custom Total IOB: 3.2321595166941651456
  Difference: 4.0571595166941651456
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2321595166941651456
  Difference: 4.0571595166941651456
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 12 min, isZero: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09905564071440449536
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.0976041594653763584
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09246742577903497216
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08928530507955090432
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04368888815920925696
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12932526964913340416
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.1595681666041633792
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.1453536720092368896
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2680328354575309312
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16086351395555999744
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05712225728240060416
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05465503831941644288
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05395350522358326272
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04435449646536407552
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04348265281241030656
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.0405552760432875264
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02710527662245376512
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011709282600487671808
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02845981013475642368
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.0217963020603017472
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01928471072234490368
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017762045701648388096
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015392222170505326592
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013379395791795830784
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010815815393529229312
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.00979328814166158336
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016675565410012803072
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.009052918321869321216
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.001427471672479685632
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014156270934460700672
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 250min, IOB: 0.0014045902639271190528
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.001584986615001593856
  SMB-Basal IOB: 1.3430818786445549568U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3430818786445549568U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:34 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.886427411735884288 U
  Наш Basal IOB: 1.3430818786445549568 U
  Наш Total IOB: 3.2295092903804392448 U
  РАЗНИЦА: 4.0545092903804392448 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.1%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.5%, IOB: 0.092U
  SMB: 0.1U, возраст: 38мин, остаток: 89.3%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.4%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.2%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.8%, IOB: 0.160U
  SMB: 0.2U, возраст: 62мин, остаток: 72.7%, IOB: 0.145U
  SMB: 0.4U, возраст: 69мин, остаток: 67.0%, IOB: 0.268U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.886427411735884288
  Custom Basal IOB: 1.3430818786445549568
  Custom Total IOB: 3.2295092903804392448
  Difference: 4.0545092903804392448
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2295092903804392448
  Difference: 4.0545092903804392448
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.0990356876917907456
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09757419419363616768
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.0924208836737455104
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08923328746072049664
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04366166556049744896
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.1292417391027209216
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15944773727012007936
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.145229580012347392
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2677852221191329792
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.1607098812843384832
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.0570630427350202368
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05459688788564393984
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.0538956826649728512
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04430218681015038976
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04343093238671472128
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.0405056349474258432
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02706710445309063168
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011692042174644836352
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02841155232988927488
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.02175653817150177792
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01924832616141147648
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017727765468658102272
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.015361311339113228288
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013351449799082184704
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010791810898903463936
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009770917776130189312
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016635625319873572864
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.00902672060695133184
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.001422656491215356928
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014108382005341929472
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001399825921213559808
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.00157639240471314432
  SMB-Basal IOB: 1.342088833169246208U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.342088833169246208U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:39 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.88478512331590528 U
  Наш Basal IOB: 1.342088833169246208 U
  Наш Total IOB: 3.226873956485151488 U
  РАЗНИЦА: 4.051873956485151488 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.6%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.4%, IOB: 0.092U
  SMB: 0.1U, возраст: 38мин, остаток: 89.2%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.3%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.2%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.7%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.6%, IOB: 0.145U
  SMB: 0.4U, возраст: 69мин, остаток: 66.9%, IOB: 0.268U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.88478512331590528
  Custom Basal IOB: 1.342088833169246208
  Custom Total IOB: 3.226873956485151488
  Difference: 4.051873956485151488
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.226873956485151488
  Difference: 4.051873956485151488
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 4min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09901533112363993088
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09754375197121431552
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09237374958927720448
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08918064342005694464
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04363412271203459072
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12915723767273084928
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15932597476637022208
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14510416098977521664
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2675350140373550592
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.1605546517224511488
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05700322425373888512
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05453814774003852288
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05383727463555001344
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04424935773456025088
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04337869923344162816
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.0404555043902830592
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.0270285648981551104
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011674636978043039744
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02836284284178572288
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 180min, IOB: 0.02171640595162507776
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01921160617464011264
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 189min, IOB: 0.017693170226937348096
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 195min, IOB: 0.01533011807272559616
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.01332324991242872832
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010767590271501002752
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009748346870268602368
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.01659532981462206464
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.009000297174909468672
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.00141780107741599232
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014060093195450099712
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001395021818686193664
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0015677356247598256128
  SMB-Basal IOB: 1.3410813159844519936U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3410813159844519936U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:44 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.883125573020566016 U
  Наш Basal IOB: 1.3410813159844519936 U
  Наш Total IOB: 3.2242068890050180096 U
  РАЗНИЦА: 4.0492068890050180096 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 4мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.4%, IOB: 0.092U
  SMB: 0.1U, возраст: 38мин, остаток: 89.2%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.3%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.1%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.7%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.6%, IOB: 0.145U
  SMB: 0.4U, возраст: 69мин, остаток: 66.9%, IOB: 0.268U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.883125573020566016
  Custom Basal IOB: 1.3410813159844519936
  Custom Total IOB: 3.2242068890050180096
  Difference: 4.0492068890050180096
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2242068890050180096
  Difference: 4.0492068890050180096
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09899488623982311424
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09751330488613965824
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09232675525052882944
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08912819040727078912
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04360668733573001216
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12907307767205507072
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15920477042673811456
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.1449793633209515008
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 69min, IOB: 0.2672860984693992448
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.1604002370014691328
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.056943731273523712
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 86min, IOB: 0.05447973058106087424
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 87min, IOB: 0.05377918867835164672
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.044196830151684096
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.0433267650102405632
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04040566337159578624
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02699025689015816192
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011657337506605862912
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02831443872500275712
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02167652916823739136
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01917512150355980288
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.01765879769910797312
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015299127226014623744
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013295234467596797952
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 209min, IOB: 0.010743530005981427712
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009725926280287143936
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016555305289045999616
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.008974058825296360448
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.001412980925131845632
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 250min, IOB: 0.0014012155321429630976
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013902526528903886848
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 275min, IOB: 0.0015591509334368587776
  SMB-Basal IOB: 1.3400806791504238592U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3400806791504238592U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:49 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.881474543707057664 U
  Наш Basal IOB: 1.3400806791504238592 U
  Наш Total IOB: 3.2215552228574815232 U
  РАЗНИЦА: 4.0465552228574815232 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.098U
  SMB: 0.1U, возраст: 33мин, остаток: 92.3%, IOB: 0.092U
  SMB: 0.1U, возраст: 38мин, остаток: 89.1%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.2%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.0%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.6%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.5%, IOB: 0.145U
  SMB: 0.4U, возраст: 69мин, остаток: 66.8%, IOB: 0.267U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.881474543707057664
  Custom Basal IOB: 1.3400806791504238592
  Custom Total IOB: 3.2215552228574815232
  Difference: 4.0465552228574815232
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2215552228574815232
  Difference: 4.0465552228574815232
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09897426397435752448
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09748271886569897984
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09227969205373059072
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 38min, IOB: 0.08907569519171493888
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 41min, IOB: 0.04357923735565812736
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12898888449117728768
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15908358400099610624
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14485463021283577856
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.26703736426301568
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16024594767176767488
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.0568842980330934784
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05442137541545115648
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05372116526957843456
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04414436925776607744
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04327489755635037184
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04035588905828865024
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 133min, IOB: 0.02695200905931158016
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011640066358953910272
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02826612330644681728
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02163672927828563968
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01913870877581653504
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017624493959858794496
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015268200000305975296
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013267277976552493056
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010719522310035746816
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009703555550580115456
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016515372385516261376
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.008947887902018660352
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014081744072096944128
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013964353292129200128
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001385497024944648192
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015505997175909060608
  SMB-Basal IOB: 1.339080535916455936U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.339080535916455936U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:54 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.879824666014121472 U
  Наш Basal IOB: 1.339080535916455936 U
  Наш Total IOB: 3.218905201930577408 U
  РАЗНИЦА: 4.043905201930577408 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 33мин, остаток: 92.3%, IOB: 0.092U
  SMB: 0.1U, возраст: 38мин, остаток: 89.1%, IOB: 0.089U
  SMB: 0.05U, возраст: 41мин, остаток: 87.2%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 86.0%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.5%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.4%, IOB: 0.145U
  SMB: 0.4U, возраст: 70мин, остаток: 66.8%, IOB: 0.267U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.879824666014121472
  Custom Basal IOB: 1.339080535916455936
  Custom Total IOB: 3.218905201930577408
  Difference: 4.043905201930577408
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.218905201930577408
  Difference: 4.043905201930577408
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 17min, IOB: 0.09895345577347518464
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09745198072617934848
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09223253913296497664
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08902313436087061504
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04355176049951324672
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12890462044278321152
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 52min, IOB: 0.15896236098100772864
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14472990537902194688
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2667886989678652928
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.16009171392987928576
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05682489759890130944
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.054363055785220864
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05366317809813238784
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04409195122497784832
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04322307331029586944
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04030615882971574272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02691380399014526464
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.0116228156668241408
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02821787454193987072
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02159698811004680192
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.0191023513609586816
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017590243338667077632
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015237322262363498496
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013239367659040817152
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.01069555620248738816
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009681224446000881664
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.01647551282568464384
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.00892177240358536192
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 250min, IOB: 0.0014033793157464229888
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013916665148664184832
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013807527501808130048
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015420780221363283968
  SMB-Basal IOB: 1.33708166778564608U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.33708166778564608U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:47:59 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.87817519445147776 U
  Наш Basal IOB: 1.33708166778564608 U
  Наш Total IOB: 3.21525686223712384 U
  РАЗНИЦА: 4.04025686223712384 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 17мин, остаток: 99.0%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.5%, IOB: 0.097U
  SMB: 0.1U, возраст: 33мин, остаток: 92.2%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 89.0%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 87.1%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 85.9%, IOB: 0.129U
  SMB: 0.2U, возраст: 52мин, остаток: 79.5%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.4%, IOB: 0.145U
  SMB: 0.4U, возраст: 70мин, остаток: 66.7%, IOB: 0.267U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.87817519445147776
  Custom Basal IOB: 1.33708166778564608
  Custom Total IOB: 3.21525686223712384
  Difference: 4.04025686223712384
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.21525686223712384
  Difference: 4.04025686223712384
  Show Custom: true
DeviceDataManager.swift - heartbeat(date:) - 191 WARN: error("Pump updating already in progress. Skip updating.")
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.098932439285472768
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.09742105724186075136
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09218524527652849664
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08897045077168381952
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.0435242268825444096
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.128820193859077632
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.1588409693834082304
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14460505294741282816
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2665398316083440128
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.15993736768330715136
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05676546521475915776
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05430470810717131776
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05360516394185531392
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04403951888746925056
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 103min, IOB: 0.04317123575254194688
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.0402564184461641216
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02687560000065650688
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011605566608099637248
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02816963977649359872
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02155726228912982528
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.0190660095761591296
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.0175560084512495104
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015206460307929628672
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 201min, IOB: 0.013211473048606437376
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010671605520709718016
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009658908588078962688
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.01643568309355454464
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.008895683813561516032
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.0013985904139828252672
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.001386903881025702912
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013760146473060452352
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015335765347604721664
  SMB-Basal IOB: 1.3360832924808421376U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3360832924808421376U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:04 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.876524331840905728 U
  Наш Basal IOB: 1.3360832924808421376 U
  Наш Total IOB: 3.2126076243217478656 U
  РАЗНИЦА: 4.0376076243217478656 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 33мин, остаток: 92.2%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 89.0%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 87.0%, IOB: 0.044U
  SMB: 0.15U, возраст: 43мин, остаток: 85.9%, IOB: 0.129U
  SMB: 0.2U, возраст: 53мин, остаток: 79.4%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.3%, IOB: 0.145U
  SMB: 0.4U, возраст: 70мин, остаток: 66.6%, IOB: 0.267U
  ... и еще 29 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.876524331840905728
  Custom Basal IOB: 1.3360832924808421376
  Custom Total IOB: 3.2126076243217478656
  Difference: 4.0376076243217478656
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2126076243217478656
  Difference: 4.0376076243217478656
  Show Custom: true
FetchGlucoseManager.swift - subscribe() - 63 DEV: FetchGlucoseManager heartbeat
FetchGlucoseManager.swift - subscribe() - 64 DEV: Start fetching glucose
FetchTreatmentsManager.swift - subscribe() - 26 DEV: FetchTreatmentsManager heartbeat
FetchTreatmentsManager.swift - subscribe() - 27 DEV: Start fetching carbs and temptargets
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5Bcarbs%5D%5B$exists%5D=true&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:48:08.271Z
NetworkService.swift - run(_:) - 17 DEV: GET  ***/api/v1/treatments.json?find%5BeventType%5D=Temporary+Target&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5BenteredBy%5D%5B$ne%5D=freeaps-x&find%5Bduration%5D%5B$exists%5D=true&find%5Bcreated_at%5D%5B$gt%5D=2025-09-22T03:48:08.274Z
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:41:41 +0000
HealthKitManager.swift - fetch() - 298 DEV: Start fetching HealthKitManager
Scanning for peripherals and listening for connection events
HealthKitManager.swift - fetch() - 300 DEV: HealthKitManager cant return any data, because useAppleHealth option is disable
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09891123962744274944
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 22min, IOB: 0.097389985149138944
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.09213786640918398976
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08891770666017234944
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04349666901730084352
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 43min, IOB: 0.12873570441279422464
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15871955240403124224
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14448022011457171456
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2662910554978159616
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.1597830908210158592
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05670607089890361344
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05424640111595083776
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05354719114096359424
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04398713399325215232
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04311944592928700928
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04020672647986449408
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02683744206463609856
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011588339486763044864
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02812147577529961984
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.0215175985625312512
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01902972618453875456
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.01752182958047991808
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015175650449423929344
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013183626964831039488
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010647698442174038016
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009636634230141493248
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016395930044164018176
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.008869652815902905344
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001393813333369709568
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.001382153028232868864
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013712882879976853504
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015251052457973202944
  SMB-Basal IOB: 1.3350852594543104U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3350852594543104U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:09 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.874874024167973632 U
  Наш Basal IOB: 1.3350852594543104 U
  Наш Total IOB: 3.209959283622284032 U
  РАЗНИЦА: 4.034959283622284032 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 22мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 33мин, остаток: 92.1%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.9%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 87.0%, IOB: 0.043U
  SMB: 0.15U, возраст: 43мин, остаток: 85.8%, IOB: 0.129U
  SMB: 0.2U, возраст: 53мин, остаток: 79.4%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.2%, IOB: 0.144U
  SMB: 0.4U, возраст: 70мин, остаток: 66.6%, IOB: 0.266U
  ... и еще 29 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.874874024167973632
  Custom Basal IOB: 1.3350852594543104
  Custom Total IOB: 3.209959283622284032
  Difference: 4.034959283622284032
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.209959283622284032
  Difference: 4.034959283622284032
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connecting>, data = ["kCBAdvDataIsConnectable": 1, "kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataTimestamp": 780292091.672761, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x132b0bbd0>(
FEBC
)
, "kCBAdvDataLocalName": DXCMHK, "kCBAdvDataManufacturerData": <d00073a5 0204>]
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Connecting to peripheral: E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
centralManager(_:didConnect:): <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
didConnect to E926E760-258A-38B6-1809-3D3BC7BC94A7
assertConfiguration
Discovering servicesToDiscover []
all uuids: [F8083535-849E-531C-C594-30F1F86A4EA5, F8083534-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5]
knownCharacteristicUUIDs: [F8083534-849E-531C-C594-30F1F86A4EA5, F8083535-849E-531C-C594-30F1F86A4EA5, F8083536-849E-531C-C594-30F1F86A4EA5, F8083538-849E-531C-C594-30F1F86A4EA5]
characteristicsToDiscover: []
Peripheral configuration completed
Delegate configuration completed
Listening for authentication responses for Optional("DXCMHK")
Set notify true for <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Ignoring authentication response: 0386695314f6893914d1651d4673125bfe
Observed authenticated session. enabling notifications for control characteristic.
Set notify true for <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
Received control response: 4e00ee260c00640a00010300650006f952000f
Listening for backfill responses
Set notify true for <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = connected>
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [-]: New sensor DXCMHK discovered, activated at 2025-09-13 22:34:55 +0000
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor didRead G7GlucoseMessage(glucose:Optional(101), sequence:2660 glucoseIsDisplayOnly:false state:ok messageTimestamp:796398 age:3, data:4e00ee260c00640a00010300650006f952000f)
Stopping scan
FetchGlucoseManager.swift - subscribe() - 75 DEV: SyncDate is 2025-09-23 03:47:13 +0000
Received control response: 3200014b000000600035eb070003010275ec0700
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms 3200014b000000600035eb070003010275ec0700
Received control response: ea00030100000000000200000045ffffff
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor comms ea00030100000000000200000045ffffff
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09888986850590859264
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09735878108513267712
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 33min, IOB: 0.0920904272842637824
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08886492943478224896
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04346910119225455616
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.1286511958611250176
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15859817264395917312
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14435547104581500928
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2660424982856802304
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 73min, IOB: 0.15962896244919762944
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05664674505769095168
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05418816464722686976
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05348928935630751744
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.0439348233019293952
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.043067730292701952
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 108min, IOB: 0.04015710830064063488
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02679934962724747264
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011571143077174376448
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02807340703383356416
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02147801708854487552
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01899351962064215552
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017487724088027971584
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015144908331476701184
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.01315584354231759872
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010623847095292719104
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 213min, IOB: 0.009614412669278783488
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.01635627383045728256
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 238min, IOB: 0.008843692582230078464
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001389050486942056448
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013774163561926289408
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001366576059511714816
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.001516668404087617536
  SMB-Basal IOB: 1.3340874223517800448U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3340874223517800448U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:14 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.87322511863787264 U
  Наш Basal IOB: 1.3340874223517800448 U
  Наш Total IOB: 3.2073125409896526848 U
  РАЗНИЦА: 4.0323125409896526848 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.4%, IOB: 0.097U
  SMB: 0.1U, возраст: 33мин, остаток: 92.1%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.9%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.9%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.8%, IOB: 0.129U
  SMB: 0.2U, возраст: 53мин, остаток: 79.3%, IOB: 0.159U
  SMB: 0.2U, возраст: 62мин, остаток: 72.2%, IOB: 0.144U
  SMB: 0.4U, возраст: 70мин, остаток: 66.5%, IOB: 0.266U
  ... и еще 29 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.87322511863787264
  Custom Basal IOB: 1.3340874223517800448
  Custom Total IOB: 3.2073125409896526848
  Difference: 4.0323125409896526848
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2073125409896526848
  Difference: 4.0323125409896526848
  Show Custom: true
DeviceDataManager.swift - updateUpdateFinished(_:) - 235 WARN: error("Loop recommendation time out or got error. Trying to loop right now.")
APSManager.swift - loop() - 162 DEV: Starting loop
APSManager.swift - runCustomPredictionService() - 198 DEV: 🚀 Starting Custom Prediction Service...
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 49 DEV: 🔧 CustomPredictionService: Starting generatePredictionsWithCustomIOB
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 53 DEV: 🔧 CustomPredictionService: Loading data from storage...
APSManager.swift - determineBasal() - 288 DEV: Start determine basal
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 64 DEV: 🔧 CustomPredictionService: Data loaded, generating custom IOB...
OpenAPS.swift - makeProfiles(useAutotune:) - 228 DEV: Start makeProfiles
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09886833178776231936
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09732745297157095424
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.0920429391811881984
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08881213145975187456
  Suggestion IOB: -0.825
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 8
  Timestamp: 2025-09-23 03:42:48 +0000
  Reason: COB: 8, Dev: 0.8, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 14.2, minGuardBG 8.4, IOBpredBG 14.6, COBpredBG 17.1; Eventual BG 17.1 >= 6.3,  insulinReq 1.13; maxBolus 0.1. Microbolusing 0.1U. temp 0<2.85U/hr. 
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04344152982592867328
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12856668781787439104
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15847685792389296128
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14423083408798810112
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2657942161715487744
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.15947501734823440384
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05658750101787621376
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05413001176541299712
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05343147157243199488
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.0438825984910505472
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.0430161003831463936
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.0401075749671232
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02676133113264511488
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011553981185582241792
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.02802544414526324736
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02143852657171755776
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.0189573978393264128
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.01745369946239756288
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.01511424069665210368
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013128128868052062208
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010600056696701810688
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009592248761693310976
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016316723106890448896
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.00881780874506428416
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001384302902552425472
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013726948869998034944
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001361878978566044672
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015082677899707082752
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09886826691297032192
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.0973273587774204928
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09204279660730447872
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.0888119729945268736
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04344144708553128448
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12856643423017189376
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15847649398487863296
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14423046025029586944
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2657934715485936128
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.1594745556704782336
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 83min, IOB: 0.05658732336328492032
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05412983738780332032
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05343129820099171328
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04388244190560601088
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.0430159455826288384
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.0401074264566089728
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02676121715907070464
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011553929738590846976
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 168min, IOB: 0.0280253003787799552
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02143840820646953472
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 186min, IOB: 0.01895728957359328512
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.01745359748385790976
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015114148782070714368
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013128045806003197952
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010599985398774450176
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009592182339537580032
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016316604582774509568
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.008817731188396480512
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.0013842886790697119744
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.001372680741793819648
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013618649064604520448
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0015082426360611745792
  SMB-Basal IOB: 1.3330921697100550144U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3330921697100550144U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:19 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.871577988542857728 U
  Наш Basal IOB: 1.3330921697100550144 U
  Наш Total IOB: 3.2046701582529127424 U
  РАЗНИЦА: 4.0296701582529127424 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
  SMB-Basal IOB: 1.3330885824649723904U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3330885824649723904U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:19 +0000
  Системный IOB: -0.825 U
  Наш Bolus IOB: 1.871573048560399872 U
  Наш Basal IOB: 1.3330885824649723904 U
  Наш Total IOB: 3.2046616310253722624 U
  РАЗНИЦА: 4.0296616310253722624 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 92.0%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.8%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.9%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.7%, IOB: 0.129U
  SMB: 0.2U, возраст: 53мин, остаток: 79.2%, IOB: 0.158U
  SMB: 0.2U, возраст: 62мин, остаток: 72.1%, IOB: 0.144U
  SMB: 0.4U, возраст: 70мин, остаток: 66.4%, IOB: 0.266U
  ... и еще 29 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.871577988542857728
  Custom Basal IOB: 1.3330921697100550144
  Custom Total IOB: 3.2046701582529127424
  Difference: 4.0296701582529127424
CustomPredictionService.swift - generateCustomIOBData() - 129 DEV: 🎯 Custom IOB Data Generated:
CustomPredictionService.swift - generateCustomIOBData() - 130 DEV:   Total IOB: 3.2046701582529127424U
CustomPredictionService.swift - generateCustomIOBData() - 131 DEV:   Basal IOB: 1.3330921697100550144U
CustomPredictionService.swift - generateCustomIOBData() - 132 DEV:   Bolus IOB: 1.871577988542857728U
CustomPredictionService.swift - generateCustomIOBData() - 133 DEV:   Activity: 0.008011675395632281856
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 69 DEV: 🔧 CustomPredictionService: Custom IOB generated, calling oref0...
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 72 DEV: 🚀 Calling oref0 with custom IOB data...
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 148 DEV: 🔧 callOref0WithCustomIOB started
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 151 DEV: 🔧 JavaScript context acquired, loading scripts...
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.9%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 92.0%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.8%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.9%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.7%, IOB: 0.129U
  SMB: 0.2U, возраст: 53мин, остаток: 79.2%, IOB: 0.158U
  SMB: 0.2U, возраст: 62мин, остаток: 72.1%, IOB: 0.144U
  SMB: 0.4U, возраст: 70мин, остаток: 66.4%, IOB: 0.266U
  ... и еще 29 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.825
  Custom Bolus IOB: 1.871573048560399872
  Custom Basal IOB: 1.3330885824649723904
  Custom Total IOB: 3.2046616310253722624
  Difference: 4.0296616310253722624
🧮 Custom IOB Update:
  System IOB: -0.825
  Custom IOB: 3.2046616310253722624
  Difference: 4.0296616310253722624
  Show Custom: true
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 160 DEV: 🔧 Scripts loaded, calling oref0...
JavaScriptWorker.swift - createContext() - 19 WARN: error("JavaScript Error: SyntaxError: Unexpected token \',\'")
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 179 DEV: 🔧 oref0 call completed, result: undefined...
CustomPredictionService.swift - parseOref0Result(_:) - 189 DEV: 🔧 parseOref0Result: parsing JSON length 9
CustomPredictionService.swift - parseOref0Result(_:) - 197 DEV: ❌ parseOref0Result: Failed to parse JSON
CustomPredictionService.swift - parseOref0Result(_:) - 198 DEV: Raw JSON: undefined
CustomPredictionService.swift - callOref0WithCustomIOB(iob:currentTemp:glucose:profile:autosens:meal:reservoir:clock:) - 183 DEV: 🔧 Parsing result: FAILED
CustomPredictionService.swift - generatePredictionsWithCustomIOB() - 91 DEV: ❌ Custom Prediction Service: oref0 возвратил nil!
APSManager.swift - runCustomPredictionService() - 228 DEV: ❌ Custom Prediction Service returned nil
APSManager.swift - runCustomPredictionService() - 208 DEV: ✅ Custom Prediction Service completed successfully!
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:42:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:30:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
App is being debugged, do not track this hang
Hang detected: 0.70s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"automatic":true,"_type":"SMB-Basal","timestamp":"2025-09-23T03:44:35.753Z","duration":0,"id":"8f65140d459048f3f9d2292fb752c650","delivered_units":0.050000000000000003,"amount":0.050000000000000003},{"_type":"SMB","timestamp":"2025-09-23T03:42:48.203Z","amount":0.10000000000000001,"id":"c9adc7e787150284cc042a71addcea47","duration":0,"delivered_units":0.10000000000000001,"automatic":true},{"automatic":true,"_type":"SMB-Basal","timestamp":"2025-09-23T03:42:35.860Z","delivered_units":0.0500000000
OpenAPS: IOB calculation result: [
    {
        "iob": -0.83,
        "activity": -0.0085,
        "basaliob": -0.833,
        "bolusiob": 0.003,
        "netbasalinsulin": -2.5,
        "bolusinsulin": 0.3,
        "time": "2025-09
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,19,m,tempModulus:,0,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,167,minutes ago; remainingCATime:,8.3,hours;,94% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-12.8,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-12.8,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 145 minIOBPredBG: 142 minZTGuardBG: 140
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 145
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,183,COB:,7,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,30,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,4.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,210,bgUndershoot:,-133,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-72
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,210,,0m 0U/h temp needed; last bolus,142.8m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 135,
    "tick": -7,
    "eventualBG": 194,
    "insulinReq": 0.25,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:48:21.096Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            135,
            129,
            123,
            119,
            116,
            113,
            112,
            111,
            112,
            113,
            115,
            118,
            122,
            126,
            130,
            133,
            136,
            139,
            142,
            144,
            147,
            149,
            151,
            153,
            155,
            156,
            158,
            159,
            160,
            162,
            163,
            164,
            165,
            165,
            166,
            167,
            167,
            168,
            168,
            169,
            169,
            169,
            169,
            170
        ],
        "ZT": [
            135,
            140,
            146,
            151,
            157,
            162,
            168,
            174,
            179,
            185,
            191,
            197,
            203,
            210,
            216,
            222,
            229,
            235,
            242,
            248,
            255,
            262,
            269,
            276,
            283,
            290,
            297,
            305,
            312,
            319,
            326,
            334,
            341,
            349,
            356,
            364,
            371,
            379,
            387,
            394,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            135,
            129,
            123,
            119,
            116,
            114,
            112,
            112,
            113,
            114,
            116,
            120,
            124,
            128,
            132,
            135,
            139,
            142,
            145,
            148,
            151,
            154,
            156,
            159,
            161,
            163,
            165,
            167,
            169,
            171,
            172,
            174,
            175,
            177,
            178,
            180,
            181,
            182,
            184,
            185,
            186,
            187,
            188,
            189,
            190,
            192,
            193,
            194
        ]
    },
    "COB": 7,
    "IOB": -0.83,
    "reason": "COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.1
}
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
APSManager.swift - enactSuggested() - 759 DEV: SMB-basal active: skipping OpenAPS temp basal (pump held at 0 U/h)
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 391 DEV: Enact bolus 0.1, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 415 DEV: Bolus attempt 1/3: 0.1U
Scheduling session Bolus
======================== Bolus ===========================
APSManager.swift - loopCompleted(error:) - 243 DEV: Loop succeeded
Send(Hex): 17a8db2d181f1a0e494e532e02002501002000020002170d3f001400030d400000000000000215
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d181f1a0e494e532e02002501002000020002170d3f001400030d400000000000000215
UserNotificationsManager.swift - ensureCanSendNotification(_:) - 313 DEV: Sending notification was allowed
APSManager.swift - reportEnacted(received:) - 849 DEV: Suggestion enacted. Received: true
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
OpenAPS.swift - determineBasal(currentTemp:clock:) - 72 DEV: Start determineBasal
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/devicestatus.json
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:42:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:30:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:25:13 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:14:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 03:08:55 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.05), final insulin: Optional(0.05)
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.15), final insulin: Optional(0.15)
OpenAPS: SMB bolus Optional(0.15)U at 2025-09-23 03:04:12 +0000 - shouldFilter: false
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:55:02 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 02:45:26 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 02:37:51 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-23 02:34:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:24:22 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:20:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:19:53 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:05:28 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 02:04:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:59:18 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.1), final insulin: Optional(0.1)
OpenAPS: SMB bolus Optional(0.1)U at 2025-09-23 01:33:55 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-23 01:25:30 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 01:09:48 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
NightscoutManager.swift - uploadStatus() - 483 DEV: Status uploaded
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:59:23 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:46:49 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:41:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:37:47 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:31:45 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:26:05 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:17:54 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:32 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0)U at 2025-09-23 00:17:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-23 00:14:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-23 00:08:33 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:49:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.050000000000000044)U at 2025-09-22 23:38:25 +0000 - shouldFilter: false
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopFirstNotification notification
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:37:02 +0000 - shouldFilter: false
UserNotificationsManager.swift - addRequest(identifier:content:deleteOld:trigger:) - 341 DEV: Sending noLoopSecondNotification notification
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:36:38 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 23:11:51 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 23:04:38 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 22:51:49 +0000 - shouldFilter: true
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 22:38:03 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.8), final insulin: Optional(0.8)
OpenAPS: SMB bolus Optional(0.8)U at 2025-09-22 22:35:29 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.95), final insulin: Optional(0.95)
OpenAPS: SMB bolus Optional(0.95)U at 2025-09-22 22:29:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.85), final insulin: Optional(0.85)
OpenAPS: SMB bolus Optional(0.85)U at 2025-09-22 22:24:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 22:14:16 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 21:06:37 +0000 - shouldFilter: true
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:54:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 20:49:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 20:44:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 20:34:16 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 20:24:21 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:19:17 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.55), final insulin: Optional(0.55)
OpenAPS: SMB bolus Optional(0.55)U at 2025-09-22 20:14:15 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 20:07:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 20:07:35 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.6), final insulin: Optional(0.6)
OpenAPS: SMB bolus Optional(0.6)U at 2025-09-22 20:04:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.65), final insulin: Optional(0.65)
OpenAPS: SMB bolus Optional(0.65)U at 2025-09-22 19:56:59 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.4), final insulin: Optional(0.4)
OpenAPS: SMB bolus Optional(0.4)U at 2025-09-22 19:36:41 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.25), final insulin: Optional(0.25)
OpenAPS: SMB bolus Optional(0.25)U at 2025-09-22 19:29:15 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.3), final insulin: Optional(0.3)
OpenAPS: SMB bolus Optional(0.3)U at 2025-09-22 19:24:14 +0000 - shouldFilter: false
OpenAPS: SMB bolus debug - insulin field: nil, amount field: Optional(0.2), final insulin: Optional(0.2)
OpenAPS: SMB bolus Optional(0.2)U at 2025-09-22 19:19:18 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:59:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:49:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.4)U at 2025-09-22 18:46:26 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:39:19 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.3)U at 2025-09-22 18:31:25 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.45)U at 2025-09-22 17:56:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(3)U at 2025-09-22 17:20:13 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.6)U at 2025-09-22 16:57:57 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 16:08:40 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 15:59:27 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 15:49:50 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 15:15:31 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 14:31:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:31:36 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 14:10:20 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.1)U at 2025-09-22 14:06:12 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.2)U at 2025-09-22 13:59:47 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.05)U at 2025-09-22 13:50:00 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 13:20:06 +0000 - shouldFilter: false
centralManager(_:didDisconnectPeripheral:error:): <CBPeripheral: 0x109deaae0, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = DXCMHK, mtu = 23, state = disconnected>
Sensor disconnected: wasRemoteDisconnect:true
DexcomSourceG7.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 127 DEV: G7 event [DXCMHK]: Sensor disconnected: suspectedEndOfSession=false
Discovered peripheral from connectionEventDidOccur E926E760-258A-38B6-1809-3D3BC7BC94A7
Not connecting to unnamed peripheral: <CBPeripheral: 0x127263720, identifier = E926E760-258A-38B6-1809-3D3BC7BC94A7, name = (null), mtu = 23, state = disconnected>
OpenAPS: Regular bolus Optional(0.25)U at 2025-09-22 13:08:44 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.35)U at 2025-09-22 12:29:39 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(1)U at 2025-09-22 12:11:11 +0000 - shouldFilter: false
OpenAPS: Regular bolus Optional(0.5)U at 2025-09-22 12:09:50 +0000 - shouldFilter: false
Recv(Hex): 17a8db2d1c0a1d680434b0024046a7ff0273
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d1c0a1d680434b0024046a7ff0273
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:75h21m, reservoirLevel:50+, insulinDelivered:107.65, bolusNotDelivered:0.10, lastProgrammingMessageSeqNum:6, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
ВБС
Болюс
DU: Stored pod events: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 06:48:21 4 секунды Определенно]
Stored doses: [Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.1ед 23/09/2025, 06:48:21 4 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 902 DEV: Bolus succeeded: 0.1
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 453 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 03:48:21 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 03:48:21 +0000, endDate: 2025-09-23 03:48:25 +0000, value: 0.1, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.1U -> SMB (isSmbBasal: false)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
App is being debugged, do not track this hang
Hang detected: 0.61s (debugger attached, not reporting)
OpenAPS: PumpHistory before IOB calculation (first 500 chars): [{"duration":0,"timestamp":"2025-09-23T03:44:35.753Z","_type":"SMB-Basal","id":"8f65140d459048f3f9d2292fb752c650","automatic":true,"delivered_units":0.050000000000000003,"amount":0.050000000000000003},{"delivered_units":0.10000000000000001,"_type":"SMB","duration":0,"automatic":true,"timestamp":"2025-09-23T03:42:48.203Z","amount":0.10000000000000001,"id":"c9adc7e787150284cc042a71addcea47"},{"_type":"SMB-Basal","id":"c7595920e2017d582efab5b702c97dab","automatic":true,"timestamp":"2025-09-23T03:42
OpenAPS: IOB calculation result: [
    {
        "iob": -0.83,
        "activity": -0.0085,
        "basaliob": -0.832,
        "bolusiob": 0.003,
        "netbasalinsulin": -2.5,
        "bolusinsulin": 0.3,
        "time": "2025-09
OpenAPS.swift - determineBasal(glucose:currentTemp:iob:profile:autosens:meal:microBolusAllowed:reservoir:pumpHistory:) - 453 DEV: ⚠️ MIDDLEWARE ОТКЛЮЧЕН из-за критических ошибок в прогнозах!
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Invalid middleware: ReferenceError: Can't find variable: middleware
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Autosens ratio: 0.72;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Adjusting basal from 0.8 to 0.6;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: target_bg from 99 to 114;
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ISF from 90 to 125
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: ; CR:,17
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: currenttemp:,[object Object],lastTempAge:,19,m,tempModulus:,0,m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: SMB enabled due to enableSMB_always
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.sens:,90,sens:,125,CSF:,7.352941176470588
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Last carbs,167,minutes ago; remainingCATime:,8.3,hours;,94% carbs absorbed
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: Carb Impact:,-12.8,mg/dL per 5m; CI Duration:,0,hours; remaining CI (~2h peak):,1,mg/dL per 5m
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: predCIs (mg/dL/5m):,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: remainingCIs:      ,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: UAM Impact:,-12.8,mg/dL per 5m; UAM Duration:,0,hours
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: minPredBG: 145 minIOBPredBG: 142 minZTGuardBG: 140
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  minCOBPredBG: 145
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log:  avgPredBG:,183,COB:,7,/,119
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,6.3,for,30,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: BG projected to remain above,4.3,for,240,minutes
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG:,210,bgUndershoot:,-133,zeroTempDuration:,240,zeroTempEffect:,400,carbsReq:,-72
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: profile.maxSMBBasalMinutes:,10,profile.current_basal:,0.8
JavaScriptWorker.swift - createContext() - 23 DEV: JavaScript log: naive_eventualBG,210,,0m 0U/h temp needed; last bolus,142.9m ago; maxBolus: 0.1
OpenAPS.swift - determineBasal(currentTemp:clock:) - 138 DEV: SUGGESTED: {
    "temp": "absolute",
    "bg": 135,
    "tick": -7,
    "eventualBG": 194,
    "insulinReq": 0.25,
    "reservoir": 23,
    "deliverAt": "2025-09-23T03:48:22.315Z",
    "sensitivityRatio": 0.72,
    "predBGs": {
        "IOB": [
            135,
            129,
            123,
            119,
            116,
            113,
            112,
            111,
            112,
            113,
            115,
            118,
            122,
            126,
            130,
            133,
            136,
            139,
            142,
            144,
            147,
            149,
            151,
            153,
            155,
            156,
            158,
            159,
            160,
            162,
            163,
            164,
            165,
            165,
            166,
            167,
            167,
            168,
            168,
            169,
            169,
            169,
            169,
            170
        ],
        "ZT": [
            135,
            140,
            146,
            151,
            157,
            162,
            168,
            174,
            179,
            185,
            191,
            197,
            203,
            210,
            216,
            222,
            229,
            235,
            242,
            248,
            255,
            262,
            269,
            276,
            283,
            290,
            297,
            305,
            312,
            319,
            326,
            334,
            341,
            349,
            356,
            364,
            371,
            379,
            387,
            394,
            401,
            401,
            401,
            401,
            401,
            401,
            401,
            401
        ],
        "COB": [
            135,
            129,
            123,
            119,
            116,
            114,
            112,
            112,
            113,
            114,
            116,
            120,
            124,
            128,
            132,
            135,
            139,
            142,
            145,
            148,
            151,
            154,
            156,
            159,
            161,
            163,
            165,
            167,
            169,
            171,
            172,
            174,
            175,
            177,
            178,
            180,
            181,
            182,
            184,
            185,
            186,
            187,
            188,
            189,
            190,
            192,
            193,
            194
        ]
    },
    "COB": 7,
    "IOB": -0.83,
    "reason": "COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. ",
    "units": 0.1,
    "duration": 30,
    "rate": 1.1
}
Scanning for peripherals and listening for connection events
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09884654266945912832
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09729587456892966912
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09199521077618084864
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08875910002690159616
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04341384384290112512
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12848183983251390464
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.1583551195302183936
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 62min, IOB: 0.14410580715651442688
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2655452089969608704
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.1593206353827765248
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05652810013106791424
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05407170821871069184
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05337350488770561024
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 102min, IOB: 0.04383024919251881984
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04296434822921424896
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.04005792695431742464
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02672323344335164416
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011536784685075990528
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02797739392556738048
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02139896795633628672
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.0189212153546512128
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017419618665267449856
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015083524028963940352
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013100371320833148928
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010576231432414949376
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.00957005324495963136
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016277118590802880512
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.008791897071388721152
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001379551463488648192
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013679696091300712448
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013571781318683752448
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0014998695895339421696
  SMB-Basal IOB: 1.3320902219467542528U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3320902219467542528U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:24 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.969925998910524928 U
  Наш Basal IOB: 1.3320902219467542528 U
  Наш Total IOB: 3.3020162208572791808 U
  РАЗНИЦА: 4.1320162208572791808 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 92.0%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.8%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.8%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.7%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 79.2%, IOB: 0.158U
  SMB: 0.2U, возраст: 62мин, остаток: 72.1%, IOB: 0.144U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.969925998910524928
  Custom Basal IOB: 1.3320902219467542528
  Custom Total IOB: 3.3020162208572791808
  Difference: 4.1320162208572791808
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.3020162208572791808
  Difference: 4.1320162208572791808
  Show Custom: true
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09882471629784211456
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.0972643567115698176
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09194771071101294592
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.0887063555659738624
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04338631488152574976
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12839748428776675328
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15823415121305137152
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.14398161587009622016
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.26529791730708352
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.159167329560747008
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05646912445718050816
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05401382528708660224
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05331595727398002688
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.04377828825509994496
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04291298082286601728
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.04000865061956299776
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02668542969685285888
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 142min, IOB: 0.011519721992986585088
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02792972689004169216
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02135972857709882624
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.0188853264320429056
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017385815376572749824
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015053059058495297536
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.01307284264870112256
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010552604538572582912
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009548043394331664384
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 219min, IOB: 0.016237847957183811584
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.0087662111468631552
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001374842660661390336
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.001363286757334536192
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.0013525195149501237248
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0014915559079410112512
  SMB-Basal IOB: 1.3310983807779160064U (from 64 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3310983807779160064U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:29 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.968285341673075456 U
  Наш Basal IOB: 1.3310983807779160064 U
  Наш Total IOB: 3.2993837224509914624 U
  РАЗНИЦА: 4.1293837224509914624 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.3%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.9%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.7%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.8%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.6%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 79.1%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 72.0%, IOB: 0.144U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.968285341673075456
  Custom Basal IOB: 1.3310983807779160064
  Custom Total IOB: 3.2993837224509914624
  Difference: 4.1293837224509914624
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.2993837224509914624
  Difference: 4.1293837224509914624
  Show Custom: true
SMB-Basal: tick() - processing basal replacement
SMB-Basal: Updated compensation units: 0 U from 0 failed pulses
SMB-Basal: Current temp basal rate: 0 U/h, remaining: 11 min, isZero: true
APSManager.swift - enactBolus(amount:isSMB:isBasalReplacement:) - 391 DEV: Enact bolus 0.05, manual false
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 415 DEV: Bolus attempt 1/3: 0.05U
Scheduling session Bolus
======================== Bolus ===========================
Send(Hex): 17a8db2d20030e01000157
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d20030e01000157
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: initiating
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
Recv(Hex): 17a8db2d240a1d280435b0004046a7ff8284
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d240a1d280435b0004046a7ff8284
POD Response: StatusResponse(deliveryStatus:Подается временный базал, progressStatus:Норма, timeActive:75h21m, reservoirLevel:50+, insulinDelivered:107.75, bolusNotDelivered:0.00, lastProgrammingMessageSeqNum:6, alerts:slot7Expired)
Send(Hex): 17a8db2d281f1a0e494e532e02001301001000010001170d3f000a00030d40000000000000815a
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d281f1a0e494e532e02001301001000010001170d3f000a00030d40000000000000815a
Recv(Hex): 17a8db2d2c0a1d680435d0014046a7ff8347
DeviceDataManager.swift - deviceManager(_:logEventForDeviceIdentifier:type:message:completion:) - 573 DEV: Device message: 17a8db2d2c0a1d680435d0014046a7ff8347
POD Response: StatusResponse(deliveryStatus:Подача болюса при подаче ВБС, progressStatus:Норма, timeActive:75h21m, reservoirLevel:50+, insulinDelivered:107.75, bolusNotDelivered:0.05, lastProgrammingMessageSeqNum:10, alerts:slot7Expired)
DeviceDataManager.swift - pumpManager(_:hasNewPumpEvents:lastReconciliation:replacePendingEvents:completion:) - 465 DEV: New pump events:
Болюс
ВБС
Болюс
DU: Stored pod events: [Болюс: 0.1ед 23/09/2025, 06:48:21 4 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 06:48:33 2 секунды Определенно]
Stored doses: [Болюс: 0.1ед 23/09/2025, 06:48:21 4 секунды Определенно, Врем базал: 0 ед/ч 23/09/2025, 06:29:45 30 минут 0 секунд 0 ед Определенно, Болюс: 0.05ед 23/09/2025, 06:48:33 2 секунды Определенно]
APSManager.swift - enactBolus(units:activationType:) - 902 DEV: Bolus succeeded: 0.05
APSManager.swift - enactBolusWithRetry(pump:units:activationType:isSMB:attempt:maxAttempts:) - 453 DEV: Bolus succeeded on attempt 1/3
------------------------ Bolus ---------------------------
Start of idle at Optional(2025-09-23 03:48:33 +0000)
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 386 DEV: New pump status Bolus: inProgress(LoopKit.DoseEntry(type: LoopKit.DoseType.bolus, startDate: 2025-09-23 03:48:33 +0000, endDate: 2025-09-23 03:48:35 +0000, value: 0.05, unit: LoopKit.DoseUnit.units, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil))
DeviceDataManager.swift - pumpManager(_:didUpdate:oldStatus:) - 387 DEV: New pump status Basal: Optional(LoopKit.PumpManagerStatus.BasalDeliveryState.tempBasal(LoopKit.DoseEntry(type: LoopKit.DoseType.tempBasal, startDate: 2025-09-23 03:29:45 +0000, endDate: 2025-09-23 03:59:45 +0000, value: 0.0, unit: LoopKit.DoseUnit.unitsPerHour, deliveredUnits: nil, description: nil, insulinType: Optional(LoopKit.InsulinType.fiasp), automatic: Optional(true), manuallyEntered: false, syncIdentifier: nil, isMutable: true, wasProgrammedByPumpUI: false, scheduledBasalRate: nil)))
PumpHistoryStorage: Automatic bolus 0.1U -> SMB (isSmbBasal: false)
PumpHistoryStorage: Automatic bolus 0.05U -> SMB-Basal (isSmbBasal: true)
NetworkService.swift - run(_:) - 17 DEV: POST  ***/api/v1/treatments.json
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09880248764358914048
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09723237248899821568
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09189964512920109056
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08865301663143537664
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04335848290104239104
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.1283122115250576384
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15811193159482003456
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.14385618507650777088
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.265048209119076608
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.1590125383270242304
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05640958860472870912
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05395539584322492416
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05325786720822361088
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.0437258475187355904
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04286113992232800256
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.03995892266361142272
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02664728829367032832
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 143min, IOB: 0.011502508039832399872
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02788164667834531328
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.02132015288148741376
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.0188491314973231232
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017351724868079972352
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.015022336832069193728
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013045082956523065344
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010528781308405358592
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009525851519406303232
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 220min, IOB: 0.016198255168841371648
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.008740321894426686464
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001370097838176176128
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013585681092748382208
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 251min, IOB: 0.001347825310357752832
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.001483187899628069888
  SMB-Basal IOB: 1.380093188426569728U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.380093188426569728U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:34 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.9666286032934528 U
  Наш Basal IOB: 1.380093188426569728 U
  Наш Total IOB: 3.346721791720022528 U
  РАЗНИЦА: 4.176721791720022528 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.9%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.7%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.7%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.5%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 79.1%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 71.9%, IOB: 0.144U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.9666286032934528
  Custom Basal IOB: 1.380093188426569728
  Custom Total IOB: 3.346721791720022528
  Difference: 4.176721791720022528
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.346721791720022528
  Difference: 4.176721791720022528
  Show Custom: true
-[WCSession onqueue_handleMessageCompletionWithError:withMessageID:] 073DF3E0-C63B-4B4B-9A50-C058D3CC04C3 due to WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession _onqueue_notifyOfMessageError:messageID:withErrorHandler:] 073DF3E0-C63B-4B4B-9A50-C058D3CC04C3 errorHandler: YES with WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession onqueue_handleMessageCompletionWithError:withMessageID:] 9053CDC5-6D40-4748-9A06-00F4A2F36FCB due to WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
-[WCSession _onqueue_notifyOfMessageError:messageID:withErrorHandler:] 9053CDC5-6D40-4748-9A06-00F4A2F36FCB errorHandler: YES with WCErrorCodeTransferTimedOut -> IDSErrorTypeTimedOut -> com.apple.ids.idssenderrordomain:34
WatchManager.swift - sendState() - 121 WARN: errorWithInnerError("Cannot send message to watch", Error Domain=WCErrorDomain Code=7017 "Превышен лимит времени на передачу кода." UserInfo={NSLocalizedDescription=Превышен лимит времени на передачу кода., NSUnderlyingError=0x132aa26a0 {Error Domain=com.apple.identityservices.error Code=23 "This message was a non-waking message and the destination device for this message did not wake before the timeout fired" UserInfo={NSLocalizedDescription=This message was a non-waking message and the destination device for this message did not wake before the timeout fired, NSUnderlyingError=0x132aa0f60 {Error Domain=com.apple.ids.idssenderrordomain Code=34 "(null)"}}}})
WatchManager.swift - sendState() - 126 DEV: Updated application context after sendMessageData failure
WatchManager.swift - sendState() - 121 WARN: errorWithInnerError("Cannot send message to watch", Error Domain=WCErrorDomain Code=7017 "Превышен лимит времени на передачу кода." UserInfo={NSLocalizedDescription=Превышен лимит времени на передачу кода., NSUnderlyingError=0x132aa27f0 {Error Domain=com.apple.identityservices.error Code=23 "This message was a non-waking message and the destination device for this message did not wake before the timeout fired" UserInfo={NSLocalizedDescription=This message was a non-waking message and the destination device for this message did not wake before the timeout fired, NSUnderlyingError=0x132aa37e0 {Error Domain=com.apple.ids.idssenderrordomain Code=34 "(null)"}}}})
WatchManager.swift - sendState() - 126 DEV: Updated application context after sendMessageData failure
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.098780165479959552
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09720036683154669568
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09185168344388671488
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.0885998262687788032
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04333073565996655616
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12822720963910627328
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15799016391056218112
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.1437312630189999104
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2647995651393475584
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.1588584194042861568
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05635032254254426112
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.0538972344509285888
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05320004452816101376
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.04367365812169773056
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04280954830768790528
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.03990943642257980416
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02660934107606230016
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 143min, IOB: 0.011485382863245211648
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02783382379674246144
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.0212807927995694976
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.01881313534201576704
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017317822588498051072
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.0149917858324627456
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.013017479418002796544
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010505094025175474176
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009503787155276423168
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 220min, IOB: 0.016158892488320700416
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.00871459048118587904
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001365383196942027776
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013538795008357640192
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 252min, IOB: 0.0013431610130911100928
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.0014748823797574141952
  SMB-Basal IOB: 1.3790934817987094528U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3790934817987094528U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:39 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.964978877127222784 U
  Наш Basal IOB: 1.3790934817987094528 U
  Наш Total IOB: 3.3440723589259322368 U
  РАЗНИЦА: 4.1740723589259322368 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.9%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.6%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.7%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.5%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 79.0%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 71.9%, IOB: 0.144U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.964978877127222784
  Custom Basal IOB: 1.3790934817987094528
  Custom Total IOB: 3.3440723589259322368
  Difference: 4.1740723589259322368
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.3440723589259322368
  Difference: 4.1740723589259322368
  Show Custom: true
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
-[RTIInputSystemClient remoteTextInputSessionWithID:performInputOperation:]  perform input operation requires a valid sessionID. inputModality = Keyboard, inputOperation = dismissAutoFillPanel, customInfoType = UIUserInteractionRemoteInputOperations
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 5min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09875771711576612864
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09716829141986377728
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09180375150036158464
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08854670181114663936
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.043303029941548288
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.1281423460934607872
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15786865747880996864
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.14360665349910069248
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2645515941957556224
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.15870473016739262464
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05629123282617888768
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.05383924936559325184
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05314239801208899584
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.0436216376024522496
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04275812445148814336
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.03986011366313040384
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02657152794193905664
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 143min, IOB: 0.011468319325568002048
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02778618234597165056
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 181min, IOB: 0.0212415858167687936
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.01877728077507117056
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 190min, IOB: 0.017284054661309028352
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 196min, IOB: 0.014961357489566461952
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.012989988131529539584
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.01048150499248079872
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009481815177789319168
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 220min, IOB: 0.016119697223000090624
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.008688975836859037696
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.0013606911969436751872
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013492134333402128384
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 252min, IOB: 0.0013385191630780112896
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.001466625955745604608
  SMB-Basal IOB: 1.3780957693893279744U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3780957693893279744U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:44 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.963333568611098112 U
  Наш Basal IOB: 1.3780957693893279744 U
  Наш Total IOB: 3.3414293380004260864 U
  РАЗНИЦА: 4.1714293380004260864 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 5мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.8%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.2%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.8%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.5%, IOB: 0.089U
  SMB: 0.05U, возраст: 42мин, остаток: 86.6%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.4%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 78.9%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 71.8%, IOB: 0.144U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.963333568611098112
  Custom Basal IOB: 1.3780957693893279744
  Custom Total IOB: 3.3414293380004260864
  Difference: 4.1714293380004260864
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.3414293380004260864
  Difference: 4.1714293380004260864
  Show Custom: true
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: background
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09873501187370862592
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09713595933289660416
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09175556972799437824
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.0884933333417492992
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.04327520410352056832
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.12805712575218720768
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15774670325665738752
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.14348162928605186048
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 70min, IOB: 0.2643028490201124352
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.15855057359584579584
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05623197455400899584
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 87min, IOB: 0.053781102127637248
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 88min, IOB: 0.05308459117514328064
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.04356948229865868288
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04270656817298138624
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.03981066646523145216
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02653362814483776512
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 143min, IOB: 0.011451217811233077248
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02773844418686966784
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 182min, IOB: 0.02120230303142170112
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.01874135846545732096
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 191min, IOB: 0.017250223936912060416
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 197min, IOB: 0.014930874149850263552
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.012962448589912264704
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 210min, IOB: 0.010457876484482711552
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009459807301559416832
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 220min, IOB: 0.016080440525396748288
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.0086633284002048512
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.001355994441081020416
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 251min, IOB: 0.0013445426610913968128
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 252min, IOB: 0.001333872656011992064
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 276min, IOB: 0.001458370410446674944
  SMB-Basal IOB: 1.377095426917675008U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.377095426917675008U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:49 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.961683075281154816 U
  Наш Basal IOB: 1.377095426917675008 U
  Наш Total IOB: 3.338778502198829824 U
  РАЗНИЦА: 4.168778502198829824 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.8%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.5%, IOB: 0.088U
  SMB: 0.05U, возраст: 42мин, остаток: 86.6%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.4%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 78.9%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 71.7%, IOB: 0.143U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.961683075281154816
  Custom Basal IOB: 1.377095426917675008
  Custom Total IOB: 3.338778502198829824
  Difference: 4.168778502198829824
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.338778502198829824
  Difference: 4.168778502198829824
  Show Custom: true
centralManager(_:didDiscover:advertisementData:rssi:): <CBPeripheral: 0x109deaca0, identifier = 5DFBA815-D9D7-679E-B6BE-2887E06E54BB, name = DXCMXn, mtu = 23, state = connecting>, data = ["kCBAdvDataRxPrimaryPHY": 129, "kCBAdvDataTimestamp": 780292131.555035, "kCBAdvDataServiceUUIDs": <__NSArrayM 0x12a86d9e0>(
FEBC
)
, "kCBAdvDataLocalName": DXCMXn, "kCBAdvDataRxSecondaryPHY": 0, "kCBAdvDataIsConnectable": 1, "kCBAdvDataManufacturerData": <d000c93d 0004>]
Not connecting to peripheral: DXCMXn
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: inactive
FreeAPSApp.swift - body - 53 DEV: APPLICATION PHASE: active
🔍 СИСТЕМНЫЙ IOB ДИАГНОСТИКА:
  Suggestion IOB: -0.83
  Raw IOB Result: nil
  IOBEntry: не удалось распарсить
  COB: 7
  Timestamp: 2025-09-23 03:48:22 +0000
  Reason: COB: 7, Dev: -2.0, BGI: 0.3, ISF: 6.9, CR: 17, Target: 6.3, minPredBG 8.1, minGuardBG 6.2, IOBpredBG 9.4, COBpredBG 10.8; Eventual BG 10.8 >= 6.3,  insulinReq 0.25; maxBolus 0.1. Microbolusing 0.1U. temp 0<1.1U/hr. 
  Bolus: 0.1U at 2025-09-23 03:48:21 +0000, age: 0min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:42:48 +0000, age: 6min, IOB: 0.1
  Bolus: 0.1U at 2025-09-23 03:30:02 +0000, age: 18min, IOB: 0.09871218315650138112
  Bolus: 0.1U at 2025-09-23 03:25:13 +0000, age: 23min, IOB: 0.09710356032941938688
  Bolus: 0.1U at 2025-09-23 03:14:16 +0000, age: 34min, IOB: 0.09170742065859032064
  Bolus: 0.1U at 2025-09-23 03:08:55 +0000, age: 39min, IOB: 0.08844003374517924864
  Bolus: 0.05U at 2025-09-23 03:05:57 +0000, age: 42min, IOB: 0.043247421267786752
  Bolus: 0.15U at 2025-09-23 03:04:12 +0000, age: 44min, IOB: 0.1279720481771587584
  Bolus: 0.2U at 2025-09-23 02:55:02 +0000, age: 53min, IOB: 0.15762501602314610688
  Bolus: 0.2U at 2025-09-23 02:45:26 +0000, age: 63min, IOB: 0.14335692307030628352
  Bolus: 0.4U at 2025-09-23 02:37:51 +0000, age: 71min, IOB: 0.2640547872628337664
  Bolus: 0.25U at 2025-09-23 02:34:17 +0000, age: 74min, IOB: 0.1583968530267921408
  Bolus: 0.1U at 2025-09-23 02:24:22 +0000, age: 84min, IOB: 0.05617289495178363904
  Bolus: 0.1U at 2025-09-23 02:20:53 +0000, age: 88min, IOB: 0.0537231334469245952
  Bolus: 0.1U at 2025-09-23 02:19:53 +0000, age: 89min, IOB: 0.05302696273107508224
  Bolus: 0.1U at 2025-09-23 02:05:28 +0000, age: 103min, IOB: 0.04351749779235251712
  Bolus: 0.1U at 2025-09-23 02:04:05 +0000, age: 104min, IOB: 0.04265518154308643328
  Bolus: 0.1U at 2025-09-23 01:59:18 +0000, age: 109min, IOB: 0.03976138453827724288
  Bolus: 0.1U at 2025-09-23 01:33:55 +0000, age: 134min, IOB: 0.02649586372442266112
  Bolus: 0.05U at 2025-09-23 01:25:30 +0000, age: 143min, IOB: 0.011434178509458898944
  Bolus: 0.2U at 2025-09-23 00:59:23 +0000, age: 169min, IOB: 0.02769088898078935552
  Bolus: 0.2U at 2025-09-23 00:46:49 +0000, age: 182min, IOB: 0.0211631745667183744
  Bolus: 0.2U at 2025-09-23 00:41:21 +0000, age: 187min, IOB: 0.01870557884848315648
  Bolus: 0.2U at 2025-09-23 00:37:47 +0000, age: 191min, IOB: 0.017216528596844058624
  Bolus: 0.2U at 2025-09-23 00:31:45 +0000, age: 197min, IOB: 0.014900514384023513088
  Bolus: 0.2U at 2025-09-23 00:26:05 +0000, age: 202min, IOB: 0.012935022117646680064
  Bolus: 0.2U at 2025-09-23 00:17:54 +0000, age: 211min, IOB: 0.010434346913187278848
  Bolus: 0.2U at 2025-09-23 00:14:15 +0000, age: 214min, IOB: 0.009437892444336150528
  Bolus: 0.4U at 2025-09-23 00:08:33 +0000, age: 220min, IOB: 0.01604135235091291136
  Bolus: 0.4U at 2025-09-22 23:49:16 +0000, age: 239min, IOB: 0.008637798400504424448
  Bolus: 0.1U at 2025-09-22 23:37:02 +0000, age: 251min, IOB: 0.0013513204394288943104
  Bolus: 0.1U at 2025-09-22 23:36:50 +0000, age: 252min, IOB: 0.001339894541950792704
  Bolus: 0.1U at 2025-09-22 23:36:38 +0000, age: 252min, IOB: 0.001329248707607921664
  Bolus: 0.4U at 2025-09-22 23:11:51 +0000, age: 277min, IOB: 0.0014501640911779741696
  SMB-Basal IOB: 1.3760968219697358848U (from 65 pulses)
  Regular Basal IOB: 0U (SMB-basal замещает обычный базал)
  Total Basal IOB: 1.3760968219697358848U
🚨 КРИТИЧНАЯ ДИАГНОСТИКА IOB:
  Время расчета: 2025-09-23 03:48:54 +0000
  Системный IOB: -0.83 U
  Наш Bolus IOB: 1.960037069338706432 U
  Наш Basal IOB: 1.3760968219697358848 U
  Наш Total IOB: 3.3361338913084423168 U
  РАЗНИЦА: 4.1661338913084423168 U
🚨 КРИТИЧНО: Разница больше 1U! Требуется анализ!
🔍 АНАЛИЗ РАЗЛИЧИЙ IOB:
📊 Модель инсулина:
  Длительность действия: 5.166666666666667 часов
  Пик активности: 55.0 минут
📋 Активные болюсы (последние 5 часов):
  SMB: 0.1U, возраст: 0мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 6мин, остаток: 100.0%, IOB: 0.100U
  SMB: 0.1U, возраст: 18мин, остаток: 98.7%, IOB: 0.099U
  SMB: 0.1U, возраст: 23мин, остаток: 97.1%, IOB: 0.097U
  SMB: 0.1U, возраст: 34мин, остаток: 91.7%, IOB: 0.092U
  SMB: 0.1U, возраст: 39мин, остаток: 88.4%, IOB: 0.088U
  SMB: 0.05U, возраст: 42мин, остаток: 86.5%, IOB: 0.043U
  SMB: 0.15U, возраст: 44мин, остаток: 85.3%, IOB: 0.128U
  SMB: 0.2U, возраст: 53мин, остаток: 78.8%, IOB: 0.158U
  SMB: 0.2U, возраст: 63мин, остаток: 71.7%, IOB: 0.143U
  ... и еще 30 болюсов
🎯 Возможные причины различий:
  1. Разные модели инсулина (OpenAPS vs наша)
  2. Разные временные зоны или расчеты возраста
  3. Разные наборы данных (мы учитываем больше болюсов)
  4. Middleware корректирует системный IOB
  5. SMB-basal IOB не учитывается в системном расчете
🧮 Custom IOB Calculator:
  System IOB: -0.83
  Custom Bolus IOB: 1.960037069338706432
  Custom Basal IOB: 1.3760968219697358848
  Custom Total IOB: 3.3361338913084423168
  Difference: 4.1661338913084423168
🧮 Custom IOB Update:
  System IOB: -0.83
  Custom IOB: 3.3361338913084423168
  Difference: 4.1661338913084423168
  Show Custom: true