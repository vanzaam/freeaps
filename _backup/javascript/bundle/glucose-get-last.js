var freeaps_glucoseGetLast;freeaps_glucoseGetLast=(()=>{var e={6237:e=>{e.exports=function(e){for(var t=(e=e.map((function(e){return e.glucose=e.glucose||e.sgv,e})))[0],r=t.date||Date.parse(t.display_time)||Date.parse(c.dateString),a=[],o=[],n=[],u=0,s=1;s<e.length;s++){if(void 0!==e[s]&&"cal"===e[s].type){u=s;break}if(void 0!==e[s]&&e[s].glucose>38&&e[s].device===t.device){var l,c=e[s],d=c.date||Date.parse(c.display_time)||Date.parse(c.dateString),g=0;void 0!==d&&void 0!==r?(l=Math.round((r-d)/6e4),g=(t.glucose-c.glucose)/l*5):console.error("Error: date field not found: cannot calculate avgdelta"),-2<l&&l<2.5?(t.glucose=(t.glucose+c.glucose)/2,r=(r+d)/2):2.5<l&&l<17.5?(o.push(g),2.5<l&&l<7.5&&a.push(g)):17.5<l&&l<42.5&&n.push(g)}}var i=0,p=0,h=0;return a.length>0&&(i=a.reduce((function(e,t){return e+t}))/a.length),o.length>0&&(p=o.reduce((function(e,t){return e+t}))/o.length),n.length>0&&(h=n.reduce((function(e,t){return e+t}))/n.length),{delta:Math.round(100*i)/100,glucose:Math.round(100*t.glucose)/100,noise:Math.round(t.noise),short_avgdelta:Math.round(100*p)/100,long_avgdelta:Math.round(100*h)/100,date:r,last_cal:u}}}},t={};return function r(a){if(t[a])return t[a].exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}(6237)})();
